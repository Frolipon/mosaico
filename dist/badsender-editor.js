!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Badsender=e()}}(function(){var e;return function t(e,n,o){function i(a,l){if(!n[a]){if(!e[a]){var s="function"==typeof require&&require;if(!l&&s)return s(a,!0);if(r)return r(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return i(n?n:t)},u,u.exports,t,e,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,n){(function(n){function o(){}function i(){c.log.apply(c,arguments)}function r(){c.log.apply(c,arguments)}function a(){c.warn.apply(c,arguments)}function l(e){h[e]=Date.now()}function s(e){var t=h[e];if(!t)throw new Error("No such label: "+e);Date.now()-t}function d(){var e=new Error;e.name="Trace",e.message=p.format.apply(null,arguments)}function u(e){}function f(e){if(!e){var t=b.call(arguments,1);f.ok(!1,p.format.apply(null,t))}}var c,p=e("util"),f=e("assert"),b=Array.prototype.slice,h={};c="undefined"!=typeof n&&n.console?n.console:"undefined"!=typeof window&&window.console?window.console:{};for(var g=[[o,"log"],[i,"info"],[r,"warn"],[a,"error"],[l,"time"],[s,"timeEnd"],[d,"trace"],[u,"dir"],[f,"assert"]],y=0;y<g.length;y++){var v=g[y],m=v[0],w=v[1];c[w]||(c[w]=m)}t.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{assert:14,util:30}],2:[function(e,t,n){!function(e,t){var n=0,o=window.navigator.userAgent,i=o.indexOf("MSIE ")>0,r=i?"-ie":"",a=i?!1:/mozilla/.test(o.toLowerCase())&&!/webkit/.test(o.toLowerCase()),l=[],s=["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646"],d=["f2f2f2","7f7f7f","ddd9c3","c6d9f0","dbe5f1","f2dcdb","ebf1dd","e5e0ec","dbeef3","fdeada","d8d8d8","595959","c4bd97","8db3e2","b8cce4","e5b9b7","d7e3bc","ccc1d9","b7dde8","fbd5b5","bfbfbf","3f3f3f","938953","548dd4","95b3d7","d99694","c3d69b","b2a2c7","92cddc","fac08f","a5a5a5","262626","494429","17365d","366092","953734","76923c","5f497a","31859b","e36c09","7f7f7f","0c0c0c","1d1b10","0f243e","244061","632423","4f6128","3f3151","205867","974806"],u=["c00000","ff0000","ffc000","ffff00","92d050","00b050","00b0f0","0070c0","002060","7030a0"],f=[["003366","336699","3366cc","003399","000099","0000cc","000066"],["006666","006699","0099cc","0066cc","0033cc","0000ff","3333ff","333399"],["669999","009999","33cccc","00ccff","0099ff","0066ff","3366ff","3333cc","666699"],["339966","00cc99","00ffcc","00ffff","33ccff","3399ff","6699ff","6666ff","6600ff","6600cc"],["339933","00cc66","00ff99","66ffcc","66ffff","66ccff","99ccff","9999ff","9966ff","9933ff","9900ff"],["006600","00cc00","00ff00","66ff99","99ffcc","ccffff","ccccff","cc99ff","cc66ff","cc33ff","cc00ff","9900cc"],["003300","009933","33cc33","66ff66","99ff99","ccffcc","ffffff","ffccff","ff99ff","ff66ff","ff00ff","cc00cc","660066"],["333300","009900","66ff33","99ff66","ccff99","ffffcc","ffcccc","ff99cc","ff66cc","ff33cc","cc0099","993399"],["336600","669900","99ff33","ccff66","ffff99","ffcc99","ff9999","ff6699","ff3399","cc3399","990099"],["666633","99cc00","ccff33","ffff66","ffcc66","ff9966","ff6666","ff0066","d60094","993366"],["a58800","cccc00","ffff00","ffcc00","ff9933","ff6600","ff0033","cc0066","660033"],["996633","cc9900","ff9900","cc6600","ff3300","ff0000","cc0000","990033"],["663300","996600","cc3300","993300","990000","800000","993333"]],c="#0000ffff",p=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},b=function(e){return p(Number(e))},h=function(e){var t=p(e);return t+t+t},g=function(e){if(e.length>10){var t=1+e.indexOf("("),n=e.indexOf(")"),o=e.substring(t,n).split(",");return["#",b(o[0]),b(o[1]),b(o[2])].join("")}return e};e.widget("evol.colorpicker",{version:"3.2.1",options:{color:null,showOn:"both",hideButton:!1,displayIndicator:!0,transparentColor:!1,history:!0,defaultPalette:"theme",strings:"Theme Colors,Standard Colors,Web Colors,Theme Colors,Back to Palette,History,No history yet."},_active:!1,_create:function(){var t=this;switch(this._paletteIdx="theme"==this.options.defaultPalette?1:2,this._id="evo-cp"+n++,this._enabled=!0,this.options.showOn=this.options.hideButton?"focus":this.options.showOn,this.element.get(0).tagName){case"INPUT":var o=this.options.color,l=this.element,s=("focus"===this.options.showOn?"":"evo-pointer ")+"evo-colorind"+(a?"-ff":r)+(this.options.hideButton?" evo-hidden-button":""),d="";if(this._isPopup=!0,this._palette=null,null!==o)l.val(o);else{var u=l.val();""!==u&&(o=this.options.color=u)}o===c?s+=" evo-transparent":d=null!==o?"background-color:"+o:"",l.addClass("colorPicker "+this._id).wrap('<div style="width:'+(this.options.hideButton?this.element.width():this.element.width()+32)+"px;"+(i?"margin-bottom:-21px;":"")+(a?"padding:1px 0;":"")+'"></div>').after('<div class="'+s+'" style="'+d+'"></div>').on("keyup onpaste",function(n){var o=e(this).val();o!=t.options.color&&t._setValue(o,!0)});var f=this.options.showOn;("both"===f||"focus"===f)&&l.on("focus",function(){t.showPalette()}),("both"===f||"button"===f)&&l.next().on("click",function(e){return e.stopPropagation(),t.showPalette(),!1});break;default:this._isPopup=!1,this._palette=this.element.html(this._paletteHTML()).attr("aria-haspopup","true"),this._bindColors()}if(this.options.history&&(o&&this._add2History(o),this.options.initialHistory)){var p=this.options.initialHistory;for(var b in p)this._add2History(p[b])}},_paletteHTML:function(){var e=this._paletteIdx=Math.abs(this._paletteIdx),t=this.options,n=t.strings.split(","),o='<div class="evo-pop'+r+' ui-widget ui-widget-content ui-corner-all"'+(this._isPopup?' style="position:absolute"':"")+"><span>"+this["_paletteHTML"+e]()+'</span><div class="evo-more"><a href="javascript:void(0)">'+n[1+e]+"</a>";return t.history&&(o+='<a href="javascript:void(0)" class="evo-hist">'+n[5]+"</a>"),o+="</div>",t.displayIndicator&&(o+=this._colorIndHTML(this.options.color)+this._colorIndHTML("")),o+="</div>"},_colorIndHTML:function(e){var t=i?"evo-colorbox-ie ":"",n="";return e?e===c?t+="evo-transparent":n="background-color:"+e:n="display:none",'<div class="evo-color" style="float:left"><div style="'+n+'" class="'+t+'"></div><span>'+(e?e:"")+"</span></div>"},_paletteHTML1:function(){for(var e=this.options,t=e.strings.split(","),n='<td style="background-color:#',o=i?'"><div style="width:2px;"></div></td>':'"><span/></td>',a='<tr><th colspan="10" class="ui-widget-content">',l='<table class="evo-palette'+r+'">'+a+t[0]+"</th></tr><tr>",f=0;10>f;f++)l+=n+s[f]+o;for(l+="</tr>",i||(l+='<tr><th colspan="10"></th></tr>'),l+='<tr class="top">',f=0;10>f;f++)l+=n+d[f]+o;for(var c=1;4>c;c++)for(l+='</tr><tr class="in">',f=0;10>f;f++)l+=n+d[10*c+f]+o;for(l+='</tr><tr class="bottom">',f=40;50>f;f++)l+=n+d[f]+o;for(l+="</tr>"+a,e.transparentColor&&(l+='<div class="evo-transparent evo-tr-box"></div>'),l+=t[1]+"</th></tr><tr>",f=0;10>f;f++)l+=n+u[f]+o;return l+="</tr></table>"},_paletteHTML2:function(){for(var e,t,n='<td style="background-color:#',o=i?'"><div style="width:5px;"></div></td>':'"><span/></td>',a='<table class="evo-palette2'+r+'"><tr>',l="</tr></table>",s='<div class="evo-palcenter">',d=0,u=f.length;u>d;d++){s+=a;var c=f[d];for(e=0,t=c.length;t>e;e++)s+=n+c[e]+o;s+=l}s+='<div class="evo-sep"/>';var p="";for(s+=a,e=255;e>10;e-=10)s+=n+h(e)+o,e-=10,p+=n+h(e)+o;return s+=l+a+p+l+"</div>"},_switchPalette:function(t){if(this._enabled){var n,o,i,r=this.options.strings.split(",");if(e(t).hasClass("evo-hist")){var a=['<table class="evo-palette"><tr><th class="ui-widget-content">',r[5],"</th></tr></tr></table>",'<div class="evo-cHist">'];if(0===l.length)a.push("<p>&nbsp;",r[6],"</p>");else for(var s=l.length-1;s>-1;s--)9===l[s].length?a.push('<div class="evo-transparent"></div>'):a.push('<div style="background-color:',l[s],'"></div>');a.push("</div>"),n=-this._paletteIdx,o=a.join(""),i=r[4]}else this._paletteIdx<0?(n=-this._paletteIdx,this._palette.find(".evo-hist").show()):n=2==this._paletteIdx?1:2,o=this["_paletteHTML"+n](),i=r[n+1],this._paletteIdx=n;this._paletteIdx=n;var d=this._palette.find(".evo-more").prev().html(o).end().children().eq(0).html(i);0>n&&d.next().hide()}},_downOrUpPositioning:function(){for(var e=this.element,t=0;null!==e&&100>t;){if("visible"!=e.css("overflow")){var n=this._palette.offset().top+this._palette.height(),o=e.offset().top+e.height(),i=this._palette.offset().top-this._palette.height()-this.element.outerHeight(),r=e.offset().top,a=n>o&&i>r;a?this._palette.css({bottom:this.element.outerHeight()+"px"}):this._palette.css({bottom:"auto"});break}if("HTML"==e[0].tagName)break;e=e.offsetParent(),t++}},showPalette:function(){if(this._enabled&&(this._active=!0,e(".colorPicker").not("."+this._id).colorpicker("hidePalette"),null===this._palette)){this._palette=this.element.next().after(this._paletteHTML()).next().on("click",function(e){return e.stopPropagation(),!1}),this._bindColors();var t=this;this._isPopup&&(this._downOrUpPositioning(),e(document.body).on("click."+t._id,function(e){e.target!=t.element.get(0)&&t.hidePalette()}).on("keyup."+t._id,function(e){27===e.keyCode&&t.hidePalette()}))}return this},hidePalette:function(){if(this._isPopup&&this._palette){e(document.body).off("click."+this._id);var t=this;this._palette.off("mouseover click","td,.evo-transparent").fadeOut(function(){t._palette.remove(),t._palette=t._cTxt=null}).find(".evo-more a").off("click")}return this},_bindColors:function(){var t=this,n=this.options,o=this._palette.find("div.evo-color"),i=n.history?"td,.evo-cHist>div":"td";n.transparentColor&&(i+=",.evo-transparent"),this._cTxt1=o.eq(0).children().eq(0),this._cTxt2=o.eq(1).children().eq(0),this._palette.on("click",i,function(n){if(t._enabled){var o=e(this);t._setValue(o.hasClass("evo-transparent")?c:g(o.attr("style").substring(17))),t._active=!1}}).on("mouseover",i,function(n){if(t._enabled){var o=e(this),i=o.hasClass("evo-transparent")?c:g(o.attr("style").substring(17));t.options.displayIndicator&&t._setColorInd(i,2),t._active&&t.element.trigger("mouseover.color",i)}}).find(".evo-more a").on("click",function(){t._switchPalette(this)})},val:function(e){return"undefined"==typeof e?this.options.color:(this._setValue(e),this)},_setValue:function(e,t){e=e.replace(/ /g,""),this.options.color=e,this._isPopup?(t||this.hidePalette(),this._setBoxColor(this.element.val(e).next(),e)):this._setColorInd(e,1),this.options.history&&this._paletteIdx>0&&this._add2History(e),this.element.trigger("change.color",e)},_setColorInd:function(e,t){var n=this["_cTxt"+t];this._setBoxColor(n,e),n.next().html(e)},_setBoxColor:function(e,t){t===c?e.addClass("evo-transparent").removeAttr("style"):e.removeClass("evo-transparent").attr("style","background-color:"+t)},_setOption:function(e,t){"color"==e?this._setValue(t,!0):this.options[e]=t},_add2History:function(e){for(var t=l.length,n=0;t>n;n++)if(e==l[n])return;t>27&&l.shift(),l.push(e)},clear:function(){this.hidePalette().val("")},enable:function(){var e=this.element;return this._isPopup?e.removeAttr("disabled"):e.css({opacity:"1","pointer-events":"auto"}),"focus"!==this.options.showOn&&this.element.next().addClass("evo-pointer"),e.removeAttr("aria-disabled"),this._enabled=!0,this},disable:function(){var e=this.element;return this._isPopup?e.attr("disabled","disabled"):(this.hidePalette(),e.css({opacity:"0.3","pointer-events":"none"})),"focus"!==this.options.showOn&&this.element.next().removeClass("evo-pointer"),e.attr("aria-disabled","true"),this._enabled=!1,this},isDisabled:function(){return!this._enabled},destroy:function(){e(document.body).off("click."+this._id),this._palette&&(this._palette.off("mouseover click","td,.evo-cHist>div,.evo-transparent").find(".evo-more a").off("click"),this._isPopup&&this._palette.remove(),this._palette=this._cTxt=null),this._isPopup&&this.element.next().off("click").remove().end().off("focus").unwrap(),this.element.removeClass("colorPicker "+this.id).empty(),e.Widget.prototype.destroy.call(this)}})}(jQuery)},{}],3:[function(e,t,n){!function(e){"use strict";var o="Compound",i="Identifier",r="MemberExpression",a="Literal",l="ThisExpression",s="CallExpression",d="UnaryExpression",u="BinaryExpression",f="LogicalExpression",c="ConditionalExpression",p="ArrayExpression",b=46,h=44,g=39,y=34,v=40,m=41,w=91,k=93,x=63,_=59,j=58,O=function(e,t){var n=new Error(e+" at character "+t);throw n.index=t,n.description=e,n},S=!0,C={"-":S,"!":S,"~":S,"+":S},$={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},A=function(e){var t,n=0;for(var o in e)(t=o.length)>n&&e.hasOwnProperty(o)&&(n=t);return n},T=A(C),E=A($),H={"true":!0,"false":!1,"null":null},M="this",I=function(e){return $[e]||0},B=function(e,t,n){var o="||"===e||"&&"===e?f:u;return{type:o,operator:e,left:t,right:n}},D=function(e){return e>=48&&57>=e},P=function(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e},F=function(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||e>=48&&57>=e},N=function(e){for(var t,n,u=0,f=e.charAt,S=e.charCodeAt,A=function(t){return f.call(e,t)},N=function(t){return S.call(e,t)},R=e.length,U=function(){for(var e=N(u);32===e||9===e;)e=N(++u)},L=function(){var e,t,n=q();return U(),N(u)!==x?n:(u++,e=L(),e||O("Expected expression",u),U(),N(u)===j?(u++,t=L(),t||O("Expected expression",u),{type:c,test:n,consequent:e,alternate:t}):void O("Expected :",u))},z=function(){U();for(var t=e.substr(u,E),n=t.length;n>0;){if($.hasOwnProperty(t))return u+=n,t;t=t.substr(0,--n)}return!1},q=function(){var e,t,n,o,i,r,a,l;if(r=V(),t=z(),!t)return r;for(i={value:t,prec:I(t)},a=V(),a||O("Expected expression after "+t,u),o=[r,i,a];(t=z())&&(n=I(t),0!==n);){for(i={value:t,prec:n};o.length>2&&n<=o[o.length-2].prec;)a=o.pop(),t=o.pop().value,r=o.pop(),e=B(t,r,a),o.push(e);e=V(),e||O("Expected expression after "+t,u),o.push(i,e)}for(l=o.length-1,e=o[l];l>1;)e=B(o[l-1].value,o[l-2],e),l-=2;return e},V=function(){var t,n,o;if(U(),t=N(u),D(t)||t===b)return Q();if(t===g||t===y)return J();if(P(t)||t===v)return Y();if(t===w)return X();for(n=e.substr(u,T),o=n.length;o>0;){if(C.hasOwnProperty(n))return u+=o,{type:d,operator:n,argument:V(),prefix:!0};n=n.substr(0,--o)}return!1},Q=function(){for(var e,t,n="";D(N(u));)n+=A(u++);if(N(u)===b)for(n+=A(u++);D(N(u));)n+=A(u++);if(e=A(u),"e"===e||"E"===e){for(n+=A(u++),e=A(u),"+"!==e&&"-"!==e||(n+=A(u++));D(N(u));)n+=A(u++);D(N(u-1))||O("Expected exponent ("+n+A(u)+")",u)}return t=N(u),P(t)?O("Variable names cannot start with a number ("+n+A(u)+")",u):t===b&&O("Unexpected period",u),{type:a,value:parseFloat(n),raw:n}},J=function(){for(var e,t="",n=A(u++),o=!1;R>u;){if(e=A(u++),e===n){o=!0;break}if("\\"===e)switch(e=A(u++)){case"n":t+="\n";break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\x0B"}else t+=e}return o||O('Unclosed quote after "'+t+'"',u),{type:a,value:t,raw:n+t+n}},G=function(){var t,n=N(u),o=u;for(P(n)?u++:O("Unexpected "+A(u),u);R>u&&(n=N(u),F(n));)u++;return t=e.slice(o,u),H.hasOwnProperty(t)?{type:a,value:H[t],raw:t}:t===M?{type:l}:{type:i,name:t}},W=function(e){for(var t,n,i=[];R>u;){if(U(),t=N(u),t===e){u++;break}t===h?u++:(n=L(),n&&n.type!==o||O("Expected comma",u),i.push(n))}return i},Y=function(){var e,t;for(e=N(u),t=e===v?Z():G(),U(),e=N(u);e===b||e===w||e===v;)u++,e===b?(U(),t={type:r,computed:!1,object:t,property:G()}):e===w?(t={type:r,computed:!0,object:t,property:L()},U(),e=N(u),e!==k&&O("Unclosed [",u),u++):e===v&&(t={type:s,arguments:W(m),callee:t}),U(),e=N(u);return t},Z=function(){u++;var e=L();return U(),N(u)===m?(u++,e):void O("Unclosed (",u)},X=function(){return u++,{type:p,elements:W(k)}},K=[];R>u;)t=N(u),t===_||t===h?u++:(n=L())?K.push(n):R>u&&O('Unexpected "'+A(u)+'"',u);return 1===K.length?K[0]:{type:o,body:K}};if(N.version="<%= version %>",N.toString=function(){return"JavaScript Expression Parser (JSEP) v"+N.version},N.addUnaryOp=function(e){return C[e]=S,this},N.addBinaryOp=function(e,t){return E=Math.max(e.length,E),$[e]=t,this},N.removeUnaryOp=function(e){return delete C[e],e.length===T&&(T=A(C)),this},N.removeBinaryOp=function(e){return delete $[e],e.length===E&&(E=A($)),this},"undefined"==typeof n){var R=e.jsep;e.jsep=N,N.noConflict=function(){return e.jsep===N&&(e.jsep=R),N}}else"undefined"!=typeof t&&t.exports?n=t.exports=N:n.parse=N}(this)},{}],4:[function(t,n,o){(function(i){!function(r){if("function"==typeof e&&e.amd)e(["knockout","jquery","jquery-ui/sortable","jquery-ui/draggable"],r);else if("function"==typeof t&&"object"==typeof o&&"object"==typeof n){var a="undefined"!=typeof window?window.ko:"undefined"!=typeof i?i.ko:null,l="undefined"!=typeof window?window.jQuery:"undefined"!=typeof i?i.jQuery:null;"undefined"!=typeof window?window.jQuery.ui.sortable:"undefined"!=typeof i?i.jQuery.ui.sortable:null,"undefined"!=typeof window?window.jQuery.ui.draggable:"undefined"!=typeof i?i.jQuery.ui.draggable:null,r(a,l)}else r(window.ko,window.jQuery)}(function(e,t){var n="ko_sortItem",o="ko_sourceIndex",i="ko_sortList",r="ko_parentList",a="ko_dragItem",l=e.utils.unwrapObservable,s=e.utils.domData.get,d=e.utils.domData.set,u=t.ui&&t.ui.version,f=u&&u.indexOf("1.6.")&&u.indexOf("1.7.")&&(u.indexOf("1.8.")||"1.8.24"===u),c=function(t,o){e.utils.arrayForEach(t,function(e){1===e.nodeType&&(d(e,n,o),d(e,r,s(e.parentNode,i)))})},p=function(t,n){var o,i={},r=l(t())||{};return r.data?(i[n]=r.data,i.name=r.template):i[n]=t(),e.utils.arrayForEach(["afterAdd","afterRender","as","beforeRemove","includeDestroyed","templateEngine","templateOptions","nodes"],function(t){r.hasOwnProperty(t)?i[t]=r[t]:e.bindingHandlers.sortable.hasOwnProperty(t)&&(i[t]=e.bindingHandlers.sortable[t])}),"foreach"===n&&(i.afterRender?(o=i.afterRender,i.afterRender=function(e,t){c.call(t,e,t),o.call(t,e,t)}):i.afterRender=c),i},b=function(e,t){var n=l(t);if(n)for(var o=0;e>o;o++)n[o]&&l(n[o]._destroy)&&e++;return e},h=function(n,o){var i,r;o?(r=document.getElementById(o),r&&(i=new e.templateSources.domElement(r),i.text(t.trim(i.text())))):t(n).contents().each(function(){this&&1!==this.nodeType&&n.removeChild(this)})};e.bindingHandlers.sortable={init:function(u,c,g,y,v){var m,w,k=t(u),x=l(c())||{},_=p(c,"foreach"),j={};h(u,_.name),t.extend(!0,j,e.bindingHandlers.sortable),x.options&&j.options&&(e.utils.extend(j.options,x.options),delete x.options),e.utils.extend(j,x),j.connectClass&&(e.isObservable(j.allowDrop)||"function"==typeof j.allowDrop)?e.computed({read:function(){var t=l(j.allowDrop),n="function"==typeof t?t.call(this,_.foreach):t;e.utils.toggleDomNodeCssClass(u,j.connectClass,n)},disposeWhenNodeIsRemoved:u},this):e.utils.toggleDomNodeCssClass(u,j.connectClass,j.allowDrop),e.bindingHandlers.template.init(u,function(){return _},g,y,v),m=j.options.start,w=j.options.update;var O=setTimeout(function(){var c;k.sortable(e.utils.extend(j.options,{start:function(t,n){var i=n.item[0];d(i,o,e.utils.arrayIndexOf(n.item.parent().children(),i)),n.item.find("input:focus").change(),m&&m.apply(this,arguments)},receive:function(e,t){c=s(t.item[0],a),c&&(c.clone&&(c=c.clone()),j.dragged&&(c=j.dragged.call(this,c,e,t)||c))},update:function(a,l){var u,p,h,g,y,v=l.item[0],m=l.item.parent()[0],k=s(v,n)||c;if(c=null,k&&this===m||!f&&t.contains(this,m)){if(u=s(v,r),h=s(v,o),p=s(v.parentNode,i),g=e.utils.arrayIndexOf(l.item.parent().children(),v),_.includeDestroyed||(h=b(h,u),g=b(g,p)),(j.beforeMove||j.afterMove)&&(y={item:k,sourceParent:u,sourceParentNode:u&&l.sender||v.parentNode,sourceIndex:h,targetParent:p,targetIndex:g,cancelDrop:!1},j.beforeMove&&j.beforeMove.call(this,y,a,l)),u?t(u===p?this:l.sender||this).sortable("cancel"):t(v).remove(),y&&y.cancelDrop)return;g>=0&&(u&&(u.splice(h,1),e.processAllDeferredBindingUpdates&&e.processAllDeferredBindingUpdates()),p.splice(g,0,k)),d(v,n,null),e.processAllDeferredBindingUpdates&&e.processAllDeferredBindingUpdates(),j.afterMove&&j.afterMove.call(this,y,a,l)}w&&w.apply(this,arguments)},connectWith:j.connectClass?"."+j.connectClass:!1})),void 0!==j.isEnabled&&e.computed({read:function(){k.sortable(l(j.isEnabled)?"enable":"disable")},disposeWhenNodeIsRemoved:u})},0);return e.utils.domNodeDisposal.addDisposeCallback(u,function(){(k.data("ui-sortable")||k.data("sortable"))&&k.sortable("destroy"),e.utils.toggleDomNodeCssClass(u,j.connectClass,!1),clearTimeout(O)}),{controlsDescendantBindings:!0}},update:function(t,n,o,r,a){var l=p(n,"foreach");d(t,i,l.foreach),e.bindingHandlers.template.update(t,function(){return l},o,r,a)},connectClass:"ko_container",allowDrop:!0,afterMove:null,beforeMove:null,options:{}},e.bindingHandlers.draggable={init:function(n,o,i,r,s){var u=l(o())||{},f=u.options||{},c=e.utils.extend({},e.bindingHandlers.draggable.options),b=p(o,"data"),h=u.connectClass||e.bindingHandlers.draggable.connectClass,g=void 0!==u.isEnabled?u.isEnabled:e.bindingHandlers.draggable.isEnabled;return u="data"in u?u.data:u,d(n,a,u),e.utils.extend(c,f),c.connectToSortable=h?"."+h:!1,t(n).draggable(c),void 0!==g&&e.computed({read:function(){t(n).draggable(l(g)?"enable":"disable")},disposeWhenNodeIsRemoved:n}),e.utils.domNodeDisposal.addDisposeCallback(n,function(){t(n).draggable("destroy")}),e.bindingHandlers.template.init(n,function(){return b},i,r,s)},update:function(t,n,o,i,r){var a=p(n,"data");return e.bindingHandlers.template.update(t,function(){return a},o,i,r)},connectClass:e.bindingHandlers.sortable.connectClass,options:{helper:"clone"}}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(t,n,o){(function(i){!function(r){"function"==typeof t&&"object"==typeof o&&"object"==typeof n?n.exports=r("undefined"!=typeof window?window.ko:"undefined"!=typeof i?i.ko:null,t("./../knockoutjs-reactor/src/knockout.reactor.js")):"function"==typeof e&&e.amd?e(["knockout","knockoutjs-reactor","exports"],r):r(ko,ko.watch)}(function(e,t){var n=function(n,o){var i,r=e.observableArray(),a=e.observableArray(),l=0,s=1,d=2,u=l,f=0,c=1,p=2,b=3,h=f,g={levels:100,undoLabel:"undo (#COUNT#)",redoLabel:"redo (#COUNT#)"};o="object"==typeof o?e.utils.extend(g,o):g;var y=function(e){u==s?m(e,a):u==d?m(e,r):u==l&&(m(e,r),a.removeAll())},v=function(e,t){return"undefined"!=typeof e.mergedAction?e.mergedAction(t):null},m=function(e,t){if(t().length>0){var n=v(t()[t().length-1],e);if(null!==n)return void(t()[t().length-1]=n)}t().length>=o.levels&&t.shift(),i=t,t.push(e)},w=function(t,n,o){return{name:e.computed(function(){return e.utils.unwrapObservable(t).replace(/#COUNT#/,o().length)}),enabled:e.computed(function(){return 0!==o().length}),execute:function(){var e=o.pop();if(e){var t=u;u=n;var r=h;h=b,e(),k(i),h=r,u=t}return!0}}},k=function(e){if("undefined"==typeof e)throw"Unexpected operation: stack cleaner called with undefined stack";e().length>0&&"undefined"!=typeof e()[e().length-1].mergedAction&&delete e()[e().length-1].mergedAction},x=function(e,t){var n=function(e,t){e(),t()}.bind(void 0,e,t);return"undefined"!=typeof e.mergedAction&&(n.mergedAction=e.mergedAction),n},_=function(e,t,n){if("undefined"!=typeof t)e(t);else{if(!n)throw"Unexpected condition: no item and no child.oldValues!";if("deleted"==n.status)e.splice(n.index,0,n.value);else{if("added"!=n.status)throw"Unsupproted item.status: "+n.status;e.splice(n.index,1)}}},j=function(e,t,n,o,i){return e.bind(void 0,n,o,i)},O=j,S=function(e,t,n){var o="undefined"!=typeof t.oldValues?t.oldValues[0]:void 0,i=O(_,e,t,o,n);h!=c&&(h==b?"undefined"!=typeof i&&(i.mergedAction=function(e){return"undefined"!=typeof e.mergeMe&&e.mergeMe?x(e,this):null},i.mergeMe=!0):"undefined"!=typeof i&&(t.oldValues&&h==p&&(i.mergedAction=function(e,t,n){return"object"==typeof n.mergeableAction&&e==n.mergeableAction.child?this:null}.bind(i,t,n),i.mergeableAction={child:t,item:n}),n&&"deleted"==n.status&&(i.mergedAction=function(e,t,n){return"object"==typeof n.mergeableMove&&t.value==n.mergeableMove.item.value?x(n,this):null}.bind(i,t,n)),n&&"added"==n.status&&(i.mergeableMove={child:t,item:n})),"undefined"!=typeof i&&y(i))},C={depth:-1,oldValues:1,mutable:!0,tagFields:!0},$={},A="function"==typeof t?t:e.watch,T=A(n,C,S,$);return{push:y,undoCommand:w(o.undoLabel,s,r),redoCommand:w(o.redoLabel,d,a),reset:function(){r.removeAll(),a.removeAll()},setModeOnce:function(){h=p,k(r)},setModeMerge:function(){h=b,k(r)},setModeNormal:function(){h=f,k(r)},setModeIgnore:function(){h=c,k(r)},setUndoActionMaker:function(e){O=e},dispose:function(){T.dispose()}}};return n})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../knockoutjs-reactor/src/knockout.reactor.js":7}],6:[function(t,n,o){(function(i){!function(r){"function"==typeof t&&"object"==typeof o&&"object"==typeof n?r("undefined"!=typeof window?window.ko:"undefined"!=typeof i?i.ko:null,o):"function"==typeof e&&e.amd?e(["knockout","exports"],r):r(ko,ko.wrap={})}(function(e,t){function n(e){var t=typeof e;return"object"===t&&(e?e.constructor==Date?t="date":"[object Array]"==Object.prototype.toString.call(e)&&(t="array"):t="null"),t}function o(t){var n={};for(var o in t){var i=t[o];e.isComputed(i)||(n[o]=r(i))}return n}function i(e){var t=[];if(!e||0==e.length)return t;for(var n=0,o=e.length;o>n;++n)t.push(r(e[n]));return t}function r(t){var a=e.isObservable(t);if(a){var l=t();return r(l)}return"array"==n(t)?i(t):"object"==n(t)?o(t):t}function a(){c=[{obj:null,wrapped:null,lvl:""}]}function l(t,n,o){for(var i=0;i<c.length;++i)if(c[i].obj===t)return c[i].wrapped;var r={};for(var a in t){var l=t[a];c.push({obj:t,wrapped:r,lvl:d()+"/"+a}),r[a]=u(l,n,o),c.pop()}return n&&n[d()]&&(r=n[d()](r)),f()&&e.track(r),o?e.observable(r):r}function s(t,n,o){var i=e.observableArray();if(!t||0==t.length)return i;for(var r=0,a=t.length;a>r;++r)i.push(u(t[r],n,o));return i}function d(){return c[c.length-1].lvl}function u(t,o,i){if("array"==n(t))return s(t,o,i);if("object"==n(t))return l(t,o,i);if(f()||"function"==typeof t)return t;var r=e.observable();return r(t),r}function f(){return null!=e.track}t.fromJS=function(e,t,n){return a(),u(e,t,n)},t.updateFromJS=function(t,n,o,i){return a(),t(e.utils.unwrapObservable(u(n,o,i)))},t.fromJSON=function(n,o,i){var r=e.utils.parseJson(n);return arguments[0]=r,t.fromJS.apply(this,o,i)},t.toJS=function(e){return r(e)},t.toJSON=function(n){var o=t.toJS(n);return e.utils.stringifyJson(o)};var c})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(e,t,n){ko.subscribable.fn.watch=function(e,t,n,o){var i=typeof e;return"boolean"===i||"undefined"===i?ko.watch(this,{enabled:e!==!1}):"function"!==i||ko.isSubscribable(e)?ko.watch(e,t,n,o||this):ko.watch(this,t||{},e,o||this),this},ko.watch=function(e,t,n,o){function i(l,s,d,u,f,c){if(l&&0!==t.depth&&(-1===t.depth||d.length<(t.depth||1))){if(t.watchedOnly&&!l.watchable&&l!=e)return;if(t.enabled!==!1&&t.enabled!==!0||(l.watchable=t.enabled),l.watchable===!1)return;t.seal===!0&&(l.watchable=!1);var p=typeof l;if("object"===p||"function"===p){if(l._watcher===o)return;if(t.hide&&ko.utils.arrayIndexOf(t.hide,l)>-1)return;var b=[].concat(d,s&&s!==e?s:[]);if("function"!==p){if("[object Object]"===Object.prototype.toString.call(l))ko.utils.objectForEach(l,function(e,n){if(n=t.getter?t.getter.call(o,b,l,e):n){if(t.wrap){var r=Object.prototype.toString.call(n);"[object Function]"!==r&&"[object Object]"!==r&&(t.beforeWrap&&t.beforeWrap.call(o,b,l,n)===!1||(n=l[e]="[object Array]"===r?ko.observableArray(n):ko.observable(n)))}t.unloop&&(n._watcher=u?void 0:o);var a=i(n,f?null:l,b,u,null,e);t.tagFields&&void 0===n._fieldName&&(a||"parentsOnly"!==t.tagFields&&"function"==typeof n||"object"==typeof n)&&(n._fieldName=e)}});else if(t.hideArrays!==!0)for(var h=0;h<l.length;h++)i(l[h],f?null:l,b,u);return!0}if("function"==typeof l.notifySubscribers&&n){if(t.enabled===!0&&l.watchable===!1)return;if(u||!t.beforeWatch||t.beforeWatch.call(o,b,l,c)!==!1){var g="function"==typeof l.pop;if(u?r(l):a(l,g,b,f),g)return i(l(),f?null:l,b,u,!0),!0;if(t.hideWrappedValues!==!0)return i(l(),f?null:l,b,u,!0)}}}}}function r(e){var n=e[l];if(!n)throw"Subscriptions field (."+l+") not defined for observable child "+(e._fieldName||"");if(n.change)for(var i=n.change.length-1;i>=0;i--)n.change[i]._watcher===o&&n.change[i].dispose();if(n.beforeChange&&(t.mutable||t.oldValues>0))for(var i=n.beforeChange.length-1;i>=0;i--)n.beforeChange[i]._watcher===o&&n.beforeChange[i].dispose();if(n.arrayChange)for(var i=n.arrayChange.length-1;i>=0;i--)n.arrayChange[i]._watcher===o&&n.arrayChange[i].dispose()}function a(e,r,a,l){r?e.subscribe(function(t){ko.utils.arrayForEach(t,function(t){var r=n.call(o,a,e,t);void 0!==r&&o(r),t.moved||setTimeout(function(){i(t.value,l?null:e,a,"deleted"===t.status)},0)})},void 0,"arrayChange")._watcher=o:(e.subscribe(function(){if(e.watchable!==!1){var r=n.call(o,a,e);void 0!==r&&o(r),t.mutable&&"object"==typeof e()&&i(e(),l?null:e,a)}},null,"change")._watcher=o,(t.oldValues>0||t.mutable)&&(e.subscribe(function(n){if(t.oldValues>0){var o=e.oldValues?e.oldValues:e.oldValues=[];for(o.unshift(n);o.length>t.oldValues;)o.pop()}t.mutable&&"object"==typeof n&&i(n,l?null:e,a,!1,!0)},null,"beforeChange")._watcher=o))}"function"==typeof t&&(o=o||n,n=t,t={}),o=o||this;var l;switch(ko.DEBUG||ko.version){case!0:l="_subscriptions";break;case"3.0.0":l="F";break;case"3.1.0":l="H";break;case"3.2.0":l="M";break;case"3.3.0":l="G";break;case"3.4.0":l="K";break;default:throw"Unsupported Knockout version. Only v3.0.0 to v3.4.0 are supported when minified. Current version is "+ko.version}return"function"!=typeof e||ko.isSubscribable(e)?(i(e,null,[]),{dispose:function(){i(e,null,[],!0)}}):ko.computed(e,n,t)}},{}],8:[function(e,t,n){(function(e){function o(e){return i.bind(null,e)}function i(t){var n=[].slice.call(arguments,1);n.unshift("["+t+"]"),e.stderr.write(n.join(" ")+"\n")}n=t.exports=o}).call(this,e("_process"))},{_process:22}],9:[function(e,t,n){function o(e){function t(){return p(),e[w]}function n(e){return e?j[j.length-1-e]:_}function o(t){var n=w+1;return t===e.slice(n,n+t.length)}function l(t){var n=e.slice(w).indexOf(t);return n>0?n:!1}function s(e){return e===d(1)}function d(t){return e[w+(t||1)]}function u(){var e=j.pop();return _=j[j.length-1],e}function f(e){return _=e,j.push(_),j.length}function c(e){var t=_;return j[j.length-1]=_=e,t}function p(t){if(1==(t||1))"\n"==e[w]?(x++,m=1):m++,w++;else{var n=e.slice(w,w+t).split("\n");n.length>1&&(x+=n.length-1,m=1),m+=n[n.length-1].length,w+=t}}function b(){O.end={line:x,col:m},i&&a("addToken:",JSON.stringify(O,null,2)),S.push(O),v="",O={}}function h(e){O={type:e,start:{line:x,col:m}}}var g,y,v="",m=0,w=-1,k=0,x=1,_="before-selector",j=[_],O={},S=[],C=["media","keyframes",{name:"-webkit-keyframes",type:"keyframes",prefix:"-webkit-"},{name:"-moz-keyframes",type:"keyframes",prefix:"-moz-"},{name:"-ms-keyframes",type:"keyframes",prefix:"-ms-"},{name:"-o-keyframes",type:"keyframes",prefix:"-o-"},"font-face",{name:"import",state:"before-at-value"},{name:"charset",state:"before-at-value"},"supports","viewport",{name:"namespace",state:"before-at-value"},"document",{name:"-moz-document",type:"document",prefix:"-moz-"},"page"];for(r&&(g=Date.now());y=t();)switch(i&&a(y,n()),y){case" ":switch(n()){case"selector":case"value":case"value-paren":case"at-group":case"at-value":case"comment":case"double-string":case"single-string":v+=y}break;case"\n":case"	":case"\r":case"\f":switch(n()){case"value":case"value-paren":case"at-group":case"comment":case"single-string":case"double-string":case"selector":v+=y;break;case"at-value":"\n"===y&&(O.value=v.trim(),b(),u())}break;case":":switch(n()){case"name":
O.name=v.trim(),v="",c("before-value");break;case"before-selector":v+=y,h("selector"),f("selector");break;default:v+=y}break;case";":switch(n()){case"name":case"before-value":case"value":v.trim().length>0&&(O.value=v.trim(),b()),c("before-name");break;case"value-paren":v+=y;break;case"at-value":O.value=v.trim(),b(),u();break;case"before-name":break;default:v+=y}break;case"{":switch(n()){case"selector":if("\\"===d(-1)){v+=y;break}O.text=v.trim(),b(),c("before-name"),k+=1;break;case"at-group":switch(O.name=v.trim(),O.type){case"font-face":case"viewport":case"page":f("before-name");break;default:f("before-selector")}b(),k+=1;break;case"name":case"at-rule":O.name=v.trim(),b(),f("before-name"),k+=1;break;case"comment":case"double-string":case"single-string":v+=y}break;case"}":switch(n()){case"before-name":case"name":case"before-value":case"value":v&&(O.value=v.trim()),O.name&&O.value&&b(),h("end"),b(),u(),"at-group"===n()&&(h("at-group-end"),b(),u()),k>0&&(k-=1);break;case"at-group":case"before-selector":case"selector":if("\\"===d(-1)){v+=y;break}k>0&&"at-group"===n(1)&&(h("at-group-end"),b()),k>1&&u(),k>0&&(k-=1);break;case"double-string":case"single-string":case"comment":v+=y}break;case'"':case"'":switch(n()){case"double-string":'"'===y&&"\\"!==d(-1)&&u();break;case"single-string":"'"===y&&"\\"!==d(-1)&&u();break;case"before-at-value":c("at-value"),f('"'===y?"double-string":"single-string");break;case"before-value":c("value"),f('"'===y?"double-string":"single-string");break;case"comment":break;default:"\\"!==d(-1)&&f('"'===y?"double-string":"single-string")}v+=y;break;case"/":switch(n()){case"comment":case"double-string":case"single-string":v+=y;break;case"before-value":case"selector":case"name":case"value":if(s("*")){var $=l("*/");$&&p($+1)}else v+=y;break;default:s("*")?(h("comment"),f("comment"),p()):v+=y}break;case"*":switch(n()){case"comment":s("/")?(O.text=v,p(),b(),u()):v+=y;break;case"before-selector":v+=y,h("selector"),f("selector");break;default:v+=y}break;case"@":switch(n()){case"comment":case"double-string":case"single-string":v+=y;break;default:for(var A,T,E=!1,H=0,M=C.length;!E&&M>H;++H)T=C[H],A=T.name||T,o(A)&&(E=!0,h(A),f(T.state||"at-group"),p(A.length),T.prefix&&(O.prefix=T.prefix),T.type&&(O.type=T.type));E||(v+=y)}break;case"(":switch(n()){case"value":f("value-paren")}v+=y;break;case")":switch(n()){case"value-paren":u()}v+=y;break;default:switch(n()){case"before-selector":h("selector"),f("selector");break;case"before-name":h("property"),c("name");break;case"before-value":c("value");break;case"before-at-value":c("at-value")}v+=y}return r&&a("ran in",Date.now()-g+"ms"),S}var i=!1,r=!1,a=e("./debug")("lex");n=t.exports=o},{"./debug":8}],10:[function(e,t,n){function o(e,t){var n;t||(t={}),k=!!t.comments,_=!!t.position,x=0,j=Array.isArray(e)?e.slice():w(e);var o,i,a=[];for(v&&(n=Date.now());i=r();)o=p(i),o&&a.push(o);return v&&m("ran in",Date.now()-n+"ms"),{type:"stylesheet",stylesheet:{rules:a}}}function i(e,t){t||(t={});for(var n,o=["type","name","value"],i={},r=0;r<o.length;++r)n=o[r],e[n]&&(i[n]=t[n]||e[n]);for(o=Object.keys(t),r=0;r<o.length;++r)n=o[r],i[n]||(i[n]=t[n]);return _&&(i.position={start:e.start,end:e.end}),y&&m("astNode:",JSON.stringify(i,null,2)),i}function r(){var e=j.shift();return y&&m("next:",JSON.stringify(e,null,2)),e}function a(e){x+=1;var t={};switch(e.type){case"font-face":case"viewport":t.declarations=h();break;case"page":t.prefix=e.prefix,t.declarations=h();break;default:t.prefix=e.prefix,t.rules=g()}return i(e,t)}function l(e){return i(e)}function s(e){return i(e)}function d(e){return i(e,{text:e.text})}function u(e){return i(e)}function f(e){return i(e)}function c(e){function t(e){return e.trim()}return i(e,{type:"rule",selectors:e.text.split(",").map(t),declarations:h(e)})}function p(e){switch(e.type){case"property":return f(e);case"selector":return c(e);case"at-group-end":return void(x-=1);case"media":case"keyframes":return a(e);case"comment":if(k)return d(e);break;case"charset":return s(e);case"import":return l(e);case"namespace":return u(e);case"font-face":case"supports":case"viewport":case"document":case"page":return a(e)}y&&m("parseToken: unexpected token:",JSON.stringify(e))}function b(e){for(var t,n,o=[];(n=r())&&e&&e(n);)t=p(n),t&&o.push(t);return n&&"end"!==n.type&&j.unshift(n),o}function h(){return b(function(e){return"property"===e.type||"comment"===e.type})}function g(){return b(function(){return x})}var y=!1,v=!1,m=e("./debug")("parse"),w=e("./lexer");n=t.exports=o;var k,x,_,j},{"./debug":8,"./lexer":9}],11:[function(t,n,o){!function(){function t(e,n){if(e=e?e:"",n=n||{},e instanceof t)return e;if(!(this instanceof t))return new t(e,n);var i=o(e);this._originalInput=e,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=U(100*this._a)/100,this._format=n.format||i.format,this._gradientType=n.gradientType,this._r<1&&(this._r=U(this._r)),this._g<1&&(this._g=U(this._g)),this._b<1&&(this._b=U(this._b)),this._ok=i.ok,this._tc_id=N++}function o(e){var t={r:0,g:0,b:0},n=1,o=!1,r=!1;return"string"==typeof e&&(e=B(e)),"object"==typeof e&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(t=i(e.r,e.g,e.b),o=!0,r="%"===String(e.r).substr(-1)?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=H(e.s),e.v=H(e.v),t=s(e.h,e.s,e.v),o=!0,r="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=H(e.s),e.l=H(e.l),t=a(e.h,e.s,e.l),o=!0,r="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=O(n),{ok:o,format:e.format||r,r:L(255,z(t.r,0)),g:L(255,z(t.g,0)),b:L(255,z(t.b,0)),a:n}}function i(e,t,n){return{r:255*S(e,255),g:255*S(t,255),b:255*S(n,255)}}function r(e,t,n){e=S(e,255),t=S(t,255),n=S(n,255);var o,i,r=z(e,t,n),a=L(e,t,n),l=(r+a)/2;if(r==a)o=i=0;else{var s=r-a;switch(i=l>.5?s/(2-r-a):s/(r+a),r){case e:o=(t-n)/s+(n>t?6:0);break;case t:o=(n-e)/s+2;break;case n:o=(e-t)/s+4}o/=6}return{h:o,s:i,l:l}}function a(e,t,n){function o(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+(t-e)*(2/3-n)*6:e}var i,r,a;if(e=S(e,360),t=S(t,100),n=S(n,100),0===t)i=r=a=n;else{var l=.5>n?n*(1+t):n+t-n*t,s=2*n-l;i=o(s,l,e+1/3),r=o(s,l,e),a=o(s,l,e-1/3)}return{r:255*i,g:255*r,b:255*a}}function l(e,t,n){e=S(e,255),t=S(t,255),n=S(n,255);var o,i,r=z(e,t,n),a=L(e,t,n),l=r,s=r-a;if(i=0===r?0:s/r,r==a)o=0;else{switch(r){case e:o=(t-n)/s+(n>t?6:0);break;case t:o=(n-e)/s+2;break;case n:o=(e-t)/s+4}o/=6}return{h:o,s:i,v:l}}function s(e,t,n){e=6*S(e,360),t=S(t,100),n=S(n,100);var o=R.floor(e),i=e-o,r=n*(1-t),a=n*(1-i*t),l=n*(1-(1-i)*t),s=o%6,d=[n,a,r,r,l,n][s],u=[l,n,n,a,r,r][s],f=[r,r,l,n,n,a][s];return{r:255*d,g:255*u,b:255*f}}function d(e,t,n,o){var i=[E(U(e).toString(16)),E(U(t).toString(16)),E(U(n).toString(16))];return o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function u(e,t,n,o){var i=[E(M(o)),E(U(e).toString(16)),E(U(t).toString(16)),E(U(n).toString(16))];return i.join("")}function f(e,n){n=0===n?0:n||10;var o=t(e).toHsl();return o.s-=n/100,o.s=C(o.s),t(o)}function c(e,n){n=0===n?0:n||10;var o=t(e).toHsl();return o.s+=n/100,o.s=C(o.s),t(o)}function p(e){return t(e).desaturate(100)}function b(e,n){n=0===n?0:n||10;var o=t(e).toHsl();return o.l+=n/100,o.l=C(o.l),t(o)}function h(e,n){n=0===n?0:n||10;var o=t(e).toRgb();return o.r=z(0,L(255,o.r-U(255*-(n/100)))),o.g=z(0,L(255,o.g-U(255*-(n/100)))),o.b=z(0,L(255,o.b-U(255*-(n/100)))),t(o)}function g(e,n){n=0===n?0:n||10;var o=t(e).toHsl();return o.l-=n/100,o.l=C(o.l),t(o)}function y(e,n){var o=t(e).toHsl(),i=(U(o.h)+n)%360;return o.h=0>i?360+i:i,t(o)}function v(e){var n=t(e).toHsl();return n.h=(n.h+180)%360,t(n)}function m(e){var n=t(e).toHsl(),o=n.h;return[t(e),t({h:(o+120)%360,s:n.s,l:n.l}),t({h:(o+240)%360,s:n.s,l:n.l})]}function w(e){var n=t(e).toHsl(),o=n.h;return[t(e),t({h:(o+90)%360,s:n.s,l:n.l}),t({h:(o+180)%360,s:n.s,l:n.l}),t({h:(o+270)%360,s:n.s,l:n.l})]}function k(e){var n=t(e).toHsl(),o=n.h;return[t(e),t({h:(o+72)%360,s:n.s,l:n.l}),t({h:(o+216)%360,s:n.s,l:n.l})]}function x(e,n,o){n=n||6,o=o||30;var i=t(e).toHsl(),r=360/o,a=[t(e)];for(i.h=(i.h-(r*n>>1)+720)%360;--n;)i.h=(i.h+r)%360,a.push(t(i));return a}function _(e,n){n=n||6;for(var o=t(e).toHsv(),i=o.h,r=o.s,a=o.v,l=[],s=1/n;n--;)l.push(t({h:i,s:r,v:a})),a=(a+s)%1;return l}function j(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function O(e){return e=parseFloat(e),(isNaN(e)||0>e||e>1)&&(e=1),e}function S(e,t){A(e)&&(e="100%");var n=T(e);return e=L(t,z(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),R.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function C(e){return L(1,z(0,e))}function $(e){return parseInt(e,16)}function A(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function T(e){return"string"==typeof e&&-1!=e.indexOf("%")}function E(e){return 1==e.length?"0"+e:""+e}function H(e){return 1>=e&&(e=100*e+"%"),e}function M(e){return Math.round(255*parseFloat(e)).toString(16)}function I(e){return $(e)/255}function B(e){e=e.replace(P,"").replace(F,"").toLowerCase();var t=!1;if(V[e])e=V[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=J.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=J.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=J.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=J.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=J.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=J.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=J.hex8.exec(e))?{a:I(n[1]),r:$(n[2]),g:$(n[3]),b:$(n[4]),format:t?"name":"hex8"}:(n=J.hex6.exec(e))?{r:$(n[1]),g:$(n[2]),b:$(n[3]),format:t?"name":"hex"}:(n=J.hex3.exec(e))?{r:$(n[1]+""+n[1]),g:$(n[2]+""+n[2]),b:$(n[3]+""+n[3]),format:t?"name":"hex"}:!1}function D(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:t,size:n}}var P=/^[\s,#]+/,F=/\s+$/,N=0,R=Math,U=R.round,L=R.min,z=R.max,q=R.random;t.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,o,i,r,a=this.toRgb();return e=a.r/255,t=a.g/255,n=a.b/255,o=.03928>=e?e/12.92:Math.pow((e+.055)/1.055,2.4),i=.03928>=t?t/12.92:Math.pow((t+.055)/1.055,2.4),r=.03928>=n?n/12.92:Math.pow((n+.055)/1.055,2.4),.2126*o+.7152*i+.0722*r},setAlpha:function(e){return this._a=O(e),this._roundA=U(100*this._a)/100,this},toHsv:function(){var e=l(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=l(this._r,this._g,this._b),t=U(360*e.h),n=U(100*e.s),o=U(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+o+"%)":"hsva("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var e=r(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=r(this._r,this._g,this._b),t=U(360*e.h),n=U(100*e.s),o=U(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+o+"%)":"hsla("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHex:function(e){return d(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return u(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:U(this._r),g:U(this._g),b:U(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+U(this._r)+", "+U(this._g)+", "+U(this._b)+")":"rgba("+U(this._r)+", "+U(this._g)+", "+U(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:U(100*S(this._r,255))+"%",g:U(100*S(this._g,255))+"%",b:U(100*S(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+U(100*S(this._r,255))+"%, "+U(100*S(this._g,255))+"%, "+U(100*S(this._b,255))+"%)":"rgba("+U(100*S(this._r,255))+"%, "+U(100*S(this._g,255))+"%, "+U(100*S(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:Q[d(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var n="#"+u(this._r,this._g,this._b,this._a),o=n,i=this._gradientType?"GradientType = 1, ":"";if(e){var r=t(e);o=r.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+n+",endColorstr="+o+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,o=this._a<1&&this._a>=0,i=!t&&o&&("hex"===e||"hex6"===e||"hex3"===e||"name"===e);return i?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(b,arguments)},brighten:function(){return this._applyModification(h,arguments)},darken:function(){return this._applyModification(g,arguments)},desaturate:function(){return this._applyModification(f,arguments)},saturate:function(){return this._applyModification(c,arguments)},greyscale:function(){return this._applyModification(p,arguments)},spin:function(){return this._applyModification(y,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(x,arguments)},complement:function(){return this._applyCombination(v,arguments)},monochromatic:function(){return this._applyCombination(_,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(m,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},t.fromRatio=function(e,n){if("object"==typeof e){var o={};for(var i in e)e.hasOwnProperty(i)&&("a"===i?o[i]=e[i]:o[i]=H(e[i]));e=o}return t(e,n)},t.equals=function(e,n){return e&&n?t(e).toRgbString()==t(n).toRgbString():!1},t.random=function(){return t.fromRatio({r:q(),g:q(),b:q()})},t.mix=function(e,n,o){o=0===o?0:o||50;var i,r=t(e).toRgb(),a=t(n).toRgb(),l=o/100,s=2*l-1,d=a.a-r.a;i=s*d==-1?s:(s+d)/(1+s*d),i=(i+1)/2;var u=1-i,f={r:a.r*i+r.r*u,g:a.g*i+r.g*u,b:a.b*i+r.b*u,a:a.a*l+r.a*(1-l)};return t(f)},t.readability=function(e,n){var o=t(e),i=t(n);return(Math.max(o.getLuminance(),i.getLuminance())+.05)/(Math.min(o.getLuminance(),i.getLuminance())+.05)},t.isReadable=function(e,n,o){var i,r,a=t.readability(e,n);switch(r=!1,i=D(o),i.level+i.size){case"AAsmall":case"AAAlarge":r=a>=4.5;break;case"AAlarge":r=a>=3;break;case"AAAsmall":r=a>=7}return r},t.mostReadable=function(e,n,o){var i,r,a,l,s=null,d=0;o=o||{},r=o.includeFallbackColors,a=o.level,l=o.size;for(var u=0;u<n.length;u++)i=t.readability(e,n[u]),i>d&&(d=i,s=t(n[u]));return t.isReadable(e,s,{level:a,size:l})||!r?s:(o.includeFallbackColors=!1,t.mostReadable(e,["#fff","#000"],o))};var V=t.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Q=t.hexNames=j(V),J=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",o="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{rgb:new RegExp("rgb"+o),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+o),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+o),hsva:new RegExp("hsva"+i),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof n&&n.exports?n.exports=t:"function"==typeof e&&e.amd?e(function(){return t}):window.tinycolor=t}()},{}],12:[function(t,n,o){(function(t){!function(e){e(["jquery"],function(e){return function(){function t(e,t,n){return b({type:k.error,iconClass:h().iconClasses.error,message:e,optionsOverride:n,title:t})}function n(t,n){return t||(t=h()),y=e("#"+t.containerId),y.length?y:(n&&(y=f(t)),y)}function o(e,t,n){return b({type:k.info,iconClass:h().iconClasses.info,message:e,optionsOverride:n,title:t})}function i(e){v=e}function r(e,t,n){return b({type:k.success,iconClass:h().iconClasses.success,message:e,optionsOverride:n,title:t})}function a(e,t,n){return b({type:k.warning,iconClass:h().iconClasses.warning,message:e,optionsOverride:n,title:t})}function l(e,t){var o=h();y||n(o),u(e,o,t)||d(o)}function s(t){var o=h();return y||n(o),t&&0===e(":focus",t).length?void g(t):void(y.children().length&&y.remove())}function d(t){for(var n=y.children(),o=n.length-1;o>=0;o--)u(e(n[o]),t)}function u(t,n,o){var i=o&&o.force?o.force:!1;return t&&(i||0===e(":focus",t).length)?(t[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){g(t)}}),!0):!1}function f(t){return y=e("<div/>").attr("id",t.containerId).addClass(t.positionClass).attr("aria-live","polite").attr("role","alert"),y.appendTo(e(t.target)),y}function c(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',newestOnTop:!0,preventDuplicates:!1,progressBar:!1}}function p(e){v&&v(e)}function b(t){function o(e){return null==e&&(e=""),new String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(){l(),d(),u(),f(),c(),s()}function r(){C.hover(x,k),!j.onclick&&j.tapToDismiss&&C.click(v),j.closeButton&&E&&E.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&e.cancelBubble!==!0&&(e.cancelBubble=!0),v(!0)}),j.onclick&&C.click(function(e){j.onclick(e),v()})}function a(){C.hide(),C[j.showMethod]({duration:j.showDuration,easing:j.showEasing,complete:j.onShown}),j.timeOut>0&&(S=setTimeout(v,j.timeOut),H.maxHideTime=parseFloat(j.timeOut),H.hideEta=(new Date).getTime()+H.maxHideTime,j.progressBar&&(H.intervalId=setInterval(_,10)))}function l(){t.iconClass&&C.addClass(j.toastClass).addClass(O)}function s(){j.newestOnTop?y.prepend(C):y.append(C)}function d(){t.title&&($.append(j.escapeHtml?o(t.title):t.title).addClass(j.titleClass),C.append($))}function u(){t.message&&(A.append(j.escapeHtml?o(t.message):t.message).addClass(j.messageClass),C.append(A))}function f(){j.closeButton&&(E.addClass("toast-close-button").attr("role","button"),C.prepend(E))}function c(){j.progressBar&&(T.addClass("toast-progress"),C.prepend(T))}function b(e,t){if(e.preventDuplicates){if(t.message===m)return!0;m=t.message}return!1}function v(t){var n=t&&j.closeMethod!==!1?j.closeMethod:j.hideMethod,o=t&&j.closeDuration!==!1?j.closeDuration:j.hideDuration,i=t&&j.closeEasing!==!1?j.closeEasing:j.hideEasing;return!e(":focus",C).length||t?(clearTimeout(H.intervalId),C[n]({duration:o,easing:i,complete:function(){g(C),j.onHidden&&"hidden"!==M.state&&j.onHidden(),M.state="hidden",M.endTime=new Date,p(M)}})):void 0}function k(){(j.timeOut>0||j.extendedTimeOut>0)&&(S=setTimeout(v,j.extendedTimeOut),H.maxHideTime=parseFloat(j.extendedTimeOut),H.hideEta=(new Date).getTime()+H.maxHideTime)}function x(){clearTimeout(S),H.hideEta=0,C.stop(!0,!0)[j.showMethod]({duration:j.showDuration,easing:j.showEasing})}function _(){var e=(H.hideEta-(new Date).getTime())/H.maxHideTime*100;T.width(e+"%")}var j=h(),O=t.iconClass||j.iconClass;if("undefined"!=typeof t.optionsOverride&&(j=e.extend(j,t.optionsOverride),O=t.optionsOverride.iconClass||O),!b(j,t)){w++,y=n(j,!0);var S=null,C=e("<div/>"),$=e("<div/>"),A=e("<div/>"),T=e("<div/>"),E=e(j.closeHtml),H={intervalId:null,hideEta:null,maxHideTime:null},M={toastId:w,state:"visible",startTime:new Date,options:j,map:t};return i(),a(),r(),p(M),j.debug&&console,C}}function h(){return e.extend({},c(),x.options)}function g(e){y||(y=n()),e.is(":visible")||(e.remove(),e=null,0===y.children().length&&(y.remove(),m=void 0))}var y,v,m,w=0,k={error:"error",info:"info",success:"success",warning:"warning"},x={clear:l,remove:s,error:t,getContainer:n,info:o,options:{},subscribe:i,success:r,version:"2.1.2",warning:a};return x}()})}("function"==typeof e&&e.amd?e:function(e,o){"undefined"!=typeof n&&n.exports?n.exports=o("undefined"!=typeof window?window.jQuery:"undefined"!=typeof t?t.jQuery:null):window.toastr=o(window.jQuery)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(e,t,n){var o=e("../src/js/bindings/choose-template.js");document.addEventListener("DOMContentLoaded",function(e){o.addTemplate("array","<!-- ko foreach: $data --><!-- ko block: $data --><!-- /ko --><!-- /ko -->"),o.addTemplate("block-show","<!-- ko block: $data, scrollIntoView: $root.selectedBlock() === $data --><!-- /ko -->"),o.addTemplate("block-wysiwyg",'<div class="editable block" data-drop-content="Drop here" data-bind="attr: { \'data-drop-content\': $root.t(\'Drop here\') }, click: function(obj, evt) { $root.selectBlock(obj); return true }, clickBubble: false, css: { selected: $root.selectedBlock() === $data }, scrollIntoView: $root.selectedBlock() === $data">  <div class="mo-blockselectionhelper"></div>  <div class="tools" data-bind="tooltips: {}">    <!-- ko if: typeof $index != \'undefined\' -->    <div title="Drag this handle to move the block" data-bind="attr: { title: $root.t(\'Drag this handle to move the block\') }" class="tool handle"><i class="fa fa-fw fa-sort"></i></div>    <!-- ko if: $index() > 0 -->    <div title="Move this block upside" data-bind="attr: { title: $root.t(\'Move this block upside\') }" class="tool moveup"><i class="fa fa-fw fa-sort-asc" data-bind=\'click: $root.moveBlock.bind($element, $index, $parent, true)\'></i></div>    <!-- /ko -->    <!-- ko if: $index() < $parent.blocks().length -1 -->    <div title="Move this block downside" data-bind="attr: { title: $root.t(\'Move this block downside\') }" class="tool movedown"><i class="fa fa-fw fa-sort-desc" data-bind=\'click: $root.moveBlock.bind($element, $index, $parent, false)\'></i></div>    <!-- /ko -->    <div title="Delete block" class="tool delete" data-bind="attr: { title: $root.t(\'Delete block\') }, click: $root.removeBlock.bind($element, $rawData, $parent)"><i class="fa fa-fw fa-trash-o"></i></div>    <div title="Duplicate block" class="tool clone" data-bind="attr: { title: $root.t(\'Duplicate block\') }, click: $root.duplicateBlock.bind($element, $index, $parent)"><i class="fa fa-fw fa-files-o"></i></div>    <!-- /ko -->    <!-- ko if: typeof $data._nextVariant != \'undefined\' --><div title="Switch block variant" class="tool variant" data-bind="attr: { title: $root.t(\'Switch block variant\') }, click: $data._nextVariant"><i class="fa fa-fw fa-magic"></i></div><!-- /ko -->  </div>  <!-- ko block: $data --><!-- /ko --></div>'),o.addTemplate("blocks-show","<!-- ko template: { name: 'block-show', foreach: blocks } --><!-- /ko -->"),o.addTemplate("blocks-wysiwyg","<div class=\"sortable-blocks-edit\" data-drop-content=\"Drop here\" data-empty-content=\"Drop here blocks from the Blocks tab\" data-bind=\"attr: { 'data-drop-content': $root.t('Drop here'), 'data-empty-content': $root.t('Drop here blocks from the &quot;Blocks&quot; tab') }, css: { 'empty': ko.utils.unwrapObservable(blocks).length == 0 }, extsortable: { connectClass: 'sortable-blocks-edit', template: 'block-wysiwyg', data: blocks, dragging: $root.dragging, beforeMove: $root.startMultiple, afterMove: $root.stopMultiple, options: { handle: '.handle', placeholder: $root.placeholderHelper } }\"></div>"),o.addTemplate("customstyle",'<div class="customStyleHelp" data-bind="html: $root.t(\'Customized block.<ul><li>In this status changes to properties will be specific to the current block (instead of being global to all blocks in the same section)</li><li>A <span class=&quot;customStyled&quot;><span>&quot;small cube&quot; </span></span> icon beside the property will mark the customization. By clicking this icon the property value will be reverted to the value defined for the section.</li></ul>\')">Customized block.<ul><li>In this status changes to properties will be specific to the current block (instead of being global to all blocks in the same section)</li><li>A <span class="customStyled"><span>"small cube" </span></span> icon beside the property will mark the customization. By clicking this icon the property value will be reverted to the value defined for the section.</li></ul></div>'),o.addTemplate("empty",""),o.addTemplate("error",'[<div style="background-color: #fff0f0" data-bind="text: ko.toJS($data)"></div>]'),o.addTemplate("gallery-images",'<div data-bind="foreach: items.currentPageData">  <div class="draggable-item" data-bind="if: typeof thumbnailUrl != \'undefined\'">    <div class="draggable image" data-bind="click: $root.addImage, extdraggable: { data: $data, dropContainer: \'#main-wysiwyg-area\', dragging: $root.draggingImage, \'options\': { \'appendTo\': \'#page\' } }, style: { backgroundImage: \'url(\\\'\' + thumbnailUrl + \'\\\')\' }">      <img title="Trascina questa immagine sulla posizione in cui vuoi inserirla" style="display: block;" data-bind="tooltips: {}, attr: { src: thumbnailUrl }"/>    </div>  </div></div><!-- ko if: items.pageCount() > 1 --><div class="galleryPager" data-bind="buttonset: {}">  <a href="javascript:void(0)" data-bind="click: items.moveFirst, button: { disabled: items.currentPage() == 1, icons: { primary: \'fa fa-fast-backward\' }, text: false }">First</a>  <a href="javascript:void(0)" data-bind="click: items.movePrevious, button: { disabled: items.currentPage() == 1, icons: { primary: \'fa fa-backward\' }, text: false }">Previous</a>  <span data-bind="button: { disabled: true, text: true, label: \' \'+items.currentPage()+\' di \'+items.pageCount()+\' \' }"> X di Y </span>  <a href="javascript:void(0)" data-bind="click: items.moveNext, button: { disabled: items.currentPage() == items.pageCount(), icons: { primary: \'fa fa-forward\' }, text: false }">Next</a>  <a href="javascript:void(0)" data-bind="click: items.moveLast, button: { disabled: items.currentPage() == items.pageCount(), icons: { primary: \'fa fa-fast-forward\' }, text: false }">Last</a></div><!-- /ko -->'),o.addTemplate("img-wysiwyg",'<table tabfocus="0" cellspacing="0" cellpadding="0" data-drop-content="Drop here" data-bind="style: _stylebind, click: function(obj, evt) { $root.selectItem(_item, _data); return true; }, clickBubble: false, fudroppable: { activeClass: \'ui-state-highlight\', hoverClass: \'ui-state-draghover\' }, droppable: { options: { accept: \'.image\', activeClass: \'ui-state-highlight\', hoverClass: \'ui-state-draghover\' }, data: _src, dragged: $root.fileToImage }, css: { selecteditem: $root.isSelectedItem(_item) }, scrollIntoView: $root.isSelectedItem(_item), attr: { \'data-drop-content\': $root.t(\'Drop here\'), width: _width, height: _height, align: _align }"  class="img-wysiwyg selectable-img" style="display: table;"><tr><td class="uploadzone">  <div class="mo-imgselectionhelper"></div>  <div class="mo-uploadzone"></div>  <div class="img-size" data-bind="text: _size">size</div>  <div class="midtools" data-bind="tooltips: {}">    <!-- ko if: _src() != \'\' -->    <div title="Remove image" class="tool delete" data-bind="attr: { title: $root.t(\'Remove image\') }, click: _src.bind(_src, \'\'), clickBubble: false"><i class="fa fa-fw fa-trash-o"></i></div>    <!-- ko if: typeof $root.editImage !== \'undefined\' -->    <div title="Open the image editing tool" class="tool edit" data-bind="attr: { title: $root.t(\'Open the image editing tool\') }, click: $root.editImage.bind($element, _src), clickBubble: false"><i class="fa fa-fw fa-pencil"></i></div>    <!-- /ko -->    <!-- /ko -->    <!-- ko if: _src() == \'\' -->    <div title="Upload a new image" data-bind="attr: { title: $root.t(\'Upload a new image\') }" class="tool upload" style="position: relative; overflow: hidden;"><i class="fa fa-fw fa-upload"></i>      <input class="fileupload nofile" type="file" name="files[]" data-bind="fileupload: { data: _src, onerror: $root.notifier.error, onfile: $root.loadImage, canvasPreview: true }" style="z-index: 20; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-size: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block">    </div>    <!-- /ko -->  </div>  <!-- ko template: _template --><!-- /ko -->  <!-- ko if: _src() == \'\' -->    <!--    <img style="display: block;" class="imgplaceholder" width="200" src="" alt="Insert an image here" data-bind="wysiwygSrc: { src: _src.preloaded, placeholder: _placeholdersrc, width: _width, height: _height, method: _method }" />    -->    <span class="fileuploadtext" style="text-align: center; display: -ms-flexbox; display: flex; align-items: center; flex-align: center; justify-content: center; padding: 1em; position: absolute; top: 0; left: 0; right: 0; bottom: 0;"><span class="textMiddle" style=" text-shadow: 1px 1px 0 #FFFFFF, 0 0 10px #FFFFFF; font-weight: bold;" data-bind="text: $root.t(\'Drop an image here\')">Drop an image here</span></span>  <!-- /ko -->  <!-- ko if: _src() != \'\' -->  <!--    <img style="display: block;" width="200" src="" data-bind="preloader: _src, wysiwygSrc: { src: _src.preloaded, placeholder: _placeholdersrc, width: _width, height: _height, method: _method }" />    -->  <!-- /ko -->  <!-- pulsante per la cancellazione -->  <div title="Drop an image here or click the upload button" data-bind="attr: { title: $root.t(\'Drop an image here or click the upload button\') }, tooltips: {}" class="workzone" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; overflow: hidden;">    <!-- ko if: _src.preloaded && _src() != _src.preloaded() -->PRELOADING....<!-- /ko -->    <!-- ko if: _src() != \'\' -->      <input class="fileupload withfile" type="file" name="files[]" data-bind="fileupload: { data: _src, onerror: $root.notifier.error, onfile: $root.galleryRecent.unshift.bind($root.galleryRecent), canvasPreview: true }" style="z-index: -20; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-zie: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block">    <!-- /ko -->    <div class="progress" style="opacity: .5; width: 80%; margin-left: 10%; position: absolute; bottom: 30%; height: 20px; border: 2px solid black;">      <div class="progress-bar progress-bar-success" style="height: 20px; background-color: black; "></div>    </div>  </div></table>'),
o.addTemplate("main",'<div id="page" style="display: none;" data-bind="visible: true, css: { withToolbox: $root.showToolbox, withPreviewFrame: showPreviewFrame }">  <div id="main-edit-area" data-bind="click: function(obj, evt) { $root.selectBlock(null); return true; }, clickBubble: false">    <!-- ko withProperties: { templateMode: \'wysiwyg\', templateModeFallback: \'show\' } -->    <div id="main-wysiwyg-area" data-bind="wysiwygScrollfix: true, scrollable: true, fudroppable: { active: draggingImage }, css: { isdragging: dragging, isdraggingimg: draggingImage }, block: content"></div>    <!-- /ko -->  </div>  <div id="toolbar" class="mo" data-bind="tooltips: {}">    <!-- ko if: typeof $root.undo != \'undefined\' -->    <span data-bind="buttonset: { }" class="leftButtons">    <a title="Undo last operation" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Undo last operation\') }, click: $root.undo.execute, clickBubble: false, button: { disabled: !$root.undo.enabled(), icons: { primary: \'fa fa-reply\' }, label: $root.undo.name, text: true }">UNDO</a>    <a title="Redo last operation" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Redo last operation\') }, click: $root.redo.execute, clickBubble: false, button: { disabled: !$root.redo.enabled(), icons: { primary: \'fa fa-share\' }, label: $root.redo.name, text: true }">REDO</a>    </span>    <!-- ko if: $root.debug -->    <a href="javascript:void(0)" data-bind="click: $root.undoReset, clickBubble: false, button: { disabled: !$root.undo.enabled() && !$root.redo.enabled(), label: \'reset\', text: true }">RESET</a>    <!-- /ko -->    <!-- /ko -->    <span>    <input id="showGallery" type="checkbox" data-bind="checked: $root.showGallery, button: { refreshOn: $root.showGallery,     icons: { primary: \'fa fa-fw fa-picture-o\', secondary: null }, text: true, label: $root.t(\'Gallery\') }"><label title="Show image gallery" for="showGallery" data-bind="attr: { title: $root.t(\'Show image gallery\') }">show gallery</label></input>    </span>    <input id="previewFrameToggle" type="checkbox" data-bind="checked: $root.showPreviewFrame, button: { refreshOn: $root.showPreviewFrame, icons: { primary: \'fa fa-fw fa-tablet\', secondary: null }, text: false, label: $root.t(\'Preview\') }"><label title="Show live preview" for="previewFrameToggle" data-bind="attr: { title: $root.t(\'Show live preview\') }">PREVIEW</label></input>    <!-- ko if: $root.debug -->    <a href="javascript:void(0)" data-bind="click: $root.export, clickBubble: false, button: { label: \'export\', text: true }">EXPORT</a>    <input type="checkbox" data-bind="checked: $root.debug" /> debug    <a href="javascript:void(0)" data-bind="click: $root.loadDefaultBlocks, clickBubble: false, button: { icons: { primary: \'fa fa-fw fa-upload\' }, label: \'Default\', text: true }">LOAD BLOCKS</a>    [<a id="subscriptionsCount" href="javascript:viewModel.loopSubscriptionsCount()">subs</a>]    <!-- /ko -->    <span data-bind="visible: false">    <input type="checkbox" data-bind="checked: $root.showToolbox" /> toolbox    </span>    <div class="rightButtons">    <!-- ko if: typeof $root.save !== \'undefined\' -->    <a title="Save template" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Save template\') }, click: $root.save.execute, clickBubble: false, button: { disabled: !$root.save.enabled(), icons: { primary: \'fa fa-fw fa-cloud-upload\' }, label: $root.t($root.save.name), text: true }">SALVA</a>    <!-- /ko -->    <!-- ko if: typeof $root.test !== \'undefined\' -->    <a title="Show preview and send test" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Show preview and send test\') }, click: $root.test.execute, clickBubble: false, button: { disabled: !$root.test.enabled(), icons: { primary: \'fa fa-fw fa-paper-plane\' }, label: $root.t($root.test.name), text: true }">TEST</a>    <!-- /ko -->    <!-- ko if: typeof $root.download !== \'undefined\' -->    <form id="downloadForm" action="#" method="POST">    <input type="hidden" name="action" value="download" />    <input type="hidden" name="filename" value="email.html" />    <input type="hidden" name="html" id="downloadHtmlTextarea" />    <a title="Download template" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Download template\') }, click: $root.download.execute, clickBubble: false, button: { disabled: !$root.download.enabled(), icons: { primary: \'fa fa-fw fa-download\' }, label: $root.t($root.download.name), text: true }">DOWNLOAD</a>    </form>    <!-- /ko -->    </div>  </div>  <!-- ko if: $root.showToolbox -->  <div id="main-toolbox" class="mo" data-bind="scrollable: true, withProperties: { templateMode: \'edit\' }">    <div data-bind="template: { name: \'toolbox\' }"></div>  </div>  <!-- /ko -->    <div id="main-preview" class="mo" data-bind="scrollable: true, if: $root.showPreviewFrame">    <div id="preview-toolbar">      <div data-bind="visible: $root.showPreviewFrame, buttonset: { }" style="display: inline-block">        <input id="previewLarge" type="radio" name="previewMode" value="large" data-bind="checked: $root.previewMode, button: { text: false, label: \'large\', icons: { primary: \'fa fa-fw fa-desktop\' } }" />        <label for="previewLarge" title="Large screen" data-bind="attr: { title: $root.t(\'Large screen\') }">Large screen</label>        <input id="previewDesktop" type="radio" name="previewMode" value="desktop" data-bind="checked: $root.previewMode, button: { text: false, label: \'desktop\', icons: { primary: \'fa fa-fw fa-tablet\' } }" />        <label for="previewDesktop" title="Tablet" data-bind="attr: { title: $root.t(\'Tablet\') }">Tablet</label>        <input id="previewMobile" type="radio" name="previewMode" value="mobile" data-bind="checked: $root.previewMode, button: { text: false, label: \'mobile\', icons: { primary: \'fa fa-fw fa-mobile\' } }" />        <label for="previewMobile" title="Smartphone" data-bind="attr: { title: $root.t(\'Smartphone\') }">Smartphone</label>      </div>    </div>    <div id="frame-container" data-bind="css: { desktop: $root.previewMode() == \'desktop\', mobile: $root.previewMode() == \'mobile\', large: $root.previewMode() == \'large\' }">      <iframe data-bind="bindIframe: $data"></iframe>    </div>  </div>  <div class="mo" id="mo-body"></div>  <!-- TODO REMOVE ME  <div id="incompatible-browser" title="Unsupported browser" style="display: none" data-bind="attr: { title: $root.t(\'Usupported browser\') }, html: \'<p>Your browser is not supported.</p><p>Use a different browser or try updaring your browser.</p><p>Supported browsers: <ul><li>Internet Explorer &gt;= 10</li><li>Google Chrome &gt;= 30</li><li>Apple Safari &gt;= 5</li><li>Mozilla Firefix &gt;= 20</li></ul></p>\'">    Unsupported browser  </div>  -->  <div id="incompatible-template" title="Saved model is obsolete" style="display: none" data-bind="attr: { title: $root.t(\'Saved model is obsolete\') }, html: $root.t(\'<p>The saved model has been created with a previous, non completely compatible version, of the template</p><p>Some content or style in the model <b>COULD BE LOST</b> if you will <b>save</b></p><p>Contact us for more informations!</p>\')">    Incompatible template  </div>  <div id="fake-image-editor" title="Fake image editor" style="display: none" data-bind="attr: { title: $root.t(\'Fake image editor\') }, html: $root.t(\'<p>Fake image editor</p>\')">    <p>Fake image editor</p>  </div></div><!-- ko if: $root.logoPath --><div id="loading" class="loading" style="display: block; width: 300px; text-align: center; height: 32px; position: absolute; top:0; bottom: 0; left: 0; right: 0;  margin: auto;" data-bind="attr: { style: \'position: absolute; top: 5px; left: 6px; z-index: 150;\'}, css: { loading: false }">  <a href="/" data-bind="attr: { href: $root.logoUrl, alt: $root.logoAlt }"><img data-bind="attr: { src: $root.logoPath }" width="32" height="32" alt="mosaico" border="0" /></a>  <div style="opacity: 0" data-bind="visible: false">Oppps... !!</div></div><!-- /ko -->'),o.addTemplate("toolbox",'<div id="tooltabs" class="tabs_horizontal button_color" data-bind="tabs: { active: $root.selectedTool }">  <ul>    <li data-bind="tooltips: {}"><a title="Blocks ready to be added to the template" data-local="true" href="#toolblocks" data-bind="attr: { title: $root.t(\'Blocks ready to be added to the template\') }"><i class="fa fa-fw fa-cubes"></i> <span data-bind="html: $root.t(\'Blocks\')">Blocks</span></a></li>    <li data-bind="tooltips: {}"><a title="Edit content options" href="#toolcontents" data-local="true" data-bind="attr: { title: $root.t(\'Edit content options\') }"><i class="fa fa-fw fa-pencil"></i> <span data-bind="html: $root.t(\'Content\')">Content</span></a></li>    <li data-bind="tooltips: {}"><a title="Edit style options" href="#toolstyles" data-local="true" data-bind="attr: { title: $root.t(\'Edit style options\') }"><i class="fa fa-fw fa-paint-brush"></i> <span data-bind="html: $root.t(\'Style\')">Style</span></a></li>  </ul>  <div id="toolblocks" data-bind="scrollable: true">    <div class="block-list" data-bind="foreach: blockDefs" style="text-align: center">      <div class="draggable-item" data-bind="withProperties: { templateMode: \'show\' }">        <div class="block" data-bind="extdraggable: { connectClass: \'sortable-blocks-edit\', data: $data, dropContainer: \'#main-wysiwyg-area\', dragging: $root.dragging, \'options\': { handle: \'.handle\', distance: 10, \'appendTo\': \'#page\' } }, click: $root.addBlock" style="position: relative;">          <div title="Click or drag to add this block to the template" class="handle" data-bind="attr: { title: $root.t(\'Click or drag to add this block to the template\') }, tooltips: {}"></div>          <img data-bind="attr: { alt: $root.t(\'Block __name__\', { name: ko.utils.unwrapObservable(type) }), src: $root.templatePath(\'edres/\'+ko.utils.unwrapObservable(type)+\'.png\') }" alt="Block __name__" />        </div>        <a href="javascript:void(0)" class="addblockbutton" data-bind="click: $root.addBlock, button: { label: $root.t(\'Add\') }">Add</a>      </div>    </div>  </div>  <div id="toolcontents" data-bind="scrollable: true">    <!-- ko if: $root.selectedBlock() !== null -->    <div data-bind="block: $root.selectedBlock"></div>    <!-- /ko -->    <!-- ko if: $root.selectedBlock() == null -->    <div class="noSelectedBlock" data-bind="text: $root.t(\'By clicking on message parts you will select a block and content options, if any, will show here\')">By clicking on message parts you will select a block and content options, if any, will show here</div>    <!-- /ko -->    <!-- ko block: content --><!-- /ko -->  </div>    <div id="toolstyles" data-bind="scrollable: true, withProperties: { templateMode: \'styler\' }">    <!-- ko if: typeof $root.content().theme === \'undefined\' || typeof $root.content().theme().scheme === \'undefined\' || $root.content().theme().scheme() === \'custom\' -->      <!-- ko if: $root.selectedBlock() !== null -->      <div data-bind="block: $root.selectedBlock, css: { workLocal: $root.selectedBlock().customStyle, workGlobal: typeof $root.selectedBlock().customStyle === \'undefined\' || !$root.selectedBlock().customStyle() }"></div>      <!-- /ko -->      <!-- ko if: $root.selectedBlock() == null -->      <div class="noSelectedBlock" data-bind="text: $root.t(\'By clicking on message parts you will select a block and style options, if available, will show here\')">By clicking on message parts you will select a block and style options, if available, will show here</div>      <!-- /ko -->      <div class="workGlobalContent">      <!-- ko block: content --><!-- /ko -->      </div>    <!-- /ko -->  </div></div>        <div id="toolimages" class="slidebar" data-bind="scrollable: true, css: { hidden: $root.showGallery() === false }">  <div class="close" data-bind="click: $root.showGallery.bind($element, false);">X</div>  <span class="pane-title" data-bind="text: $root.t(\'Gallery:\')">Gallery:</span>  <div data-drop-content="Drop here" class="img-dropzone pane uploadzone" data-bind="attr: { \'data-drop-content\': $root.t(\'Drop here\') }, fudroppable: { activeClass: \'ui-state-highlight\', hoverClass: \'ui-state-draghover\' }">  <div class="mo-uploadzone" style="position: relative; padding: 2em; border: 2px dotted #808080">     <input class="fileupload" type="file" multiple name="files[]" data-bind="fileupload: { onerror: $root.notifier.error, onfile: $root.loadImage }" style="z-index: 10; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-zie: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block">     <span data-bind="text: $root.t(\'Click or drag files here\')">Click or drag files here</span>     <div class="workzone" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; overflow: hidden;">       <div class="progress" style="opacity: .5; width: 80%; margin-left: 10%; position: absolute; bottom: 30%; height: 20px; border: 2px solid black;">         <div class="progress-bar progress-bar-success" style="height: 20px; background-color: black; "></div>       </div>     </div>  </div>  </div>  <!-- ko if: $root.showGallery() -->  <div id="toolimagestab" class="tabs_horizontal" data-bind="tabs: { active: $root.selectedImageTab }">    <ul>      <li data-bind="tooltips: {}"><a title="Session images" data-local="true" href="#toolimagesrecent" data-bind="attr: { title: $root.t(\'Session images\') }, text: $root.t(\'Recents\')">Recents</a></li>      <li data-bind="tooltips: {}"><a title="Remote gallery" data-local="true" href="#toolimagesgallery" data-bind="attr: { title: $root.t(\'Remote gallery\') }, text: $root.t(\'Gallery\')">Gallery</a></li>    </ul>    <div id="toolimagesrecent">      <!-- ko if: galleryRecent().length == 0 --><div class="galleryEmpty" data-bind="text: $root.t(\'No images uploaded, yet\')">No images uploaded, yet</div><!-- /ko -->      <!-- ko template: {name: \'gallery-images\', data: { items: galleryRecent } } --># recent gallery #<!-- /ko -->    </div>    <div id="toolimagesgallery" style="text-align: center">    <!-- ko if: $root.galleryLoaded() === false --><a class="loadbutton" title="Show images from the gallery" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Show images from the gallery\') }, click: $root.loadGallery, button: { disabled: $root.galleryLoaded, icons: { primary: \'fa fa-fw fa-picture-o\' }, label: $root.galleryLoaded() == \'loading\' ? $root.t(\'Loading...\') : $root.t(\'Load gallery\'), text: true }"># load gally #</a><!-- /ko -->    <!-- ko if: $root.galleryLoaded() === \'loading\' --><div class="galleryEmpty" data-bind="text: $root.t(\'Loading gallery...\')">Loading gallery...</div><!-- /ko -->    <!-- ko if: $root.galleryLoaded() === 0 --><div class="galleryEmpty" data-bind="text: $root.t(\'The gallery is empty\')">The gallery is empty</div><!-- /ko -->    <!-- ko template: {name: \'gallery-images\', data: { items: galleryRemote } } --># remote gallery #<!-- /ko -->    </div>  </div>  <!-- /ko --></div><div id="tooldebug" class="slidebar" data-bind="css: { hidden: $root.debug() === false }">  <div class="close" data-bind="click: $root.debug.bind($element, false);">X</div>    <!-- ko if: $root.debug -->  Content:  <pre data-bind=\'text: ko.toJSON(content, null, 2)\' style="overflow: auto; height: 20%"></pre>  BlockDefs:  <pre data-bind=\'text: ko.toJSON(blockDefs, null, 2)\' style="overflow: auto; height: 20%"></pre>  <!-- /ko -->  <a href="javascript:void(0)" data-bind="click: $root.exportHTMLtoTextarea.bind($element, \'#outputhtml\'); clickBubble: false, button: { text: true, label:\'Generate\' }">Output</a>  <a href="javascript:void(0)" data-bind="click: $root.exportJSONtoTextarea.bind($element, \'#outputhtml\'); clickBubble: false, button: { text: true, label:\'Export\' }">Export</a>  <a href="javascript:void(0)" data-bind="click: $root.importJSONfromTextarea.bind($element, \'#outputhtml\'); clickBubble: false, button: { text: true, label:\'Import\' }">Import</a>  <textarea id="outputhtml" rows="10" style="width: 100%;"></textarea></div><div id="tooltheme" class="ui-widget slidebar" data-bind="css: { hidden: $root.showTheme() === false }">  <div class="close" data-bind="click: $root.showTheme.bind($element, false);">X</div>    <!-- ko withProperties: { templateMode: \'styler\' } -->    <!-- ko if: $root.showTheme -->      <!-- ko block: $root.content().theme --><!-- /ko -->    <!-- /ko -->  <!-- /ko --></div>')})},{"../src/js/bindings/choose-template.js":39}],14:[function(e,t,n){function o(e,t){return p.isUndefined(t)?""+t:p.isNumber(t)&&!isFinite(t)?t.toString():p.isFunction(t)||p.isRegExp(t)?t.toString():t}function i(e,t){return p.isString(e)?e.length<t?e:e.slice(0,t):e}function r(e){return i(JSON.stringify(e.actual,o),128)+" "+e.operator+" "+i(JSON.stringify(e.expected,o),128)}function a(e,t,n,o,i){throw new g.AssertionError({message:n,actual:e,expected:t,operator:o,stackStartFunction:i})}function l(e,t){e||a(e,!0,t,"==",g.ok)}function s(e,t){if(e===t)return!0;if(p.isBuffer(e)&&p.isBuffer(t)){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return p.isDate(e)&&p.isDate(t)?e.getTime()===t.getTime():p.isRegExp(e)&&p.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:p.isObject(e)||p.isObject(t)?u(e,t):e==t}function d(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function u(e,t){if(p.isNullOrUndefined(e)||p.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(p.isPrimitive(e)||p.isPrimitive(t))return e===t;var n=d(e),o=d(t);if(n&&!o||!n&&o)return!1;if(n)return e=b.call(e),t=b.call(t),s(e,t);var i,r,a=y(e),l=y(t);if(a.length!=l.length)return!1;for(a.sort(),l.sort(),r=a.length-1;r>=0;r--)if(a[r]!=l[r])return!1;for(r=a.length-1;r>=0;r--)if(i=a[r],!s(e[i],t[i]))return!1;return!0}function f(e,t){return e&&t?"[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0:!1}function c(e,t,n,o){var i;p.isString(n)&&(o=n,n=null);try{t()}catch(r){i=r}if(o=(n&&n.name?" ("+n.name+").":".")+(o?" "+o:"."),e&&!i&&a(i,n,"Missing expected exception"+o),!e&&f(i,n)&&a(i,n,"Got unwanted exception"+o),e&&i&&n&&!f(i,n)||!e&&i)throw i}var p=e("util/"),b=Array.prototype.slice,h=Object.prototype.hasOwnProperty,g=t.exports=l;g.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=r(this),this.generatedMessage=!0);var t=e.stackStartFunction||a;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var o=n.stack,i=t.name,l=o.indexOf("\n"+i);if(l>=0){var s=o.indexOf("\n",l+1);o=o.substring(s+1)}this.stack=o}}},p.inherits(g.AssertionError,Error),g.fail=a,g.ok=l,g.equal=function(e,t,n){e!=t&&a(e,t,n,"==",g.equal)},g.notEqual=function(e,t,n){e==t&&a(e,t,n,"!=",g.notEqual)},g.deepEqual=function(e,t,n){s(e,t)||a(e,t,n,"deepEqual",g.deepEqual)},g.notDeepEqual=function(e,t,n){s(e,t)&&a(e,t,n,"notDeepEqual",g.notDeepEqual)},g.strictEqual=function(e,t,n){e!==t&&a(e,t,n,"===",g.strictEqual)},g.notStrictEqual=function(e,t,n){e===t&&a(e,t,n,"!==",g.notStrictEqual)},g["throws"]=function(e,t,n){c.apply(this,[!0].concat(b.call(arguments)))},g.doesNotThrow=function(e,t){c.apply(this,[!1].concat(b.call(arguments)))},g.ifError=function(e){if(e)throw e};var y=Object.keys||function(e){var t=[];for(var n in e)h.call(e,n)&&t.push(n);return t}},{"util/":30}],15:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],16:[function(e,t,n){function o(e,t){return!!e.length&&a(e,t,0)>-1}function i(e,t,n){for(var o=-1,i=e.length;++o<i;)if(n(t,e[o]))return!0;return!1}function r(e,t){for(var n=-1,o=e.length,i=Array(o);++n<o;)i[n]=t(e[n],n,e);return i}function a(e,t,n){if(t!==t)return d(e,n);for(var o=n-1,i=e.length;++o<i;)if(e[o]===t)return o;return-1}function l(e){return function(t){return e(t)}}function s(e,t){return e.has(t)}function d(e,t,n){for(var o=e.length,i=t+(n?0:-1);n?i--:++i<o;){var r=e[i];if(r!==r)return i}return-1}function u(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}function f(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function c(){this.__data__=oe?oe(null):{}}function p(e){return this.has(e)&&delete this.__data__[e]}function b(e){var t=this.__data__;if(oe){var n=t[e];return n===q?void 0:n}return X.call(t,e)?t[e]:void 0}function h(e){var t=this.__data__;return oe?void 0!==t[e]:X.call(t,e)}function g(e,t){var n=this.__data__;return n[e]=oe&&void 0===t?q:t,this}function y(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function v(){this.__data__=[]}function m(e){var t=this.__data__,n=H(t,e);if(0>n)return!1;var o=t.length-1;return n==o?t.pop():te.call(t,n,1),!0}function w(e){var t=this.__data__,n=H(t,e);return 0>n?void 0:t[n][1]}function k(e){return H(this.__data__,e)>-1}function x(e,t){var n=this.__data__,o=H(n,e);return 0>o?n.push([e,t]):n[o][1]=t,this}function _(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function j(){this.__data__={hash:new f,map:new(ne||y),string:new f}}function O(e){return I(this,e)["delete"](e)}function S(e){return I(this,e).get(e)}function C(e){return I(this,e).has(e)}function $(e,t){return I(this,e).set(e,t),this}function A(e){var t=-1,n=e?e.length:0;for(this.__data__=new _;++t<n;)this.add(e[t])}function T(e){return this.__data__.set(e,q),this}function E(e){return this.__data__.has(e)}function H(e,t){for(var n=e.length;n--;)if(F(e[n][0],t))return n;return-1}function M(e,t,n,a){var d=-1,u=o,f=!0,c=e.length,p=[],b=t.length;if(!c)return p;n&&(t=r(t,l(n))),a?(u=i,f=!1):t.length>=z&&(u=s,f=!1,t=new A(t));e:for(;++d<c;){var h=e[d],g=n?n(h):h;if(h=a||0!==h?h:0,f&&g===g){for(var y=b;y--;)if(t[y]===g)continue e;p.push(h)}else u(t,g,a)||p.push(h)}return p}function I(e,t){var n=e.__data__;return D(t)?n["string"==typeof t?"string":"hash"]:n.map}function B(e,t){var n=e[t];return U(n)?n:void 0}function D(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function P(e){if(null!=e){try{return Z.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function F(e,t){return e===t||e!==e&&t!==t}function N(e){var t=R(e)?K.call(e):"";return t==V||t==Q}function R(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function U(e){if(!R(e))return!1;var t=N(e)||u(e)?ee:G;return t.test(P(e))}var L=e("lodash._root"),z=200,q="__lodash_hash_undefined__",V="[object Function]",Q="[object GeneratorFunction]",J=/[\\^$.*+?()[\]{}|]/g,G=/^\[object .+?Constructor\]$/,W=Array.prototype,Y=Object.prototype,Z=Function.prototype.toString,X=Y.hasOwnProperty,K=Y.toString,ee=RegExp("^"+Z.call(X).replace(J,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=W.splice,ne=B(L,"Map"),oe=B(Object,"create");f.prototype.clear=c,f.prototype["delete"]=p,f.prototype.get=b,f.prototype.has=h,f.prototype.set=g,y.prototype.clear=v,y.prototype["delete"]=m,y.prototype.get=w,y.prototype.has=k,y.prototype.set=x,_.prototype.clear=j,_.prototype["delete"]=O,_.prototype.get=S,_.prototype.has=C,_.prototype.set=$,A.prototype.add=A.prototype.push=T,A.prototype.has=E,t.exports=M},{"lodash._root":18}],17:[function(e,t,n){function o(e,t){for(var n=-1,o=t.length,i=e.length;++n<o;)e[i+n]=t[n];return e}function i(e,t,n,r,l){var s=-1,d=e.length;for(n||(n=a),l||(l=[]);++s<d;){var u=e[s];t>0&&n(u)?t>1?i(u,t-1,n,r,l):o(l,u):r||(l[l.length]=u)}return l}function r(e){return function(t){return null==t?void 0:t[e]}}function a(e){return _(e)||l(e)}function l(e){return d(e)&&m.call(e,"callee")&&(!k.call(e,"callee")||w.call(e)==h)}function s(e){return null!=e&&f(x(e))&&!u(e)}function d(e){return p(e)&&s(e)}function u(e){var t=c(e)?w.call(e):"";return t==g||t==y}function f(e){return"number"==typeof e&&e>-1&&e%1==0&&b>=e}function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function p(e){return!!e&&"object"==typeof e}var b=9007199254740991,h="[object Arguments]",g="[object Function]",y="[object GeneratorFunction]",v=Object.prototype,m=v.hasOwnProperty,w=v.toString,k=v.propertyIsEnumerable,x=r("length"),_=Array.isArray;t.exports=i},{}],18:[function(e,t,n){(function(e){function o(e){return e&&e.Object===Object?e:null}var i={"function":!0,object:!0},r=i[typeof n]&&n&&!n.nodeType?n:void 0,a=i[typeof t]&&t&&!t.nodeType?t:void 0,l=o(r&&a&&"object"==typeof e&&e),s=o(i[typeof self]&&self),d=o(i[typeof window]&&window),u=o(i[typeof this]&&this),f=l||d!==(u&&u.window)&&d||s||u||Function("return this")();t.exports=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(e,t,n){(function(e){function o(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}function i(e){return e&&e.Object===Object?e:null}function r(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function a(e){e=null==e?e:Object(e);var t=[];for(var n in e)t.push(n);return t}function l(e){return function(t){return null==t?void 0:t[e]}}function s(e){var t=e?e.length:void 0;return h(t)&&(U(e)||v(e)||f(e))?o(t,String):null}function d(e,t){return t=null==t?w:t,!!t&&("number"==typeof e||O.test(e))&&e>-1&&e%1==0&&t>e}function u(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||I;return e===n}function f(e){return p(e)&&B.call(e,"callee")&&(!N.call(e,"callee")||D.call(e)==k)}function c(e){return null!=e&&h(R(e))&&!b(e)}function p(e){return y(e)&&c(e)}function b(e){var t=g(e)?D.call(e):"";return t==x||t==_}function h(e){return"number"==typeof e&&e>-1&&e%1==0&&w>=e}function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){return!!e&&"object"==typeof e}function v(e){return"string"==typeof e||!U(e)&&y(e)&&D.call(e)==j}function m(e){for(var t=-1,n=u(e),o=a(e),i=o.length,r=s(e),l=!!r,f=r||[],c=f.length;++t<i;){var p=o[t];l&&("length"==p||d(p,c))||"constructor"==p&&(n||!B.call(e,p))||f.push(p)}return f}var w=9007199254740991,k="[object Arguments]",x="[object Function]",_="[object GeneratorFunction]",j="[object String]",O=/^(?:0|[1-9]\d*)$/,S={"function":!0,object:!0},C=S[typeof n]&&n&&!n.nodeType?n:void 0,$=S[typeof t]&&t&&!t.nodeType?t:void 0,A=i(C&&$&&"object"==typeof e&&e),T=i(S[typeof self]&&self),E=i(S[typeof window]&&window),H=i(S[typeof this]&&this),M=A||E!==(H&&H.window)&&E||T||H||Function("return this")(),I=Object.prototype,B=I.hasOwnProperty,D=I.toString,P=M.Reflect,F=P?P.enumerate:void 0,N=I.propertyIsEnumerable;F&&!N.call({valueOf:1},"valueOf")&&(a=function(e){return r(F(e))});var R=l("length"),U=Array.isArray;t.exports=m}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(e,t,n){function o(e,t){for(var n=-1,o=e.length,i=Array(o);++n<o;)i[n]=t(e[n],n,e);return i}function i(e,t){for(var n=-1,o=t.length,i=e.length;++n<o;)e[i+n]=t[n];return e}function r(e,t,n,o){var i=-1,r=e.length;for(o&&r&&(n=e[++i]);++i<r;)n=t(n,e[i],i,e);return n}function a(e,t,n){var o=t(e);return O(e)?o:i(o,n(e))}function l(e,t){return e=Object(e),r(t,function(t,n){return n in e&&(t[n]=e[n]),t},{})}function s(e){return a(e,g,j)}function d(e){return _(Object(e))}function u(e){return x(Object(e))}function f(e){if("string"==typeof e||p(e))return e;var t=e+"";return"0"==t&&1/e==-v?"-0":t}function c(e){return!!e&&"object"==typeof e}function p(e){return"symbol"==typeof e||c(e)&&k.call(e)==m}var b=e("lodash._basedifference"),h=e("lodash._baseflatten"),g=e("lodash.keysin"),y=e("lodash.rest"),v=1/0,m="[object Symbol]",w=Object.prototype,k=w.toString,x=Object.getOwnPropertySymbols,_=Object.getPrototypeOf;x||(u=function(){return[]});var j=x?function(e){for(var t=[];e;)i(t,u(e)),e=d(e);return t}:u,O=Array.isArray,S=y(function(e,t){return null==e?{}:(t=o(h(t,1),f),l(e,b(s(e),t)))});t.exports=S},{"lodash._basedifference":16,"lodash._baseflatten":17,"lodash.keysin":19,"lodash.rest":21}],21:[function(e,t,n){function o(e,t,n){var o=n.length;switch(o){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function i(e,t){if("function"!=typeof e)throw new TypeError(c);return t=S(void 0===t?e.length-1:u(t),0),function(){for(var n=arguments,i=-1,r=S(n.length-t,0),a=Array(r);++i<r;)a[i]=n[t+i];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,n[0],a);case 2:return e.call(this,n[0],n[1],a)}var l=Array(t+1);for(i=-1;++i<t;)l[i]=n[i];return l[t]=a,o(e,this,l)}}function r(e){var t=a(e)?O.call(e):"";return t==g||t==y}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function l(e){return!!e&&"object"==typeof e}function s(e){return"symbol"==typeof e||l(e)&&O.call(e)==v}function d(e){if(!e)return 0===e?e:0;if(e=f(e),e===p||e===-p){var t=0>e?-1:1;return t*b}return e===e?e:0}function u(e){var t=d(e),n=t%1;return t===t?n?t-n:t:0}function f(e){if("number"==typeof e)return e;if(s(e))return h;if(a(e)){var t=r(e.valueOf)?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(m,"");var n=k.test(e);return n||x.test(e)?_(e.slice(2),n?2:8):w.test(e)?h:+e}var c="Expected a function",p=1/0,b=1.7976931348623157e308,h=NaN,g="[object Function]",y="[object GeneratorFunction]",v="[object Symbol]",m=/^\s+|\s+$/g,w=/^[-+]0x[0-9a-f]+$/i,k=/^0b[01]+$/i,x=/^0o[0-7]+$/i,_=parseInt,j=Object.prototype,O=j.toString,S=Math.max;t.exports=i},{}],22:[function(e,t,n){function o(){c&&l&&(c=!1,l.length?f=l.concat(f):p=-1,f.length&&i())}function i(){if(!c){var e=d(o);c=!0;for(var t=f.length;t;){for(l=f,f=[];++p<t;)l&&l[p].run();p=-1,t=f.length}l=null,c=!1,u(e)}}function r(e,t){this.fun=e,this.array=t}function a(){}var l,s=t.exports={},d=setTimeout,u=clearTimeout,f=[],c=!1,p=-1;s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new r(e,t)),1!==f.length||c||d(i,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=a,s.addListener=a,s.once=a,s.off=a,s.removeListener=a,s.removeAllListeners=a,s.emit=a,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],23:[function(t,n,o){(function(t){!function(i){function r(e){throw new RangeError(I[e])}function a(e,t){for(var n=e.length,o=[];n--;)o[n]=t(e[n]);return o}function l(e,t){var n=e.split("@"),o="";n.length>1&&(o=n[0]+"@",e=n[1]),e=e.replace(M,".");var i=e.split("."),r=a(i,t).join(".");return o+r}function s(e){for(var t,n,o=[],i=0,r=e.length;r>i;)t=e.charCodeAt(i++),t>=55296&&56319>=t&&r>i?(n=e.charCodeAt(i++),56320==(64512&n)?o.push(((1023&t)<<10)+(1023&n)+65536):(o.push(t),i--)):o.push(t);return o}function d(e){return a(e,function(e){var t="";return e>65535&&(e-=65536,t+=P(e>>>10&1023|55296),e=56320|1023&e),t+=P(e)}).join("")}function u(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:_}function f(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function c(e,t,n){var o=0;for(e=n?D(e/C):e>>1,e+=D(e/t);e>B*O>>1;o+=_)e=D(e/B);return D(o+(B+1)*e/(e+S))}function p(e){var t,n,o,i,a,l,s,f,p,b,h=[],g=e.length,y=0,v=A,m=$;for(n=e.lastIndexOf(T),0>n&&(n=0),o=0;n>o;++o)e.charCodeAt(o)>=128&&r("not-basic"),h.push(e.charCodeAt(o));for(i=n>0?n+1:0;g>i;){
for(a=y,l=1,s=_;i>=g&&r("invalid-input"),f=u(e.charCodeAt(i++)),(f>=_||f>D((x-y)/l))&&r("overflow"),y+=f*l,p=m>=s?j:s>=m+O?O:s-m,!(p>f);s+=_)b=_-p,l>D(x/b)&&r("overflow"),l*=b;t=h.length+1,m=c(y-a,t,0==a),D(y/t)>x-v&&r("overflow"),v+=D(y/t),y%=t,h.splice(y++,0,v)}return d(h)}function b(e){var t,n,o,i,a,l,d,u,p,b,h,g,y,v,m,w=[];for(e=s(e),g=e.length,t=A,n=0,a=$,l=0;g>l;++l)h=e[l],128>h&&w.push(P(h));for(o=i=w.length,i&&w.push(T);g>o;){for(d=x,l=0;g>l;++l)h=e[l],h>=t&&d>h&&(d=h);for(y=o+1,d-t>D((x-n)/y)&&r("overflow"),n+=(d-t)*y,t=d,l=0;g>l;++l)if(h=e[l],t>h&&++n>x&&r("overflow"),h==t){for(u=n,p=_;b=a>=p?j:p>=a+O?O:p-a,!(b>u);p+=_)m=u-b,v=_-b,w.push(P(f(b+m%v,0))),u=D(m/v);w.push(P(f(u,0))),a=c(n,y,o==i),n=0,++o}++n,++t}return w.join("")}function h(e){return l(e,function(e){return E.test(e)?p(e.slice(4).toLowerCase()):e})}function g(e){return l(e,function(e){return H.test(e)?"xn--"+b(e):e})}var y="object"==typeof o&&o&&!o.nodeType&&o,v="object"==typeof n&&n&&!n.nodeType&&n,m="object"==typeof t&&t;m.global!==m&&m.window!==m&&m.self!==m||(i=m);var w,k,x=2147483647,_=36,j=1,O=26,S=38,C=700,$=72,A=128,T="-",E=/^xn--/,H=/[^\x20-\x7E]/,M=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},B=_-j,D=Math.floor,P=String.fromCharCode;if(w={version:"1.4.1",ucs2:{decode:s,encode:d},decode:p,encode:b,toASCII:g,toUnicode:h},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return w});else if(y&&v)if(n.exports==y)v.exports=w;else for(k in w)w.hasOwnProperty(k)&&(y[k]=w[k]);else i.punycode=w}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],24:[function(e,t,n){"use strict";function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,r){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var l=/\+/g;e=e.split(t);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var d=e.length;s>0&&d>s&&(d=s);for(var u=0;d>u;++u){var f,c,p,b,h=e[u].replace(l,"%20"),g=h.indexOf(n);g>=0?(f=h.substr(0,g),c=h.substr(g+1)):(f=h,c=""),p=decodeURIComponent(f),b=decodeURIComponent(c),o(a,p)?i(a[p])?a[p].push(b):a[p]=[a[p],b]:a[p]=b}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],25:[function(e,t,n){"use strict";function o(e,t){if(e.map)return e.map(t);for(var n=[],o=0;o<e.length;o++)n.push(t(e[o],o));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,l){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?o(a(e),function(a){var l=encodeURIComponent(i(a))+n;return r(e[a])?o(e[a],function(e){return l+encodeURIComponent(i(e))}).join(t):l+encodeURIComponent(i(e[a]))}).join(t):l?encodeURIComponent(i(l))+n+encodeURIComponent(i(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],26:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":24,"./encode":25}],27:[function(e,t,n){"use strict";function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&d.isObject(e)&&e instanceof o)return e;var i=new o;return i.parse(e,t,n),i}function r(e){return d.isString(e)&&(e=i(e)),e instanceof o?e.format():o.prototype.format.call(e)}function a(e,t){return i(e,!1,!0).resolve(t)}function l(e,t){return e?i(e,!1,!0).resolveObject(t):t}var s=e("punycode"),d=e("./util");n.parse=i,n.resolve=a,n.resolveObject=l,n.format=r,n.Url=o;var u=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","	"],b=["{","}","|","\\","^","`"].concat(p),h=["'"].concat(b),g=["%","/","?",";","#"].concat(h),y=["/","?","#"],v=255,m=/^[+a-z0-9A-Z_-]{0,63}$/,w=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,k={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},j=e("querystring");o.prototype.parse=function(e,t,n){if(!d.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),i=-1!==o&&o<e.indexOf("#")?"?":"#",r=e.split(i),a=/\\/g;r[0]=r[0].replace(a,"/"),e=r.join(i);var l=e;if(l=l.trim(),!n&&1===e.split("#").length){var f=c.exec(l);if(f)return this.path=l,this.href=l,this.pathname=f[1],f[2]?(this.search=f[2],t?this.query=j.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var p=u.exec(l);if(p){p=p[0];var b=p.toLowerCase();this.protocol=b,l=l.substr(p.length)}if(n||p||l.match(/^\/\/[^@\/]+@[^@\/]+/)){var O="//"===l.substr(0,2);!O||p&&x[p]||(l=l.substr(2),this.slashes=!0)}if(!x[p]&&(O||p&&!_[p])){for(var S=-1,C=0;C<y.length;C++){var $=l.indexOf(y[C]);-1!==$&&(-1===S||S>$)&&(S=$)}var A,T;T=-1===S?l.lastIndexOf("@"):l.lastIndexOf("@",S),-1!==T&&(A=l.slice(0,T),l=l.slice(T+1),this.auth=decodeURIComponent(A)),S=-1;for(var C=0;C<g.length;C++){var $=l.indexOf(g[C]);-1!==$&&(-1===S||S>$)&&(S=$)}-1===S&&(S=l.length),this.host=l.slice(0,S),l=l.slice(S),this.parseHost(),this.hostname=this.hostname||"";var E="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!E)for(var H=this.hostname.split(/\./),C=0,M=H.length;M>C;C++){var I=H[C];if(I&&!I.match(m)){for(var B="",D=0,P=I.length;P>D;D++)B+=I.charCodeAt(D)>127?"x":I[D];if(!B.match(m)){var F=H.slice(0,C),N=H.slice(C+1),R=I.match(w);R&&(F.push(R[1]),N.unshift(R[2])),N.length&&(l="/"+N.join(".")+l),this.hostname=F.join(".");break}}}this.hostname.length>v?this.hostname="":this.hostname=this.hostname.toLowerCase(),E||(this.hostname=s.toASCII(this.hostname));var U=this.port?":"+this.port:"",L=this.hostname||"";this.host=L+U,this.href+=this.host,E&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==l[0]&&(l="/"+l))}if(!k[b])for(var C=0,M=h.length;M>C;C++){var z=h[C];if(-1!==l.indexOf(z)){var q=encodeURIComponent(z);q===z&&(q=escape(z)),l=l.split(z).join(q)}}var V=l.indexOf("#");-1!==V&&(this.hash=l.substr(V),l=l.slice(0,V));var Q=l.indexOf("?");if(-1!==Q?(this.search=l.substr(Q),this.query=l.substr(Q+1),t&&(this.query=j.parse(this.query)),l=l.slice(0,Q)):t&&(this.search="",this.query={}),l&&(this.pathname=l),_[b]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",J=this.search||"";this.path=U+J}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",o=this.hash||"",i=!1,r="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&d.isObject(this.query)&&Object.keys(this.query).length&&(r=j.stringify(this.query));var a=this.search||r&&"?"+r||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||_[t])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),o&&"#"!==o.charAt(0)&&(o="#"+o),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+n+a+o},o.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(d.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,i=Object.keys(this),r=0;r<i.length;r++){var a=i[r];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),s=0;s<l.length;s++){var u=l[s];"protocol"!==u&&(n[u]=e[u])}return _[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!_[e.protocol]){for(var f=Object.keys(e),c=0;c<f.length;c++){var p=f[c];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||x[e.protocol])n.pathname=e.pathname;else{for(var b=(e.pathname||"").split("/");b.length&&!(e.host=b.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==b[0]&&b.unshift(""),b.length<2&&b.unshift(""),n.pathname=b.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var h=n.pathname||"",g=n.search||"";n.path=h+g}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),v=e.host||e.pathname&&"/"===e.pathname.charAt(0),m=v||y||n.host&&e.pathname,w=m,k=n.pathname&&n.pathname.split("/")||[],b=e.pathname&&e.pathname.split("/")||[],j=n.protocol&&!_[n.protocol];if(j&&(n.hostname="",n.port=null,n.host&&(""===k[0]?k[0]=n.host:k.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===b[0]?b[0]=e.host:b.unshift(e.host)),e.host=null),m=m&&(""===b[0]||""===k[0])),v)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,k=b;else if(b.length)k||(k=[]),k.pop(),k=k.concat(b),n.search=e.search,n.query=e.query;else if(!d.isNullOrUndefined(e.search)){if(j){n.hostname=n.host=k.shift();var O=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;O&&(n.auth=O.shift(),n.host=n.hostname=O.shift())}return n.search=e.search,n.query=e.query,d.isNull(n.pathname)&&d.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!k.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=k.slice(-1)[0],C=(n.host||e.host||k.length>1)&&("."===S||".."===S)||""===S,$=0,A=k.length;A>=0;A--)S=k[A],"."===S?k.splice(A,1):".."===S?(k.splice(A,1),$++):$&&(k.splice(A,1),$--);if(!m&&!w)for(;$--;$)k.unshift("..");!m||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),C&&"/"!==k.join("/").substr(-1)&&k.push("");var T=""===k[0]||k[0]&&"/"===k[0].charAt(0);if(j){n.hostname=n.host=T?"":k.length?k.shift():"";var O=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;O&&(n.auth=O.shift(),n.host=n.hostname=O.shift())}return m=m||n.host&&k.length,m&&!T&&k.unshift(""),k.length?n.pathname=k.join("/"):(n.pathname=null,n.path=null),d.isNull(n.pathname)&&d.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":28,punycode:23,querystring:26}],28:[function(e,t,n){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],29:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],30:[function(e,t,n){(function(t,o){function i(e,t){var o={seen:[],stylize:a};return arguments.length>=3&&(o.depth=arguments[2]),arguments.length>=4&&(o.colors=arguments[3]),h(t)?o.showHidden=t:t&&n._extend(o,t),k(o.showHidden)&&(o.showHidden=!1),k(o.depth)&&(o.depth=2),k(o.colors)&&(o.colors=!1),k(o.customInspect)&&(o.customInspect=!0),o.colors&&(o.stylize=r),s(o,e,o.depth)}function r(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function a(e,t){return e}function l(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function s(e,t,o){if(e.customInspect&&t&&S(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(o,e);return m(i)||(i=s(e,i,o)),i}var r=d(e,t);if(r)return r;var a=Object.keys(t),h=l(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),O(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return u(t);if(0===a.length){if(S(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(x(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(j(t))return e.stylize(Date.prototype.toString.call(t),"date");if(O(t))return u(t)}var y="",v=!1,w=["{","}"];if(b(t)&&(v=!0,w=["[","]"]),S(t)){var k=t.name?": "+t.name:"";y=" [Function"+k+"]"}if(x(t)&&(y=" "+RegExp.prototype.toString.call(t)),j(t)&&(y=" "+Date.prototype.toUTCString.call(t)),O(t)&&(y=" "+u(t)),0===a.length&&(!v||0==t.length))return w[0]+y+w[1];if(0>o)return x(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var _;return _=v?f(e,t,o,h,a):a.map(function(n){return c(e,t,o,h,n,v)}),e.seen.pop(),p(_,y,w)}function d(e,t){if(k(t))return e.stylize("undefined","undefined");if(m(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return v(t)?e.stylize(""+t,"number"):h(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,o,i){for(var r=[],a=0,l=t.length;l>a;++a)A(t,String(a))?r.push(c(e,t,n,o,String(a),!0)):r.push("");return i.forEach(function(i){i.match(/^\d+$/)||r.push(c(e,t,n,o,i,!0))}),r}function c(e,t,n,o,i,r){var a,l,d;if(d=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},d.get?l=d.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):d.set&&(l=e.stylize("[Setter]","special")),A(o,i)||(a="["+i+"]"),l||(e.seen.indexOf(d.value)<0?(l=g(n)?s(e,d.value,null):s(e,d.value,n-1),l.indexOf("\n")>-1&&(l=r?l.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+l.split("\n").map(function(e){return"   "+e}).join("\n"))):l=e.stylize("[Circular]","special")),k(a)){if(r&&i.match(/^\d+$/))return l;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+l}function p(e,t,n){var o=0,i=e.reduce(function(e,t){return o++,t.indexOf("\n")>=0&&o++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function b(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function g(e){return null===e}function y(e){return null==e}function v(e){return"number"==typeof e}function m(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function k(e){return void 0===e}function x(e){return _(e)&&"[object RegExp]"===$(e)}function _(e){return"object"==typeof e&&null!==e}function j(e){return _(e)&&"[object Date]"===$(e)}function O(e){return _(e)&&("[object Error]"===$(e)||e instanceof Error)}function S(e){return"function"==typeof e}function C(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function $(e){return Object.prototype.toString.call(e)}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var T=/%[sdj%]/g;n.format=function(e){if(!m(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,o=arguments,r=o.length,a=String(e).replace(T,function(e){if("%%"===e)return"%";if(n>=r)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(t){return"[Circular]"}default:return e}}),l=o[n];r>n;l=o[++n])a+=g(l)||!_(l)?" "+l:" "+i(l);return a},n.deprecate=function(e,i){function r(){if(!a){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation,a=!0}return e.apply(this,arguments)}if(k(o.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var a=!1;return r};var E,H={};n.debuglog=function(e){if(k(E)&&(E=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!H[e])if(new RegExp("\\b"+e+"\\b","i").test(E)){t.pid;H[e]=function(){n.format.apply(n,arguments)}}else H[e]=function(){};return H[e]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=b,n.isBoolean=h,n.isNull=g,n.isNullOrUndefined=y,n.isNumber=v,n.isString=m,n.isSymbol=w,n.isUndefined=k,n.isRegExp=x,n.isObject=_,n.isDate=j,n.isError=O,n.isFunction=S,n.isPrimitive=C,n.isBuffer=e("./support/isBuffer");n.log=function(){},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!_(t))return e;for(var n=Object.keys(t),o=n.length;o--;)e[n[o]]=t[n[o]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":29,_process:22,inherits:15}],31:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){(0,l["default"])(e);var n=void 0,o=void 0;"object"===("undefined"==typeof t?"undefined":r(t))?(n=t.min||0,o=t.max):(n=arguments[1],o=arguments[2]);var i=encodeURI(e).split(/%..|./).length-1;return i>=n&&("undefined"==typeof o||o>=i)}Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};n["default"]=i;var a=e("./util/assertString"),l=o(a);t.exports=n["default"]},{"./util/assertString":34}],32:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if((0,a["default"])(e),t=(0,s["default"])(t,p),t.allow_display_name){var n=e.match(b);n&&(e=n[1])}var o=e.split("@"),i=o.pop(),r=o.join("@"),l=i.toLowerCase();if("gmail.com"!==l&&"googlemail.com"!==l||(r=r.replace(/\./g,"").toLowerCase()),!(0,u["default"])(r,{max:64})||!(0,u["default"])(i,{max:256}))return!1;if(!(0,c["default"])(i,{require_tld:t.require_tld}))return!1;if('"'===r[0])return r=r.slice(1,r.length-1),t.allow_utf8_local_part?v.test(r):g.test(r);for(var d=t.allow_utf8_local_part?y:h,f=r.split("."),m=0;m<f.length;m++)if(!d.test(f[m]))return!1;return!0}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i;var r=e("./util/assertString"),a=o(r),l=e("./util/merge"),s=o(l),d=e("./isByteLength"),u=o(d),f=e("./isFQDN"),c=o(f),p={allow_display_name:!1,allow_utf8_local_part:!0,require_tld:!0},b=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\s]*<(.+)>$/i,h=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,g=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,y=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,v=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;t.exports=n["default"]},{"./isByteLength":31,"./isFQDN":33,"./util/assertString":34,"./util/merge":35}],33:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){(0,a["default"])(e),t=(0,s["default"])(t,d),t.allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1));var n=e.split(".");if(t.require_tld){var o=n.pop();if(!n.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(o))return!1}for(var i,r=0;r<n.length;r++){if(i=n[r],t.allow_underscores&&(i=i.replace(/_/g,"")),!/^[a-z\u00a1-\uffff0-9-]+$/i.test(i))return!1;if(/[\uff01-\uff5e]/.test(i))return!1;if("-"===i[0]||"-"===i[i.length-1])return!1}return!0}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i;var r=e("./util/assertString"),a=o(r),l=e("./util/merge"),s=o(l),d={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1};t.exports=n["default"]},{"./util/assertString":34,"./util/merge":35}],34:[function(e,t,n){"use strict";function o(e){if("string"!=typeof e)throw new TypeError("This library (validator.js) validates strings only")}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o,t.exports=n["default"]},{}],35:[function(e,t,n){"use strict";function o(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o,t.exports=n["default"]},{}],36:[function(e,t,n){(function(n){"use strict";var o=e("url"),i=(e("./../../bower_components/console-browserify/index.js"),"undefined"!=typeof window?window.ko:"undefined"!=typeof n?n.ko:null),r="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,a=e("./template-loader.js");e("./ko-bindings.js");var l=e("./timed-call.js").timedCall,s=e("./undomanager/undomain.js"),d=e("./ext/color.js");e("./ext/localstorage.js");if("undefined"==typeof i)throw"Cannot find knockout.js library!";if("undefined"==typeof r)throw"Cannot find jquery library!";var u,f,c=function(e,t,o,f,c){a.fixPageEvents();var p=function(t){var n={messages:{unknownError:t.t("Unknown error"),uploadedBytes:t.t("Uploaded bytes exceed file size"),maxNumberOfFiles:t.t("Maximum number of files exceeded"),acceptFileTypes:t.t("File type not allowed"),maxFileSize:t.t("File is too large"),minFileSize:t.t("File is too small"),post_max_size:t.t("The uploaded file exceeds the post_max_size directive in php.ini"),max_file_size:t.t("File is too big"),min_file_size:t.t("File is too small"),accept_file_types:t.t("Filetype not allowed"),max_number_of_files:t.t("Maximum number of files exceeded"),max_width:t.t("Image exceeds maximum width"),min_width:t.t("Image requires a minimum width"),max_height:t.t("Image exceeds maximum height"),min_height:t.t("Image requires a minimum height"),abort:t.t("File upload aborted"),image_resize:t.t("Failed to resize image"),generic:t.t("Unexpected upload error")}};e&&e.fileuploadConfig&&(n=r.extend(!0,n,e.fileuploadConfig)),i.bindingHandlers.fileupload.extendOptions=n},b=function(t){e&&e.strings&&(t.t=function(n,o){var i=e.strings[n];return"undefined"==typeof i&&(i=n),t.tt(i,o)})},h=[b,s(l),d];if("undefined"!=typeof c)for(var g=0;g<c.length;g++)h.push(c[g]);h.push(p);var y=e.fileuploadConfig?e.fileuploadConfig.url:"/upload/";u(e,i),r("<!-- ko template: 'main' --><!-- /ko -->").appendTo(n.document.body),"undefined"==typeof t&&"undefined"!=typeof o&&(t=o.template),a.load(l,t,o,f,h,y)},u=function(e,t){var n=o.parse(e.imgProcessorBackend);t.bindingHandlers.fileupload.remoteFilePreprocessor=function(e){var t=o.format({protocol:n.protocol,host:n.host,pathname:n.pathname});return e.url=o.resolve(t,o.parse(e.url).pathname),e},t.bindingHandlers.wysiwygSrc.convertedUrl=function(e,t,i,r){return o.format({protocol:n.protocol,host:n.host,pathname:n.pathname,query:{method:t,params:i+","+r,src:o.parse(e).pathname}})},t.bindingHandlers.wysiwygSrc.placeholderUrl=function(t,n,o){return e.imgProcessorBackend+"?method=placeholder&params="+t+encodeURIComponent(",")+n},e&&e.tinymceConfig&&(t.bindingHandlers.wysiwyg.standardOptions=e.tinymceConfig),e&&e.tinymceConfigFull&&(t.bindingHandlers.wysiwyg.fullOptions=e.tinymceConfigFull)},f=function(t,n){var o=t&&t.metadata&&t.data;return o?(n.push(e("./ext/server-storage")),n.push(function(e){e.logoPath="/media/editor-icon.png",e.logoUrl="/",e.logoAlt="Badsender"}),t.metadata.urlConverter=function(e){return e?/\]$/.test(e)?null:/^http/.test(e)?null:(e=/([^\/]*)$/.exec(e)[1],e=t.imgProcessorBackend+t.metadata._wireframe+"-"+e):null},c(t,void 0,t.metadata,t.data,n),!0):!1};t.exports={isCompatible:a.isCompatible,init:f,start:c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../bower_components/console-browserify/index.js":1,"./ext/color.js":68,"./ext/localstorage.js":69,"./ext/server-storage":70,"./ko-bindings.js":71,"./template-loader.js":72,"./timed-call.js":73,"./undomanager/undomain.js":74,url:27}],37:[function(e,t,n){(function(t){"use strict";var n="undefined"!=typeof window?window.ko:"undefined"!=typeof t?t.ko:null,o=(e("./../../../bower_components/console-browserify/index.js"),function(e,t,n){var o=e.createElement("script");return o.setAttribute("type","text/html"),o.setAttribute("id",t),o.text=n,e.body.appendChild(o),o});n.bindingHandlers.bindIframe={tpl:'<!DOCTYPE html>\r\n<html>\r\n<head>\r\n</head>\r\n<body><div data-bind="block: content"></div></body>\r\n</html>\r\n',init:function(e,t){function i(i){try{var r=e.contentDocument;r.open(),r.write(n.bindingHandlers.bindIframe.tpl),r.close();try{var a=r.body;if(a){for(var l=e.contentWindow.parent.document.getElementsByTagName("script"),s=0;s<l.length;s++)"text/html"==l[s].getAttribute("type")&&l[s].getAttribute("id")&&o(r,l[s].getAttribute("id"),l[s].innerHTML);var d=r.getElementsByTagName("HTML");n.utils.domNodeDisposal.addDisposeCallback(e,function(){n.cleanNode(d[0]||a)}),n.applyBindings(t(),d[0]||a)}}catch(u){throw u}}catch(u){throw u}}i("first call")}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../../bower_components/console-browserify/index.js":1}],38:[function(e,t,n){(function(t){"use strict";var n="undefined"!=typeof window?window.ko:"undefined"!=typeof t?t.ko:null;e("./../../../bower_components/console-browserify/index.js");n.bindingHandlers.withProperties={init:function(e,t,o,i,r){var a=r.createChildContext(r.$rawData,null,function(e){n.utils.extend(e,t())});return n.applyBindingsToDescendants(a,e),{controlsDescendantBindings:!0}}},n.virtualElements.allowedBindings.withProperties=!0,n.bindingHandlers.log={init:function(e,t,n,o,i){}},n.bindingHandlers.block={templateExists:function(e){var n=t.document.getElementById(e);return!!n},_chooseTemplate:function(e,t,o,i){var r=t+"-"+o;if(n.bindingHandlers.block.templateExists(r))return r;if("undefined"!=typeof i&&null!==i)return n.bindingHandlers.block._chooseTemplate(e,t,i);var a=e?"array":"object-"+o;if(n.bindingHandlers.block.templateExists(a))return a;throw"cannot find template for "+r+"/"+a},_displayMode:function(e,t){var o="undefined"!=typeof e.type?n.utils.unwrapObservable(e.type):"notablock-"+typeof e,i="undefined"!=typeof e.splice,r=t.templateMode?t.templateMode:"show";return n.bindingHandlers.block._chooseTemplate(i,o,r,t.templateModeFallback)},_makeTemplateValueAccessor:function(e,t){return function(){var o,i,r=e(),a=n.utils.peekObservable(r);if(!a||"object"!=typeof a.data&&"function"!=typeof a.data)o=r;else if(o=a.data,"undefined"!=typeof a.template){var l=n.utils.unwrapObservable(a.template),s=t.templateMode?t.templateMode:"show";i=n.bindingHandlers.block._chooseTemplate(!1,l,s,t.templateModeFallback)}var d=n.utils.unwrapObservable(o);if(n.isObservable(d),"undefined"==typeof i)if(void 0===o)i="empty";else try{i=n.bindingHandlers.block._displayMode(d,t)}catch(u){throw u}return{name:i,data:o,templateEngine:n.nativeTemplateEngine.instance}}},init:function(e,t,o,i,r){"undefined"==typeof t();var a=n.bindingHandlers.block._makeTemplateValueAccessor(t,r);return n.bindingHandlers.template.init(e,a)},update:function(e,t,o,i,r){var a=n.bindingHandlers.block._makeTemplateValueAccessor(t,r);return n.bindingHandlers.template.update(e,a,o,i,r)}},n.expressionRewriting.bindingRewriteValidators.block=!1,n.virtualElements.allowedBindings.block=!0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../../bower_components/console-browserify/index.js":1}],39:[function(e,t,n){"use strict";t.exports=e("./string-template.js")},{"./string-template.js":53}],40:[function(e,t,n){(function(t){"use strict";e("./../../../bower_components/evol-colorpicker/js/evol.colorpicker.min.js");var n="undefined"!=typeof window?window.jQuery:"undefined"!=typeof t?t.jQuery:null,o="undefined"!=typeof window?window.ko:"undefined"!=typeof t?t.ko:null,i="undefined"!=typeof window?window.kojqui:"undefined"!=typeof t?t.kojqui:null,r=function(){i.BindingHandler.call(this,"colorpicker")};r.prototype=i.utils.createObject(i.BindingHandler.prototype),r.prototype.constructor=r,r.prototype.init=function(e,t,i){var r=t(),a=r.color,l=o.computed({read:a,write:a,disposeWhenNodeIsRemoved:e}),s=function(){return l};o.bindingHandlers.value.init(e,s,i);var d=function(e,t){"undefined"!=typeof t&&l(t)};n(e).on("change.color",d),o.computed({read:function(){var t={color:o.utils.unwrapObservable(l),showOn:"button"};for(var i in r)"color"!==i&&r.hasOwnProperty(i)&&(t[i]=o.utils.unwrapObservable(r[i]));n(e).colorpicker(t)},disposeWhenNodeIsRemoved:e}),o.utils.domNodeDisposal.addDisposeCallback(e,function(){n(e).off("change.color",d),n(e).colorpicker("destroy")})},i.utils.register(r)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../../bower_components/evol-colorpicker/js/evol.colorpicker.min.js":2}],41:[function(e,t,n){(function(e){"use strict";var t="undefined"!=typeof window?window.ko:"undefined"!=typeof e?e.ko:null;t.bindingHandlers.cssText={update:function(e,n,o){var i=t.utils.unwrapObservable(n());try{e.innerText=i}catch(r){e.styleSheet||(e.innerHTML="a{}"),e.styleSheet.cssText=i}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],42:[function(e,t,n){(function(e){"use strict";var t="undefined"!=typeof window?window.jQuery:"undefined"!=typeof e?e.jQuery:null,n="undefined"!=typeof window?window.ko:"undefined"!=typeof e?e.ko:null;!function(e){e(n,t)}(function(e,t){var n="ko_sortItem",o="ko_dragItem",i=(e.utils.unwrapObservable,e.utils.domData.get);e.utils.domData.set;e.bindingHandlers.droppable={init:function(r,a,l,s,d){var u,f=t(r),c=e.utils.unwrapObservable(a())||{},p={};t.extend(!0,p,e.bindingHandlers.droppable),c.data?(c.options&&p.options&&(e.utils.extend(p.options,c.options),delete c.options),e.utils.extend(p,c)):p.data=c,u=p.options.drop,f.droppable(e.utils.extend(p.options,{drop:function(e,t){var r=t.draggable[0],a=i(r,n)||i(r,o);a&&(a.clone&&(a=a.clone()),p.dragged&&(a=p.dragged.call(this,a,e,t)||a),p.data&&p.data(a)),u&&u.apply(this,arguments)}})),void 0!==p.isEnabled&&e.computed({read:function(){f.droppable(e.utils.unwrapObservable(p.isEnabled)?"enable":"disable")},disposeWhenNodeIsRemoved:r})},update:function(e,t,n,o,i){},targetIndex:null,afterMove:null,beforeMove:null,options:{}}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],43:[function(e,t,n){(function(t){"use strict";var n="undefined"!=typeof window?window.ko:"undefined"!=typeof t?t.ko:null,o="undefined"!=typeof window?window.jQuery:"undefined"!=typeof t?t.jQuery:null;e("./../../../bower_components/console-browserify/index.js");n.bindingHandlers.focusable={focus:function(){},blur:function(){},init:function(e){n.utils.domNodeDisposal.addDisposeCallback(e,function(){o(e).off("focusin",n.bindingHandlers.focusable.focus),o(e).off("focusout",n.bindingHandlers.focusable.blur)}),o(e).on("focusin",n.bindingHandlers.focusable.focus),o(e).on("focusout",n.bindingHandlers.focusable.blur)}},n.bindingHandlers.scrollable={scroll:function(){},init:function(e){n.utils.domNodeDisposal.addDisposeCallback(e,function(){o(e).off("scroll",n.bindingHandlers.scrollable.scroll)}),o(e).on("scroll",n.bindingHandlers.scrollable.scroll)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../../bower_components/console-browserify/index.js":1
}],44:[function(e,t,n){(function(e){"use strict";var t="undefined"!=typeof window?window.ko:"undefined"!=typeof e?e.ko:null;t.extenders.paging=function(e,n){var o=t.observable(n||10),i=t.observable(1);return e.pageSize=t.computed({read:o,write:function(e){o(e>0?e:10)}}),e.currentPage=t.computed({read:i,write:function(t){i(t>e.pageCount()?e.pageCount():0>=t?1:t)}}),e.pageCount=t.computed(function(){return Math.ceil(e().length/e.pageSize())||1}),e.currentPageData=t.computed(function(){var t=o(),n=i(),r=t*(n-1),a=t*n;return e().slice(r,a)}),e.moveFirst=function(){e.currentPage(1)},e.movePrevious=function(){e.currentPage(e.currentPage()-1)},e.moveNext=function(){e.currentPage(e.currentPage()+1)},e.moveLast=function(){e.currentPage(e.pageCount())},e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(e,t,n){(function(t){"use strict";var n="undefined"!=typeof window?window.jQuery:"undefined"!=typeof t?t.jQuery:null,o="undefined"!=typeof window?window.ko:"undefined"!=typeof t?t.ko:null,i="undefined"!=typeof window?window.jQuery.ui.sortable:"undefined"!=typeof t?t.jQuery.ui.sortable:null,r="undefined"!=typeof window?window.jQuery.ui.draggable:"undefined"!=typeof t?t.jQuery.ui.draggable:null;e("./../../../bower_components/console-browserify/index.js");if(e("./../../../bower_components/knockout-sortable/build/knockout-sortable.min.js"),"undefined"==typeof i)throw"Cannot find jquery-ui sortable widget dependency!";if("undefined"==typeof r)throw"Cannot find jquery-ui sortable widget dependency!";var a=function(e,t){e()?t.type==e()+"stop"&&e(!1):"dragstart"!=t.type&&"sortstart"!=t.type||e(t.type.substring(0,4))},l=function(e){return function(){var i=e();o.utils.peekObservable(i);o.utils.unwrapObservable(i),"undefined"==i.options&&(i.options={});var r=i.options.start;i.options.start=function(e,l){return"undefined"!=typeof i.dragging&&o.isWritableObservable(i.dragging)&&a(i.dragging,e),"undefined"!=typeof i.dropContainer&&(i.scrollInterval=t.setInterval(function(){var e=n(i.dropContainer).scrollTop();n(i.dropContainer).scrollTop(e+i.adding)},20)),"undefined"!=typeof r?r(e,l):void 0};var l=i.options.stop;i.options.stop=function(e,n){return"undefined"!=typeof i.dragging&&o.isWritableObservable(i.dragging)&&a(i.dragging,e),"undefined"!=typeof i.dropContainer&&t.clearInterval(i.scrollInterval),"undefined"!=typeof l?l(e,n):void 0};var s=i.options.drag;return i.options.drag=function(e,t){if("undefined"!=typeof i.dropContainer){var o=e.pageY-n(i.dropContainer).offset().top,r=o-n(i.dropContainer).height();-20>o?i.adding=-20:0>o?i.adding=-10:10>o?i.adding=-5:r>20?i.adding=20:r>0?i.adding=10:r>-10?i.adding=5:i.adding=0}return"undefined"!=typeof s?s(e,t):void 0},i}};o.bindingHandlers.extsortable={init:function(e,t,n,i,r){return o.bindingHandlers.sortable.init(e,l(t),n,i,r)},update:function(e,t,n,i,r){return o.bindingHandlers.sortable.update(e,l(t),n,i,r)}},o.bindingHandlers.extdraggable={init:function(e,t,n,i,r){return o.bindingHandlers.draggable.init(e,l(t),n,i,r)},update:function(e,t,n,i,r){return o.bindingHandlers.draggable.update(e,l(t),n,i,r)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../../bower_components/console-browserify/index.js":1,"./../../../bower_components/knockout-sortable/build/knockout-sortable.min.js":4}],46:[function(e,t,n){(function(t){"use strict";var n="undefined"!=typeof window?window.jQuery:"undefined"!=typeof t?t.jQuery:null,o="undefined"!=typeof window?window.ko:"undefined"!=typeof t?t.ko:null;e("./../../../bower_components/console-browserify/index.js");o.bindingHandlers.preloader={init:function(e,t){var n=t();if("undefined"==typeof n.preloaded){n.preloaded=o.observable("");var i=function(e){if(e!=n.preloaded())if(""!==e){var t=new Image;t.onload=function(){n.preloaded(e)},t.onerror=function(){n.preloaded(e)},t.src=e}else n.preloaded(e)};n.subscribe(i),i(n())}}},o.bindingHandlers.advattr={init:function(e,t,n,i,r){var a=o.utils.unwrapObservable(t()||{});o.utils.objectForEach(a,function(t,n){var i=e.getAttribute(t);if(o.isWriteableObservable(n)){var r=n();r!=i&&n(i)}})},update:function(e,t,n){var i=o.utils.unwrapObservable(t())||{};o.utils.objectForEach(i,function(t,n){n=o.utils.unwrapObservable(n);var i=n===!1||null===n||void 0===n;i?e.removeAttribute(t):e.setAttribute(t,n.toString())})}},o.bindingHandlers.advstyle={init:function(e,t,n,i,r){var a=o.utils.unwrapObservable(t()||{});o.utils.objectForEach(a,function(t,n){var i;if(t.match(/Px$/)?(t=t.substr(0,t.length-2),i=e.style[t],i.match(/px$/)&&(i=i.replace(/px$/,""))):i=e.style[t],o.isWriteableObservable(n)){var r=n();r!=i&&n(i)}})},update:function(e,t){var n=o.utils.unwrapObservable(t()||{});o.utils.objectForEach(n,function(t,n){n=o.utils.unwrapObservable(n),null!==n&&"undefined"!=typeof n&&n!==!1||(n=""),t.match(/Px$/)&&(t=t.substr(0,t.length-2),n+="px"),e.style[t]=n})}},o.bindingHandlers.domlog={init:function(e,t){o.utils.domNodeDisposal.addDisposeCallback(e,function(){})}},o.bindingHandlers.fudroppable={init:function(e,n){var i=n()||{},r={},a=function(e,n,i,r,a,l){e[n]?t.clearTimeout(e[n]):("undefined"!=typeof r&&i.classList.add(r),o.isWriteableObservable(a)&&!a()&&a(!0));var s=function(){e[n]=null,"undefined"!=typeof r&&i.classList.remove(r),o.isWriteableObservable(a)&&a()&&a(!1)};"dragleave"==l.type?s():e[n]=t.setTimeout(s,500)};(i.active||i.activeClass)&&o.utils.registerEventHandler(t,"dragover",a.bind(void 0,r,"activeTimeout",e,i.activeClass,i.active)),i.hoverClass&&o.utils.registerEventHandler(e,"dragover dragenter dragleave",a.bind(void 0,r,"hoverTimeout",e,i.hoverClass,void 0))}},o.bindingHandlers.fileupload={extendOptions:{},init:function(e,i){o.utils.domNodeDisposal.addDisposeCallback(e,function(){n(e).fileupload("destroy")}),t.webkitURL?n(e).attr("title"," "):n(e).attr("title","")},update:function(e,i){var r=i()||{},a=n(e),l=a.parents(".uploadzone"),s=r.data;r.data=void 0;var d=r.canvasPreview;o.utils.extend(r,{url:"/upload/",dataType:"json",dropZone:l.find(".mo-uploadzone")[0],autoUpload:!0,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,maxFileSize:1048576,disableImageResize:/Android(?!.*Chrome)|Opera/.test(t.navigator.userAgent),previewMaxWidth:200,previewMaxHeight:200,previewCrop:!1,replaceFileInput:!1,messages:{unknownError:"Unknown error",uploadedBytes:"Uploaded bytes exceed file size",maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small",post_max_size:"The uploaded file exceeds the post_max_size directive in php.ini",max_file_size:"File is too big",min_file_size:"File is too small",accept_file_types:"Filetype not allowed",max_number_of_files:"Maximum number of files exceeded",max_width:"Image exceeds maximum width",min_width:"Image requires a minimum width",max_height:"Image exceeds maximum height",min_height:"Image requires a minimum height",abort:"File upload aborted",image_resize:"Failed to resize image",generic:"Unexpected upload error"}}),o.utils.extend(r,o.bindingHandlers.fileupload.extendOptions);var u=0,f="",c=function(){0===--u&&(s&&s(f),f="",d&&(l.find("img").show(),l.find("canvas").remove()),l.removeClass("uploading"),l.find(".progress-bar").css("width",0))},p=function(e){if("object"==typeof r.messages&&null!==r.messages){var t=e.match(/^([^ ]+)(.*)$/);if(t&&"undefined"!=typeof r.messages[t[1]])return r.messages[t[1]]+t[2]}return e};a.fileupload(r);for(var b=["fileuploadadd","fileuploadprocessalways","fileuploadprogressall","fileuploaddone","fileuploadfail"],h=function(e,t){if("fileuploadadd"==e.type&&u++,"fileuploadfail"==e.type&&(r.onerror&&(""===t.errorThrown&&"error"==t.textStatus?r.onerror(p("generic")):r.onerror(p("generic ("+t.errorThrown+")"))),c()),"fileuploaddone"==e.type)if("undefined"!=typeof t.result.files[0].url){if(r.onfile)for(var i=0;i<t.result.files.length;i++)t.result.files[i]=o.bindingHandlers.fileupload.remoteFilePreprocessor(t.result.files[i]),r.onfile(t.result.files[i]);if(""===f&&(f=t.result.files[0].url),d){var a=new Image;a.onload=c,a.onerror=c,a.src=t.result.files[0].url}else c()}else"undefined"!=typeof t.result.files[0].error?(r.onerror&&r.onerror(p(t.result.files[0].error)),c()):(r.onerror&&r.onerror(p("generic (Unexpected Error retrieving uploaded file)")),c());if("fileuploadprocessalways"==e.type){var s=t.index,b=t.files[s];if(b.preview&&0===s&&0===l.find("canvas").length){if(d){var h=n(b.preview).css("width","100%");l.find("img").hide(),l.prepend(h)}l.addClass("uploading"),l.find(".progress-bar").css("width",0)}b.error&&(r.onerror&&r.onerror(p(b.error)),c())}if("fileuploadprogressall"==e.type){var g=parseInt(t.loaded/t.total*100,10);l.find(".progress-bar").css("width",g+"%")}},g=b.length-1;g>=0;g--){var y=b[g];a.on(y,h)}n.support.fileInput||a.prop("disabled",!0).parent().addClass("disabled")}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../../bower_components/console-browserify/index.js":1}],47:[function(e,t,n){(function(t){"use strict";var n="undefined"!=typeof window?window.ko:"undefined"!=typeof t?t.ko:null;e("./../../../bower_components/console-browserify/index.js");n.bindingHandlers.ifSubs={cloneNodes:function(e,t){for(var o=0,i=e.length,r=[];i>o;o++){var a=e[o].cloneNode(!0);r.push(t?n.cleanNode(a):a)}return r},init:function(e,t,o,i,r){var a,l,s=t();return"undefined"==typeof s.data.subsCount&&n.extenders.subscriptionsCount(s.data),n.computed(function(){var o,i,d,u=n.utils.unwrapObservable(t().data.subsCount),f=!l;d=-("undefined"!=typeof t().gutter?t().gutter:1),o=u+(a?d:0)>=n.utils.unwrapObservable(s.threshold),"undefined"!=typeof t().not&&t().not&&(o=!o),i=f||o!==a,i&&(f&&n.computedContext.getDependenciesCount()&&(l=n.bindingHandlers.ifSubs.cloneNodes(n.virtualElements.childNodes(e),!0)),o?(f||n.virtualElements.setDomNodeChildren(e,n.bindingHandlers.ifSubs.cloneNodes(l)),n.applyBindingsToDescendants(r,e)):n.virtualElements.emptyNode(e),a=o)},null,{disposeWhenNodeIsRemoved:e}),{controlsDescendantBindings:!0}}},n.virtualElements.allowedBindings.ifSubs=!0;var o,i;if("undefined"!=typeof n.DEBUG&&"undefined"!=typeof n.isWritableObservable)o="beforeSubscriptionAdd",i="afterSubscriptionRemove";else if("3.2.0"==n.version)o="va",i="nb";else if("3.3.0"==n.version)o="ja",i="ua";else{if("3.4.0"!=n.version)throw"Unsupported minimized Knockout version "+n.version+" (supported DEBUG or minimized 3.2.0 ... 3.4.0)";o="sa",i="Ia"}n.extenders.subscriptionsCount=function(e,t,r){if("undefined"==typeof e.subsCount){e.subsCount=n.observable(e.getSubscriptionsCount()).extend({notify:"always"});var a=e[o],l=e[i];e[o]=function(n){a&&a.call(e,n);var o=e.getSubscriptionsCount()+1;"undefined"!=typeof t&&o!=t&&"undefined"!=typeof r&&o!=r||e.subsCount(o)},e[i]=function(n){l&&l.call(e,n);var o=e.getSubscriptionsCount();"undefined"!=typeof t&&o!=t&&"undefined"!=typeof r&&o!=r||e.subsCount(o)}}return null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../../bower_components/console-browserify/index.js":1}],48:[function(e,t,n){(function(t){"use strict";var n="undefined"!=typeof window?window.jQuery:"undefined"!=typeof t?t.jQuery:null,o="undefined"!=typeof window?window.jQuery.ui.spinner:"undefined"!=typeof t?t.jQuery.ui.spinner:null;e("./../../../bower_components/console-browserify/index.js");if("undefined"==typeof o)throw"Cannot find jquery-ui spinner widget dependency!";n.widget("ui.spinner",o,{_adjustValue:function(e){var t=(this._super(e),this.options);return e=parseFloat(e.toFixed(this._precision())),null!==t.max&&e>t.max?t.max:null!==t.min&&e<t.min?t.min:e}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../../bower_components/console-browserify/index.js":1}],49:[function(e,t,n){(function(t){"use strict";var n="undefined"!=typeof window?window.jQuery:"undefined"!=typeof t?t.jQuery:null,o=(e("./../../../bower_components/console-browserify/index.js"),"undefined"!=typeof window?window.jQuery.ui.tabs:"undefined"!=typeof t?t.jQuery.ui.tabs:null);if("undefined"==typeof o)throw"Cannot find jquery-ui tabs widget dependency!";n.widget("ui.tabs",o,{_isLocal:function(e){return"true"==e.getAttribute("data-local")?!0:this._superApply(arguments)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../../bower_components/console-browserify/index.js":1}],50:[function(e,t,n){(function(e){"use strict";function n(t,n){var o=e.document.createElement("script");o.setAttribute("type","text/html"),o.setAttribute("id",t),o.text=n,e.document.body.appendChild(o)}function o(t){var n=e.document.getElementById(t);n&&n.parentNode.removeChild(n)}function i(){}function r(t){var n=e.document.getElementById(t);return n?n.innerHTML:void 0}t.exports={init:i,addTemplate:n,removeTemplate:o,getTemplateContent:r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],51:[function(e,t,n){(function(t){"use strict";var n,o="undefined"!=typeof window?window.ko:"undefined"!=typeof t?t.ko:null,i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof t?t.jQuery:null,r=(e("./../../../bower_components/console-browserify/index.js"),"undefined"!=typeof window?window.tinymce:"undefined"!=typeof t?t.tinymce:null),a=function(){n=void 0,"undefined"!=typeof r.activeEditor&&"undefined"!=typeof r.activeEditor.theme&&"undefined"!=typeof r.activeEditor.theme.panel&&"undefined"!=typeof r.activeEditor.theme.panel.visible&&(("undefined"!=typeof r.activeEditor.theme.panel._visible&&r.activeEditor.theme.panel._visible&&r.activeEditor.theme.panel._fixed||"undefined"!=typeof r.activeEditor.theme.panel.state&&r.activeEditor.theme.panel.state.get("visible")&&r.activeEditor.theme.panel.state.get("fixed"))&&r.activeEditor.theme.panel.fixed(!1),r.activeEditor.nodeChanged(),r.activeEditor.theme.panel.visible(!0),r.activeEditor.theme.panel.layoutRect().y<=40&&r.activeEditor.theme.panel.moveBy(0,40-r.activeEditor.theme.panel.layoutRect().y))};o.bindingHandlers.wysiwygScrollfix={scroll:function(e){n&&t.clearTimeout(n),n=t.setTimeout(a,50)},init:function(e){o.utils.domNodeDisposal.addDisposeCallback(e,function(){i(e).off("scroll",o.bindingHandlers.wysiwygScrollfix.scroll)}),i(e).on("scroll",o.bindingHandlers.wysiwygScrollfix.scroll)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../../bower_components/console-browserify/index.js":1}],52:[function(e,t,n){(function(t){"use strict";var n="undefined"!=typeof window?window.jQuery:"undefined"!=typeof t?t.jQuery:null,o="undefined"!=typeof window?window.ko:"undefined"!=typeof t?t.ko:null,i=(e("./../../../bower_components/console-browserify/index.js"),function(e,t,n,o){var i=n.scrollTop(),r=i-o-(t?20:-20),a="undefined"!=typeof n[0].nodeType;if(a){var l={scrollTop:""+Math.round(r)+"px"},s=Math.round(Math.abs(r-i));n.stop().animate(l,s)}else n.scrollTop(r)});o.bindingHandlers.scrollIntoView={update:function(e,t,r,a,l){var s=o.utils.unwrapObservable(t());if(s)try{for(;8===e.nodeType;)e=e.nextSibling;if(8!==e.nodeType){var d,u=n(e).scrollParent(),f=!1;9==u[0].nodeType?(u=n(u[0].defaultView),d=0,f=!0):d=u.offset().top;var c=u.height(),p=u.scrollTop(),b=d+c,h=n(e),g=h.offset().top;f&&(g-=p);var y=h.height(),v=g+y;g>d&&b>g+y||(c>y?(d>g&&i(e,!0,u,d-g),v>b&&i(e,!1,u,b-v)):(d>g&&b>v&&i(e,!1,u,b-v),g>d&&v>b&&i(e,!0,u,d-g)))}}catch(m){}}},o.virtualElements.allowedBindings.scrollIntoView=!0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../../bower_components/console-browserify/index.js":1}],53:[function(e,t,n){(function(n){"use strict";function o(e){var t=e.makeTemplateSource;return e.makeTemplateSource=function(e){return"undefined"!=typeof u[e]?new s.templateSources.stringTemplate(e,u[e]):t(e)},e}function i(e,t){u[e]=t}function r(e){"undefined"!=typeof u[e]?u[e]=void 0:d.removeTemplate(e)}function a(){s.setTemplateEngine(o(new s.nativeTemplateEngine))}function l(e){return"undefined"!=typeof u[e]?u[e]:d.getTemplateContent(e)}var s="undefined"!=typeof window?window.ko:"undefined"!=typeof n?n.ko:null,d=e("./script-template.js"),u={};s.templateSources.stringTemplate=function(e,t){this.templateName=e,this.template=t,this._data={}},s.utils.extend(s.templateSources.stringTemplate.prototype,{data:function(e,t){return 1===arguments.length?this._data[e]:void(this._data[e]=t)},text:function(e){return 0===arguments.length?this.template:void(this.template=e)}}),t.exports={init:a,addTemplate:i,removeTemplate:r,getTemplateContent:l}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./script-template.js":50}],54:[function(e,t,n){(function(t){"use strict";var n="undefined"!=typeof window?window.ko:"undefined"!=typeof t?t.ko:null,o="undefined"!=typeof window?window.jQuery:"undefined"!=typeof t?t.jQuery:null,i=("undefined"!=typeof window?window.kojqui:"undefined"!=typeof t?t.kojqui:null,e("./../../../bower_components/console-browserify/index.js"),function(e,t){return function(){return n.utils.extend(t,e()),t}}),r={show:{delay:500},track:!0,items:'[title][title!=""][title!=" "]'};n.bindingHandlers.tooltips={init:function(e,t,a,l,s){return"undefined"!=typeof o.fn.tooltip&&"undefined"!=typeof n.bindingHandlers.tooltip?n.bindingHandlers.tooltip.init(e,i(t,r),a,l,s):void 0},update:function(e,t,a,l,s){return"undefined"!=typeof o.fn.tooltip&&"undefined"!=typeof n.bindingHandlers.tooltip?n.bindingHandlers.tooltip.update(e,i(t,r),a,l,s):void 0}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../../bower_components/console-browserify/index.js":1}],55:[function(e,t,n){(function(t){"use strict";var n="undefined"!=typeof window?window.ko:"undefined"!=typeof t?t.ko:null;e("./../../../bower_components/console-browserify/index.js");n.bindingHandlers.validatedValue={init:function(e,t,o){var i=t;if("undefined"!=typeof e.pattern){var r=new RegExp("^(?:"+e.pattern+")$"),a=n.computed({read:function(){var o=n.utils.unwrapObservable(t()),i=null===o||""===o||r.test(o);return i?e.classList.remove("invalid"):e.classList.add("invalid"),o},write:n.isWriteableObservable(t())&&function(o){n.selectExtensions.writeValue(e,o);var i=n.selectExtensions.readValue(e);t()(i)},disposeWhenNodeIsRemoved:e});i=function(){return a}}n.bindingHandlers.value.init(e,i,o)}},n.expressionRewriting._twoWayBindings.validatedValue=!0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../../bower_components/console-browserify/index.js":1}],56:[function(e,t,n){(function(t){"use strict";var n="undefined"!=typeof window?window.ko:"undefined"!=typeof t?t.ko:null;e("./../../../bower_components/console-browserify/index.js");n.bindingHandlers.uniqueId={currentIndex:0,init:function(e,o){var i=n.utils.unwrapObservable(o())||{};if(""===i.id()){var r,a,l;l="ko_"+("undefined"!=typeof i.type?n.utils.unwrapObservable(i.type):"block");do r=l+"_"+ ++n.bindingHandlers.uniqueId.currentIndex,a=t.document.getElementById(r);while(a);i.id(r)}}},n.virtualElements.allowedBindings.uniqueId=!0,n.bindingHandlers.virtualAttr={update:function(e,t){8!==e.nodeType&&n.bindingHandlers.attr.update(e,t)}},n.virtualElements.allowedBindings.virtualAttr=!0,n.bindingHandlers.virtualAttrStyle={update:function(e,t,o,i,r){if(8!==e.nodeType){var a="undefined"==typeof r.templateMode||"wysiwyg"!=r.templateMode,l=["style"];a&&l.push("replacedstyle");for(var s=n.utils.unwrapObservable(t()),d=0;d<l.length;d++){var u=l[d],f=s===!1||null===s||void 0===s;f?e.removeAttribute(u):e.setAttribute(u,s.toString())}}}},n.virtualElements.allowedBindings.virtualAttrStyle=!0,n.bindingHandlers.virtualStyle={update:function(e,t){8!==e.nodeType&&n.bindingHandlers.style.update(e,t)}},n.virtualElements.allowedBindings.virtualStyle=!0,n.bindingHandlers.virtualHtml={init:n.bindingHandlers.html.init,update:function(e,t){if(8===e.nodeType){var o=n.utils.unwrapObservable(t());if(n.virtualElements.emptyNode(e),null!==o&&void 0!==o){"string"!=typeof o&&(o=o.toString());var i=n.utils.parseHtmlFragment(o);if(i)for(var r=e.nextSibling,a=0,l=i.length;l>a;a++)r.parentNode.insertBefore(i[a],r)}}else n.bindingHandlers.html.update(e,t);return{controlsDescendantBindings:!0}}},n.virtualElements.allowedBindings.virtualHtml=!0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../../bower_components/console-browserify/index.js":1}],57:[function(e,t,n){(function(t){"use strict";var n="undefined"!=typeof window?window.tinymce:"undefined"!=typeof t?t.tinymce:null,o=("undefined"!=typeof window?window.jQuery:"undefined"!=typeof t?t.jQuery:null,"undefined"!=typeof window?window.ko:"undefined"!=typeof t?t.ko:null);e("./../../../bower_components/console-browserify/index.js");e("./eventable.js"),o.bindingHandlers.wysiwygOrHtml={init:function(e,t,n,i,r){var a="undefined"==typeof r.templateMode||"wysiwyg"!=r.templateMode;return a?o.bindingHandlers.virtualHtml.init():o.bindingHandlers.wysiwyg.init(e,t,n,i,r)},update:function(e,t,n,i,r){var a="undefined"==typeof r.templateMode||"wysiwyg"!=r.templateMode;return a?o.bindingHandlers.virtualHtml.update(e,t,n,i,r):void 0}},o.virtualElements.allowedBindings.wysiwygOrHtml=!0,o.bindingHandlers.wysiwygHref={init:function(e,t,n,o,i){if(8!==e.nodeType){var r=(t(),"undefined"==typeof i.templateMode||"wysiwyg"!=i.templateMode);if(r)e.setAttribute("target","_new");else{var a=n();"undefined"!=typeof a.wysiwygOrHtml?e.setAttribute("href","javascript:void(0)"):(e.removeAttribute("href"),e.setAttribute("disabledhref","#"))}}},update:function(e,t,n,i,r){if(8!==e.nodeType){var a="undefined"==typeof r.templateMode||"wysiwyg"!=r.templateMode,l=o.utils.unwrapObservable(t());a&&(l===!1||null===l||void 0===l?e.removeAttribute("href"):e.setAttribute("href",l.toString()))}}},o.virtualElements.allowedBindings.wysiwygHref=!0,o.bindingHandlers.wysiwygSrc={convertedUrl:function(e,t,n,o){var i=e+"?method="+t+"&width="+n+(null!==o?"&height="+o:"");return i},placeholderUrl:function(e,t,n){},update:function(e,t,n,i,r){var a=o.utils.unwrapObservable(t()),l=o.utils.unwrapObservable(a.src),s=o.utils.unwrapObservable(a.placeholder),d=o.utils.unwrapObservable(a.width),u=o.utils.unwrapObservable(a.height);if(l===!1||null===l||void 0===l||""===l)"object"==typeof s&&null!==s?e.setAttribute("src",o.bindingHandlers.wysiwygSrc.placeholderUrl(s.width,s.height,s.text)):e.removeAttribute("src");else{var f=o.utils.unwrapObservable(a.method);f||(f=d>0&&u>0?"cover":"resize");var c=o.bindingHandlers.wysiwygSrc.convertedUrl(l.toString(),f,d,u);e.setAttribute("src",c)}"undefined"!=typeof d&&null!==d?e.setAttribute("width",d):e.removeAttribute("width"),"undefined"!=typeof u&&null!==u?e.setAttribute("height",u):e.removeAttribute("height")}},o.bindingHandlers.wysiwygId={init:function(e,t,n,i,r){var a="undefined"==typeof r.templateMode||"wysiwyg"!=r.templateMode;a||e.setAttribute("id",o.utils.unwrapObservable(t()))},update:function(e,t,n,i,r){var a="undefined"==typeof r.templateMode||"wysiwyg"!=r.templateMode;a||e.setAttribute("id",o.utils.unwrapObservable(t()))}},o.virtualElements.allowedBindings.wysiwygId=!0,o.bindingHandlers.wysiwygClick={init:function(e,t,n,i,r){var a="undefined"==typeof r.templateMode||"wysiwyg"!=r.templateMode;a||o.bindingHandlers.click.init(e,t,n,i,r)}},o.virtualElements.allowedBindings.wysiwygClick=!0,o.bindingHandlers.wysiwygCss={update:function(e,t,n,i,r){var a="undefined"==typeof r.templateMode||"wysiwyg"!=r.templateMode;a||o.bindingHandlers.css.update(e,t,n,i,r)}},o.virtualElements.allowedBindings.wysiwygCss=!0,o.bindingHandlers.wysiwygImg={makeTemplateValueAccessor:function(e,t){return function(){var n="undefined"!=typeof t.templateMode&&"wysiwyg"==t.templateMode,i=e(),r=o.utils.peekObservable(i);return o.utils.unwrapObservable(i),{name:n?r._editTemplate:r._template,templateEngine:o.nativeTemplateEngine.instance}}},init:function(e,t,n,i,r){return o.bindingHandlers.template.init(e,o.bindingHandlers.wysiwygImg.makeTemplateValueAccessor(t,r))},update:function(e,t,n,i,r){return r=r.extend(t()),o.bindingHandlers.template.update(e,o.bindingHandlers.wysiwygImg.makeTemplateValueAccessor(t,r),n,i,r)}},o.virtualElements.allowedBindings.wysiwygImg=!0,o.bindingHandlers.wysiwyg={currentIndex:0,standardOptions:{},fullOptions:{toolbar1:"bold italic forecolor backcolor hr styleselect removeformat | link unlink | pastetext code",plugins:["link hr paste lists textcolor code"]},init:function(e,i,r,a,l){o.bindingHandlers.focusable.init(e),o.utils.domNodeDisposal.addDisposeCallback(e,function(){n.remove("#"+e.getAttribute("id"))});var s=i();if(!o.isObservable(s))throw"Wysiwyg binding called with non observable";if(8===e.nodeType)throw"Wysiwyg binding called on virtual node, ignoring...."+e.innerHTML;var d=e.getAttribute("id");d||(d="wysiwyg_"+ ++o.bindingHandlers.wysiwyg.currentIndex,e.setAttribute("id",d));var u,f="DIV"==e.tagName||"TD"==e.tagName,c=!1,p=!1,b={selector:"#"+d,inline:!0,hidden_input:!1,plugins:["paste"],toolbar1:"bold italic",toolbar2:"",preview_styles:!1,paste_as_text:!0,language:"en",schema:"html5",extended_valid_elements:"strong/b,em/i,*[*]",menubar:!1,skin:"gray-flat",setup:function(e){e.on("change redo undo",function(){c||(p=!0,s(e.getContent({format:"raw"})),p=!1)}),e.on("focus",function(){e.nodeChanged(),e.getElement().click()}),e.on("BeforeSetContent",function(e){e.initial&&(e.format="raw")}),u=e}};return o.utils.extend(b,o.bindingHandlers.wysiwyg.standardOptions),f&&o.utils.extend(b,o.bindingHandlers.wysiwyg.fullOptions),t.setTimeout(function(){n.init(b)}),o.computed(function(){var t=o.utils.unwrapObservable(i());if(!p){try{c=!0,"undefined"!=typeof u?u.setContent(t,{format:"raw"}):o.utils.setHtml(e,t)}catch(n){}c=!1}},null,{disposeWhenNodeIsRemoved:e}),{controlsDescendantBindings:!0}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../../bower_components/console-browserify/index.js":1,"./eventable.js":43}],58:[function(e,t,n){"use strict";var o=(e("./../../../bower_components/console-browserify/index.js"),function(e,t,n,i,r){var a,l,s,d=0;if("undefined"==typeof r&&(r=!1),"undefined"!=typeof t&&"function"==typeof t.splice)for(a={},l=0;l<t.length;l++)a[t[l].type]=t[l];else a=t;for(var u in e)if(e.hasOwnProperty(u))if(s="undefined"!=typeof i?i+"."+u:u,n.hasOwnProperty(u))if(typeof n[u]!=typeof e[u])null!==n[u]&&null!==e[u]&&("string"==typeof n[u]?String(e[u])!=e[u]&&(d=Math.max(d,2)):"number"==typeof n[u]?Number(e[u])!=e[u]&&(d=Math.max(d,2)):d=Math.max(d,2));else if("object"==typeof e[u])if(null!==e[u])if("undefined"!=typeof e[u].splice){if(e[u].length>0)if(n[u].length>0){var f=0;for(l=0;l<n[u].length;l++)if("string"==typeof n[u][l].type){for(;f<e[u].length&&e[u][f].type!==n[u][l].type;)f++;if(f>=e[u].length){d=Math.max(d,2);break}d=Math.max(d,o(e[u][f],void 0,n[u][l],s+"["+l+"."+n[u][l].type+"]"))}}else for(l=0;l<e[u].length;l++)"string"!=typeof e[u][l].type?d=Math.max(d,2):a.hasOwnProperty(e[u][l].type)?d=Math.max(d,o(a[e[u][l].type],a,e[u][l],s+"["+l+"."+e[u][l].type+"]")):(e[u].splice(l,1),l--,d=Math.max(d,2))}else null===n[u]?r?(d=Math.max(d,2),delete e[u]):(d=Math.max(d,1),n[u]=e[u]):d=Math.max(d,o(e[u],a,n[u],s,r));else null!==n[u]&&(d=Math.max(d,2));else"string"!=typeof e[u]&&"boolean"!=typeof e[u]&&"number"!=typeof e[u]&&(d=Math.max(d,2));else r?(d=Math.max(d,2),delete e[u]):(d=Math.max(d,1),n[u]=e[u]);return r||(d=Math.max(d,o(n,t,e,"undefined"!=typeof i?i+"!R":"!R",!0))),d});t.exports=o},{"./../../../bower_components/console-browserify/index.js":1}],59:[function(e,t,n){"use strict";var o=e("./utils.js"),i=e("./../../../bower_components/mensch/lib/parser.js"),r=(e("./../../../bower_components/console-browserify/index.js"),e("./domutils.js")),a=function(e,t,n){for(var o=e.length-1;o>=0;o--)if("property"==e[o].type&&e[o].name==t)return s(e[o].value,n);return null},l=function(e){return e.replace(/-([a-z])/g,function(e,t,n,o){return t.toUpperCase()})},s=function(e,t){if(e.match(/url\(.*\)/)){var n=e.replace(/(url\()([^\)]*)(\))/g,function(e,n,o,i){var r=o.trim(),a=o.trim().charAt(0);"'"==a||'"'==a?r=r.substr(1,r.length-2):a="";var l=t(r);return null!==l?n+a+l+a+i:e});return n}return e},d=function(e,t,n,d,f,c,p){var b="object"==typeof c&&null!==c?c:{},h=null,g=0;if("undefined"==typeof t){var y=i("#{\n"+e+"}",{comments:!0,position:!0});t=y.stylesheet.rules[0].declarations,g=1}for(var v=t.length-1;v>=0;v--)if("property"==t[v].type)if(p===!0&&"display"==t[v].name&&"none"==t[v].value)null===h&&(h=e),h=o.removeStyle(h,t[v].position.start,t[v].position.end,g,0,0,"");else{var m=t[v].name.match(/^-ko-(bind-|attr-)?([a-z0-9-]*?)(-if|-ifnot)?$/);if(null!==m){null===h&&"undefined"!=typeof e&&(h=e);var w,k,x,_="attr-"==m[1],j="bind-"==m[1],O=m[2],S="-if"==m[3]||"-ifnot"==m[3];if(S){w=t[v].name.substr(0,t[v].name.length-m[3].length);var C=a(t,w,n);if(null===C)throw"Unable to find declaration "+w+" for "+t[v].name}else{if((_||j)&&"undefined"==typeof f&&"undefined"!=typeof e)throw"Attributes and bind declarations are only allowed in inline styles!";var $,A=!0;if(_?(x=r.getAttribute(f,O),A=!1,$="virtualAttr"):j?($=null,"text"==O?"undefined"!=typeof f?x=r.getInnerText(f):A=!1:"html"==O&&"undefined"!=typeof f?x=r.getInnerHtml(f):A=!1):(A="undefined"!=typeof e,A&&(x=a(t,O,n)),$="virtualStyle"),A&&null===x)throw"Cannot find default value for "+t[v].name+": "+t[v].value+" in "+f+" ("+typeof e+"/"+O+")";var T=x,E=l(O);try{k=o.expressionBinding(t[v].value,d,T)}catch(H){throw H}null!==$&&"undefined"==typeof b[$]&&(b[$]={}),"virtualAttr"==$&&"href"==E&&($=null,E="wysiwygHref","undefined"!=typeof f&&null!==f&&r.removeAttribute(f,"href"));var M=a(t,t[v].name+"-if",n),I=!1;if(null===M)M=a(t,t[v].name+"-ifnot",n),I=!0;else if(null!==a(t,t[v].name+"-ifnot",n))throw"Unexpected error: cannot use both -if and -ifnot property conditions";if(null!==M)try{var B=o.conditionBinding(M,d);k=(I?"!":"")+"("+B+") ? "+k+" : null"}catch(H){throw H}null!==$?b[$][E]=k:b[E]=k}if(null!==h)try{if("undefined"!=typeof f&&null!==f)h=o.removeStyle(h,t[v].position.start,t[v].position.end,g,0,0,"");else{var D="";S||(D=O+": <!-- ko text: "+k+" -->"+x+"<!-- /ko -->"),h=o.removeStyle(h,t[v].position.start,t[v].position.end,g,0,0,D)}}catch(H){throw H}}else{var P=s(t[v].value,n);if(P!=t[v].value&&(null===h&&"undefined"!=typeof e&&(h=e),null!==h))try{h=o.removeStyle(h,t[v].position.start,t[v].position.end,g,0,0,t[v].name+": "+P)}catch(H){throw H}var F=l(t[v].name),N="virtualAttrStyle",R="undefined"!=typeof b.virtualStyle?b.virtualStyle[F]:void 0,U=" ";"undefined"==typeof b[N]&&(b[N]="''",U=""),"undefined"!=typeof R?(b[N]="'"+t[v].name+": '+("+R+")+';"+U+"'+"+b[N],delete b.virtualStyle[F]):b[N]="'"+t[v].name+": "+o.addSlashes(P)+";"+U+"'+"+b[N]}}if("undefined"!=typeof f&&null!==f){for(var L in b.virtualStyle)if(b.virtualStyle.hasOwnProperty(L))throw"Unexpected virtualStyle binding after conversion to virtualAttr.style for "+L;delete b.virtualStyle;var z=r.getAttribute(f,"data-bind"),q=(null!==z?z+", ":"")+u(b);r.setAttribute(f,"data-bind",q)}if("undefined"==typeof e){var V=!1;for(var Q in b.virtualStyle)if(b.virtualStyle.hasOwnProperty(Q)){V=!0;break}if(V){if("undefined"!=typeof b.virtualAttrStyle){var J=b.virtualAttrStyle;delete b.virtualAttrStyle,b.virtualAttrStyle=J}}else delete b.virtualStyle;return u(b)}return h},u=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&("object"==typeof e[n]?t.push(n+": { "+u(e[n])+" }"):t.push(n+": "+e[n]));return t.reverse().join(", ")};t.exports=d},{"./../../../bower_components/console-browserify/index.js":1,
"./../../../bower_components/mensch/lib/parser.js":10,"./domutils.js":60,"./utils.js":66}],60:[function(e,t,n){(function(e){"use strict";function n(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var o="undefined"!=typeof window?window.jQuery:"undefined"!=typeof e?e.jQuery:null,i=function(e,t){return"function"==typeof o.extend?o.extend(!0,e,t):n(e,JSON.parse(JSON.stringify(t)))},r=function(e,t){var n=o(e).attr(t);return"undefined"==typeof n&&(n=null),n},a=function(e,t,n){o(e).attr(t,n)},l=function(e,t){o(e).removeAttr(t)},s=function(e){return o(e).text()},d=function(e){return o(e).html()},u=function(e){return""===e.tagName&&"string"==typeof e.name?e.name.toLowerCase():""!==e.tagName?e.tagName.toLowerCase():o(e).prop("tagName").toLowerCase()},f=function(e,t){o(e).html(t)},c=function(e,t){o(e).replaceWith(t)},p=function(e,t){t&&"undefined"!=typeof e.detach&&e.detach(),e.remove()};t.exports={getAttribute:r,setAttribute:a,removeAttribute:l,getInnerText:s,getInnerHtml:d,getLowerTagName:u,setContent:f,replaceHtml:c,removeElements:p,objExtend:i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],61:[function(e,t,n){"use strict";var o=(e("./../../../bower_components/console-browserify/index.js"),e("./declarations.js")),i=e("./utils.js"),r=e("./model.js"),a=function(e){for(var t=e.split("|"),n={},o=0;o<t.length;o++){var i=t[o].split("=");n[i[0]]=i.length>1?i[1]:i[0]}return n},l=function(e,t,n){var o=[];for(var i in e)if(!i.match(/^customStyle$/)&&!i.match(/^_/)&&e.hasOwnProperty(i)){var r=null!==e[i]&&"undefined"!=typeof e[i]._category&&"style"==e[i]._category;if("id"==i||"type"==i||i.match(/Blocks$/));else if("styler"==t)(r||n>0)&&o.push(i);else if("edit"==t){var a=null!==e[i]&&"undefined"!=typeof e[i]._category&&"content"==e[i]._category&&("undefined"==typeof e[i]._context||"block"!=e[i]._context);a&&o.push(i)}else"undefined"==typeof t&&o.push(i)}return o},s=function(e,t,n,o,r){var l,s="";if(null!==e&&"undefined"!=typeof e._widget&&(l=e._widget),"undefined"==typeof l)throw"Unknown data type for "+t;var d="focusable: true";if("edit"==o&&(d+=", event: { focus: function(ui, event) { $($element).click(); } } "),s+='<label class="data-'+l+'"'+("boolean"==l?" data-bind=\"event: { mousedown: function(ui, evt) { if (evt.button == 0) { var input = $($element).find('input'); var ch = input.prop('checked'); setTimeout(function() { input.click(); input.prop('checked', !ch); input.trigger('change'); }, 0); } } }, click: function(ui, evt) { evt.preventDefault(); }, clickBubble: false\"":"")+">","undefined"!=typeof r&&"undefined"!=typeof r[l]){var u=r[l],f={};if("undefined"!=typeof u.parameters)for(var c in u.parameters)u.parameters.hasOwnProperty(c)&&"undefined"!=typeof e["_"+c]&&(f[c]=e["_"+c]);s+=u.html(n,d,f)}else if("boolean"==l)s+='<input type="checkbox" value="nothing" data-bind="checked: '+n+", "+d+'" />',s+='<span class="checkbox-replacer" ></span>';else if("color"==l)s+='<input size="7" type="text" data-bind="colorpicker: { color: '+n+", strings: $root.t('Theme Colors,Standard Colors,Web Colors,Theme Colors,Back to Palette,History,No history yet.') }, , "+d+'" />';else if("select"==l){if("undefined"!=typeof e._options){var p=a(e._options);s+='<select data-bind="value: '+n+", "+d+'">';for(var b in p)p.hasOwnProperty(b)&&(s+='<option value="'+b+"\" data-bind=\"text: $root.ut('template', '"+i.addSlashes(p[b])+"')\">"+p[b]+"</option>");s+="</select>"}}else if("font"==l)s+='<select type="text" data-bind="value: '+n+", "+d+'">',s+='<optgroup label="Sans-Serif Fonts">',s+='<option value="Arial,Helvetica,sans-serif">Arial</option>',s+="<option value=\"'Comic Sans MS',cursive,sans-serif\">Comic Sans MS</option>",s+='<option value="Impact,Charcoal,sans-serif">Impact</option>',s+="<option value=\"'Trebuchet MS',Helvetica,sans-serif\">Trebuchet MS</option>",s+='<option value="Verdana,Geneva,sans-serif">Verdana</option>',s+="</optgroup>",s+='<optgroup label="Serif Fonts">',s+='<option value="Georgia,serif">Georgia</option>',s+="<option value=\"'Times New Roman',Times,serif\">Times New Roman</option>",s+="</optgroup>",s+='<optgroup label="Monospace Fonts">',s+="<option value=\"'Courier New',Courier,monospace\">Courier New</option>",s+="</optgroup>",s+="</select>";else if("url"==l)s+='<div class="ui-textbutton">',s+='<input class="ui-textbutton-input" size="7" type="url" pattern="(mailto:.+@.+|https?://.+\\..+|\\[.*\\].*)" value="nothing" data-bind="css: { withButton: typeof $root.linkDialog !== \'undefined\' }, validatedValue: '+n+", "+d+'" />',s+="<a class=\"ui-textbutton-button\" data-bind=\"visible: typeof $root.linkDialog !== 'undefined', click: typeof $root.linkDialog !== 'undefined' ? $root.linkDialog.bind($element.previousSibling) : false, button: { icons: { primary: 'fa fa-fw fa-ellipsis-h' }, label: 'Opzioni', text: false }\">Opzioni</a>",s+="</div>";else if("integer"==l){var h=0,g=1e3;null!==e&&"undefined"!=typeof e._max&&(g=e._max),null!==e&&"undefined"!=typeof e._min&&(h=e._min);var y=g-h>=100?10:1,v=5*y;s+='<input class="number-spinner" size="7" step="'+y+'" type="number" value="-1" data-bind="spinner: { min: '+h+", max: "+g+", page: "+v+", value: "+n+" }, valueUpdate: ['change', 'spin'], "+d+'" />'}else s+='<input size="7" type="text" value="nothing" data-bind="value: '+n+", "+d+'" />';return s+="</label>"},d=function(e,t,n,o){var i;return"object"==typeof t&&null!==t&&"undefined"==typeof t._widget||"undefined"!=typeof n&&"undefined"!=typeof o&&o.length>0&&"object"==typeof e&&"undefined"!=typeof e[o]&&(i=e[o]),i},u=function(e,t,n,r,a,f,c,p,b,h,g,y,v,m,w){if("undefined"==typeof b&&(b=0),"undefined"!=typeof c&&"object"==typeof r&&null!==r&&"undefined"==typeof r._usecount)return"";var k,x="undefined"!=typeof y?c+"._defaultComputed":c,_="",j=x,O=1,S=1;if("object"==typeof r&&null!==r&&"undefined"==typeof r._widget||"undefined"==typeof y&&(O+=1),"undefined"==typeof y&&"undefined"!=typeof h&&(S+=h),"undefined"!=typeof c&&v&&(_+="<!-- ko ifSubs: { data: "+j+", threshold: "+S+", gutter: "+O+" } -->"),"undefined"!=typeof c&&(null===r||"undefined"==typeof r._name),"undefined"==typeof c&&null!==r&&"undefined"==typeof r._name,"object"==typeof r&&null!==r&&"undefined"==typeof r._widget){var C=l(r,p,b),$="styler"==p&&null!==r&&"undefined"!=typeof r.customStyle&&"undefined"!=typeof y,A="",T="";"undefined"!=typeof c&&"edit"==p&&(A=", click: function(obj, evt) { $root.selectItem("+c+", $data); return false }, clickBubble: false, css: { selecteditem: $root.isSelectedItem("+c+") }, scrollIntoView: $root.isSelectedItem("+c+"), ",T+=" selectable"),$&&(T+=" supportsCustomStyles"),_+='<div class="objEdit level'+b+T+'" data-bind="tooltips: {}'+A+'">';var E=null!==r&&"undefined"!=typeof r._name?r._name:"undefined"!=typeof c?"["+c+"]":"";if($){var H="Stile";"undefined"!=typeof a&&null!==a&&"undefined"!=typeof a._name&&(H=a._name),E="<span class=\"blockSelectionMethod\" data-bind=\"text: customStyle() ? $root.ut('template', '"+i.addSlashes(E)+"') : $root.ut('template', '"+i.addSlashes(H)+"')\">Block</span>"}else E="<span data-bind=\"text: $root.ut('template', '"+i.addSlashes(E)+"')\">"+E+"</span>";if(k=null!==r&&"undefined"!=typeof r._help?' title="'+i.addSlashes(r._help)+"\" data-bind=\"attr: { title: $root.ut('template', '"+i.addSlashes(r._help)+"') }\"":"",_+="<span"+k+' class="objLabel level'+b+'">'+E+"</span>","edit"==p&&"undefined"!=typeof r._blockDescription&&(_+="<div class=\"blockDescription\" data-bind=\"html: $root.ut('template', '"+i.addSlashes(r._blockDescription)+"')\">"+r._blockDescription+"</div>"),$&&(_+='<label class="data-boolean blockCheck" data-bind="tooltips: { }">',_+='<input type="checkbox" value="nothing" data-bind="focusable: true, checked: customStyle" />',_+='<span title="Switch between global and block level styles editing" data-bind="attr: { title: $root.t(\'Switch between global and block level styles editing\') }" class="checkbox-replacer checkbox-replacer-onoff"></span>',_+="</label>",_+="<!-- ko template: { name: 'customstyle', if: customStyle } --><!-- /ko -->"),"undefined"!=typeof c&&(_+="<!-- ko with: "+c+" -->",1==b&&"undefined"!=typeof c&&"undefined"!=typeof r._previewBindings&&"undefined"!=typeof e)){"undefined"!=typeof m&&(_+='<!-- ko with: $root.content() --><div class="objPreview" data-bind="'+m+'"></div><!-- /ko -->'),"undefined"!=typeof w&&(_+='<!-- ko with: $parent --><div class="objPreview" data-bind="'+w+'"></div><!-- /ko -->');var M=o(void 0,r._previewBindings,n,e.bind(this,f+"."));_+='<div class="objPreview"><div class="objPreviewInner" data-bind="'+M+'"></div></div>'}var I;0===b&&"undefined"!=typeof r._previewBindings&&(I=o(void 0,r._previewBindings,n,e.bind(this,f.length>0?f+".":"")));var B,D,P,F,N=_.length;for(B=0;B<C.length;B++)D=f.length>0?f+"."+C[B]:C[B],"object"==typeof r[C[B]]&&null!==r[C[B]]&&"undefined"==typeof r[C[B]]._widget||(F=void 0,0===b&&"theme"==C[B]?_+=u(e,t,n,r[C[B]],P,D,C[B],p,0,h,void 0,void 0,v,m):(F=d(g,r[C[B]],C[B],D),_+=u(e,t,n,r[C[B]],P,D,C[B],p,b+1,h,g,F,v,m,I)));for(B=0;B<C.length;B++)D=f.length>0?f+"."+C[B]:C[B],"object"==typeof r[C[B]]&&null!==r[C[B]]&&"undefined"==typeof r[C[B]]._widget&&(F=void 0,0===b&&"theme"==C[B]?_+=u(e,t,n,r[C[B]],P,D,C[B],p,0,h,void 0,void 0,v,m):(F=d(g,r[C[B]],C[B],D),_+=u(e,t,n,r[C[B]],P,D,C[B],p,b+1,h,g,F,v,m,I)));var R=_.length-N;if(0===R){if("object"==typeof r&&null!==r&&"template"==r._context)return"";_+='<div class="objEmpty" data-bind="html: $root.t(\'Selected element has no editable properties\')">Selected element has no editable properties</div>'}"undefined"!=typeof c&&(_+="<!-- /ko -->"),_+="</div>"}else{var U=!0;if("undefined"==typeof g&&(U=!1),null===r||"object"!=typeof r||"undefined"!=typeof r._widget){var L=[];"undefined"!=typeof y&&L.push("css: { notnull: "+c+"() !== null }"),k=null!==r&&"undefined"!=typeof r._help?' title="'+i.addSlashes(r._help)+"\" data-bind=\"attr: { title: $root.ut('template', '"+i.addSlashes(r._help)+"') }\"":"",k.length>0&&L.push("tooltips: {}");var z=L.length>0?'data-bind="'+i.addSlashes(L.join())+'"':"";_+='<div class="propEditor '+(U?"checkboxes":"")+'"'+z+">";var q=null!==r&&"undefined"!=typeof r._name?r._name:"undefined"!=typeof c?"["+c+"]":"";q="<span data-bind=\"text: $root.ut('template', '"+i.addSlashes(q)+"')\">"+q+"</span>",_+="<span"+k+' class="propLabel">'+q+"</span>",_+='<div class="propInput '+("undefined"!=typeof g?"local":"")+'" data-bind="css: { default: '+c+'() === null }">',_+=s(r,c,x,p,t),_+="</div>","undefined"!=typeof y&&(_+='<div class="propInput global" data-bind="css: { overridden: '+c+'() !== null }">',_+=s(r,c,y,p,t),_+="</div>",U&&(_+='<div class="propCheck"><label data-bind="tooltips: {}"><input type="checkbox" data-bind="focusable: true, click: function(evt, obj) { $root.localGlobalSwitch('+c+", "+y+"); return true; }, checked: "+c+'() !== null">',_+='<span class="checkbox-replacer" data-bind="css: { checked: '+c+"() !== null }, attr: { title: $root.t('This style is specific for this block: click here to remove the custom style and revert to the theme value') }\"></span>",_+="</label></div>")),_+="</div>"}else _+=null===r||"object"!=typeof r?'<div class="propEditor unknown">[A|'+c+"|"+typeof r+"]</div>":'<div class="propEditor unknown">[B|'+c+"|"+typeof r+"]</div>"}return"undefined"!=typeof c&&v&&(_+="<!-- /ko -->",_+="<!-- ko ifSubs: { not: true, data: "+j+", threshold: "+S+", gutter: 0 } -->",_+='<span class="label notused">('+c+")</span>",_+="<!-- /ko -->"),_},f=function(e,t,n,i,a,l,s,d,f,c,p,b){"undefined"==typeof p&&(p=!0);var h,g=r.getDef(e,l),y=r.getDef(e,a);"undefined"!=typeof y._previewBindings&&"thaeme"!=l&&"styler"==s&&(h=o(void 0,y._previewBindings,i,r.getBindValue.bind(void 0,e,n,a,a,"")));var v,m="undefined"!=typeof c&&c?e[l]._globalStyles:void 0,w="undefined"!=typeof c&&c?e[l]._globalStyle:void 0;if("undefined"!=typeof w){var k=r.getDef(e,"theme");v=k[w.replace(/^(\$theme|_theme_)\./,"")]}var x=r.getBindValue.bind(void 0,e,n,a,l);x._templateName=l;var _='<div class="editor">';_+='<div class="blockType'+("undefined"!=typeof m?" withdefaults":"")+'">'+g.type+"</div>";var j=u(x,t,i,g,v,"",void 0,s,b,f,m,w,p,h);j.length>0&&(_+=j),_+="</div>",d(_,l,s)},c=function(e,t,n,o,i,r,a,l){f(e,t,n,o,i,r,"edit",a,l),f(e,t,n,o,i,r,"styler",a,l,!0)},p=function(e,t,n,o,i){var a,l=e._defs,s=e.templateName,d=e._blocks,u=[];for(a=0;a<d.length;a++)"undefined"!=typeof d[a].container&&u.push(r.generateModel(l,d[a].block)),c(l,t,void 0,n,d[a].root,d[a].block,o,i);return"undefined"!=typeof l.theme&&f(l,t,void 0,n,s,"theme","styler",o,void 0,!1,!1,-1),u};t.exports=p},{"./../../../bower_components/console-browserify/index.js":1,"./declarations.js":59,"./model.js":63,"./utils.js":66}],62:[function(e,t,n){"use strict";var o=e("./model.js"),i=function(t){var n=t._defs,i=t.templateName,r=o.getDef(n,i),a=o.generateResultModel(t),l=e("./wrapper.js"),s=l(a,r,n);return s},r=function(){var t=e("./parser.js");return t.apply(t,arguments)},a=function(){var t=e("./editor.js");return t.apply(t,arguments)},l=function(){var t=e("./checkmodel.js");return t.apply(t,arguments)};t.exports={translateTemplate:r,wrappedResultModel:i,generateResultModel:o.generateResultModel,generateEditors:a,checkModel:l}},{"./checkmodel.js":58,"./editor.js":61,"./model.js":63,"./parser.js":64,"./wrapper.js":67}],63:[function(e,t,n){"use strict";var o=e("./domutils.js").objExtend,i=(e("./../../../bower_components/console-browserify/index.js"),function(e,t,n,o){var r=n.indexOf(".");if(-1==r)if("undefined"==typeof t[n]);else if(null===t[n])"object"==typeof o&&null!==o&&"undefined"==typeof o.push,t[n]=o;else if("object"==typeof t[n]&&"function"==typeof t[n].push){var a;if("string"==typeof o){var l=o.match(/^\[(.*)\]$/);if(null===l)throw"Unexpected default value for array property "+n+": "+o;a=l[1].split(",")}else{if("object"!=typeof o||"undefined"==typeof o.push)throw"Unexpected default value for array property "+n+": "+o+" typeof "+typeof o;a=o}for(var d=[],u=0;u<a.length;u++)"@"==a[u].substr(0,1)?d.push(s(e,a[u].substr(1))):a[u].length>0&&d.push(a[u]);t[n]=d}else"string"==typeof t[n]||"boolean"==typeof t[n]?t[n]=o:"object"==typeof t[n]&&null!==t[n]&&"undefined"!=typeof t[n]._widget&&(t[n]=o);else{var f=n.substr(0,r);i(e,t[f],n.substr(r+1),o)}}),r=function(e,t,n,o){if("undefined"!=typeof e[t]&&e[t]._initialized&&!e[t]._writeable)throw"Trying to alter non writeable model: "+t+" / "+n;if("undefined"==typeof e[t]&&(e[t]={_writeable:!0},"undefined"==typeof o&&(o={}),"undefined"==typeof o.category&&"undefined"==typeof e[t]._category&&(t.match(/(^t|.T)heme$/)||t.match(/(^s|.S)tyle$/)||t.match(/(^c|.C)olor$/)||t.match(/(^r|.R)adius$/)?o.category="style":o.category="content")),"undefined"!=typeof o){if("undefined"!=typeof o.name&&(e[t]._name=o.name),"undefined"!=typeof o.themeOverride&&(e[t]._themeOverride=o.themeOverride),"undefined"!=typeof o.globalStyle){e[t]._globalStyle=o.globalStyle;var i=o.globalStyle.replace(/^(\$theme|_theme_)\./,""),a=i.indexOf("."),l=-1!=a?i.substr(0,a):i;r(e,"theme",l),("undefined"==typeof e[t]._themeOverride||e[t]._themeOverride)&&r(e,t,"customStyle=false")}"undefined"!=typeof o.contextName&&(e[t]._context=o.contextName,"block"==o.contextName&&"undefined"==typeof e[t]._globalStyle&&(e[t]._globalStyle="_theme_.bodyTheme",r(e,"theme","bodyTheme"),("undefined"==typeof e[t]._themeOverride||e[t]._themeOverride)&&r(e,t,"customStyle=false"))),"undefined"!=typeof o.extend&&(e[t].type=o.extend)}for(var s in o)o.hasOwnProperty(s)&&"undefined"!=typeof o[s]&&-1==["name","extend","contextName","globalStyle","themeOverride"].indexOf(s)&&(e[t]["_"+s]=o[s]);"undefined"!=typeof n&&n.length>0&&(e[t]._props="undefined"!=typeof e[t]._props&&e[t]._props.length>0?e[t]._props+" "+n:n)},a=function(e){var t=e.match(/^[^A-Z]+([A-Z])(.*)$/);return null!==t?t[1].toLowerCase()+t[2]:null},l=function(e,t){var n={};for(var o in e)if(!o.match(/^_.*/)&&e.hasOwnProperty(o)){var r=e[o];if("object"==typeof r&&null!==r&&"undefined"!=typeof r._complex&&r._complex)n[o]=l(r,t);else if("type"==o)n[o]=r;else{if("object"!=typeof r)throw"Unexpected model def ["+o+"]="+r;n[o]=null}}if("undefined"!=typeof e._defaultValues){var a=e._defaultValues;for(var s in a)a.hasOwnProperty(s)&&i(t,n,s,a[s])}return n},s=function(e,t){var n=u(e,t,!1,!0);return l(n,e)},d=function(e,t){return u(e,t,!1,!0)},u=function(e,t,n,i){if("undefined"==typeof e[t]){if(-1!=t.indexOf(" "))return null;var r=a(t);return null!==r?u(e,r,n,i):null}var l=e[t];if("object"!=typeof l)throw"Block definition must be an object: found "+l+" for "+t;if("undefined"==typeof l._initialized){if("undefined"==typeof l.type&&(-1==t.indexOf(" ")?l.type=t:l.type=t.substr(t.indexOf(" ")+1)),l.type!=t&&"undefined"==typeof l._widget){var s=u(e,l.type,!0),d=o(s,l);l=d,e[t]=l}else"undefined"==typeof l._widget&&"undefined"==typeof l._props&&"undefined"==typeof l._complex;l._writeable=!0,l._initialized=!0}if("undefined"!=typeof l._props){var f=l._props;if(f=f.split(" "),f.length>0&&"undefined"==typeof l._writeable)throw"Altering a non writable object: "+t+" def: "+f;"undefined"==typeof l._processedDefs&&(l._processedDefs={}),"undefined"==typeof l._globalStyles&&(l._globalStyles={}),"undefined"==typeof l._defaultValues&&(l._defaultValues={});for(var c=0;c<f.length;c++){var p=f[c];if(0!==p.length){var b=p,h=null,g=p.match(/^([^=\[\]]+)(\[\])?(=?)(.*)$/);if(null!==g&&(p=g[1],"[]"==g[2]&&("undefined"==typeof l[p]&&(l[p]=[]),h=[]),"="==g[3]&&(h=p.match(/(^v|V)isible$/)?"true"==String(g[4]).toLowerCase():p.match(/^customStyle$/)?"true"==String(g[4]).toLowerCase():g[4])),null!==h&&"undefined"==typeof l._defaultValues[p]&&(l._defaultValues[p]=h),"undefined"==typeof l[p]){var y=u(e,t+" "+p,!0);null===y&&(y=u(e,p,!0)),l[p]=y}l._processedDefs[p]=b,l._complex=!0}}delete l._props}if(n){l._writeable=!1;var v=o({},l);return v}if(i)return l._writeable=!1,l;if("undefined"==typeof l._writeable||l._writeable===!1)throw"Retrieving non writeable object definition: "+t;return l},f=function(e,t){if(e){if("undefined"==typeof t._usecount)throw"ERROR trying to bind an unused property"}else"undefined"==typeof t._usecount&&(t._usecount=0),t._usecount++},c=function(e,t,n,o,i,r,a,l){var s=n(r,a,l);if("undefined"==typeof e[o]._globalStyles[i]){if(t)throw"Cannot find _globalStyle for "+i+" in "+o+"!";(-1!=i.indexOf(".")||"object"==typeof e[o][i]&&"undefined"!=typeof e[o][i]._widget)&&(e[o]._globalStyles[i]=s)}else if(e[o]._globalStyles[i]!=s)throw"Unexpected conflicting globalStyle [2] for "+o+"/"+i+": old="+e[o]._globalStyles[i]+" new="+s},p=function(e,t,n,o,i,a,l,s,d,b){var h,g,y;if("$"==l.substr(0,1)){var v=l.indexOf(".");if(-1==v)throw"Unexpected fullPath: "+l+"/"+a+"/"+i+"/"+s+"/"+d;if(h=l.substr(1,v-1),y=l.substr(v+1),"theme"!=h)throw"Unexpected $ sequence: "+h+" in "+l;var m=y.indexOf(".");h=y.substr(0,m),y=y.substr(m+1),g="$root.content().theme()."+h+"()."+y.replace(new RegExp("\\.","g"),"().")}else if("#"==l.substr(0,1))h=o,y=l.substr(1),g="$root.content()."+y.replace(new RegExp("\\.","g"),"().");else if("_theme_."==l.substr(0,8)){var w=l.indexOf(".",8);h=l.substr(8,w-8),y=l.substr(w+1),g="$root.content().theme()."+h+"()."+y.replace(new RegExp("\\.","g"),"().")}else"_root_."==l.substr(0,7)?(h=o,y=l.substr(7),g="$root.content()."+y.replace(new RegExp("\\.","g"),"().")):(h=i,y=a+l,g=l.replace(new RegExp("\\.","g"),"()."));if("undefined"==typeof t[h])throw"Cannot find model def for ["+h+"]";var k=y.indexOf("."),x=-1==k?y:y.substr(0,k);if(-1!=h.indexOf("-"))throw"ERROR unexpected char in block name: "+h;if(-1!=x.indexOf("-"))throw"ERROR unexpected char in property name: "+h;if(e)return"undefined"!=typeof t[h]._globalStyle&&"undefined"!=typeof t[h][x]&&"style"==t[h][x]._category&&(g+="._defaultComputed"),g;var _;if(e){if("undefined"!=typeof s)throw"Cannot use defaultValue in readonly mode!";if(d)throw"Cannot use overrideDefault in readonly mode for "+h+"/"+y+"/"+d+"!";if("undefined"!=typeof b)throw"Cannot set category for "+h+"/"+y+"/"+b+" in readonly mode!";_=u(t,h,!1,!0)}else t[h]._writeable===!1,_=u(t,h,t[h]._writeable===!1);if(null===_)throw"Unexpected model for ["+h+"]";if("undefined"==typeof _[x]){if(e)throw"Cannot find path "+x+" for "+h+"!";r(t,h,x),_=u(t,h,!1)}"undefined"!=typeof t[h]._globalStyle&&"undefined"!=typeof t[h][x]&&null!==t[h][x]&&"style"==t[h][x]._category&&(g+="._defaultComputed");var j=_;try{if(f(e,j),-1!=k){var O=y;do{var S=O.substr(0,k);if("undefined"==typeof j[S])throw"Found an unexpected prop "+S+" for model "+h+" for "+y;j=j[S],f(e,j),O=O.substr(k+1),k=O.indexOf(".")}while(-1!=k);if("undefined"==typeof j[O]||null===j[O])throw"Found an unexpected path termination "+O+" for model "+h+" for "+y;j=j[O]}else j=j[y];if("undefined"==typeof j||null===j)throw"Unexpected null model for "+h+"/"+a+"/"+l;"undefined"!=typeof b&&(j._category=b),f(e,j)}catch(C){throw C}if("undefined"!=typeof t[h]._globalStyle&&"object"==typeof t[h][x]&&null!==t[h][x]&&"undefined"!=typeof t[h][x]._category&&"style"==t[h][x]._category){var $=p.bind(void 0,e,t,n,o,i,""),A=-1!=y.indexOf(".")?y.substr(y.indexOf(".")):"";if(-1!=A.indexOf(".",1))throw"TODO unsupported object nesting! "+y;var T=t[h]._globalStyle+"."+x;"object"==typeof t[h][x]&&null!==t[h][x]&&"undefined"!=typeof t[h][x]._globalStyle&&(T=t[h][x]._globalStyle),c(t,e,$,h,x,T,void 0,!1);var E=T+A;if("undefined"==typeof s&&null!==t[h]._defaultValues[y]&&(s=t[h]._defaultValues[y]),c(t,e,$,h,y,E,s,d),"undefined"!=typeof s){if(e)throw"Cannot set a new theme default value ("+s+") for "+E.substr(7)+" while in readonly mode!";n("default",E.substr(7),s)}s=null}if("undefined"!=typeof s)if("undefined"==typeof t[h]._defaultValues[y]||"undefined"!=typeof d&&d){if(e)throw"Cannot set new _defaultValues [1] for "+y+" in "+h+"!";t[h]._defaultValues[y]=s}else if(null===s){if(e&&null!==t[h]._defaultValues[y])throw"Cannot set new _defaultValues [2] for "+y+" in "+h+"!";t[h]._defaultValues[y]=null}else if(t[h]._defaultValues[y]!=s)throw"Trying to set a new default value for "+h+" "+y+" while it already exists (current: "+t[h].defaultValues[y]+", new: "+s+")";return g},b=function(e){var t=e._defs,n=e.templateName,o=s(t,n);return"undefined"!=typeof t.theme&&(o.theme=s(t,"theme")),o};t.exports={ensurePathAndGetBindValue:p.bind(void 0,!1),getBindValue:p.bind(void 0,!0),generateModel:s,generateResultModel:b,getDef:d,createOrUpdateBlockDef:r}},{"./../../../bower_components/console-browserify/index.js":1,"./domutils.js":60}],64:[function(e,t,n){(function(n){"use strict";function o(e){return e.replace(/<!--\[if ([^\]]*)\]>([\s\S]*?)<!\[endif\]-->/g,function(e,t,n){var o="<!-- cc:start -->";o+=n.replace(/<(\/?)([A-Za-z]*)/g,"<$1cc$2").replace(/<\/([^>]*)>/g,"<!-- cc:before:$1 --></$1><!-- cc:after:$1 -->"),o+="<!-- cc:end -->";var r='<replacedcc condition="'+t+'" style="display: none">';return r+=i("<div>").append(i(o)).html().replace(/<!-- cc:before:([^ ]*) --><\/\1><!-- cc:after:\1 -->/g,"</$1>").replace(/^<!-- cc:start -->/,"").replace(/<!-- cc:end -->$/,""),r+="</replacedcc>"})}var i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,r=(e("./../../../bower_components/console-browserify/index.js"),e("./utils.js")),a=e("./declarations.js"),l=e("./stylesheet.js"),s=e("./model.js"),d=e("./domutils.js"),u=function(e,t,n){var o=d.getAttribute(t,e);try{var a=r.conditionBinding(o,n);i(t).before("<!-- ko if: "+a+" -->"),i(t).after("<!-- /ko -->"),d.removeAttribute(t,e)}catch(l){throw l}},f=function(e,t){d.setAttribute(e,t,d.getAttribute(e,"replaced"+t))},c=function(e,t,n,o){var i,r=d.getAttribute(e,"replacedstyle"),l=null;o&&(i={uniqueId:"$data",attr:{id:"id"}});var s=null!==d.getAttribute(e,"data-ko-display");l=a(r,void 0,t,n,e,i,s),null===l?l=r:d.removeAttribute(e,"replacedstyle"),null!==l&&(l.trim().length>0?d.setAttribute(e,"style",l):d.removeAttribute(e,"style"))},p=function(e,t,n,o){var i=d.getAttribute(o,e),r=t(i);null!==r&&d.setAttribute(o,e,r)},b=function(e,t,n,o,a,h,g,y,v,m){try{var w;if("block"==h)w=d.getAttribute(e,"data-ko-block"),d.removeAttribute(e,"data-ko-block");else{if("template"!=h)throw"Unexpected context name while processing block: "+h;w=g}i("[data-ko-remove]",e).remove();for(var k=i("[data-ko-block]",e).replaceWith("<replacedblock>"),x=["href","src","data-ko-placeholder-src","background"],_=0;_<x.length;_++){var j=p.bind(void 0,x[_],a);i("["+x[_]+"]",e).each(j)}var O=d.getAttribute(e,"data-ko-properties");null===O&&(O=""),i("[data-ko-properties]",e).each(function(e,t){O.length>0&&(O+=" "),O+=d.getAttribute(t,"data-ko-properties"),d.removeAttribute(t,"data-ko-properties")}),s.createOrUpdateBlockDef(t,w,O,{contextName:h});var S=s.ensurePathAndGetBindValue.bind(void 0,t,n,g,w,"");"block"==h&&S("id",""),i("style",e).each(function(e,o){var r=d.getInnerHtml(o),u=s.createOrUpdateBlockDef.bind(void 0,t),f=s.ensurePathAndGetBindValue.bind(void 0,t,n,g),c=l(r,void 0,f,u,n,a,g,w);if(c!=r)if(""!==c.trim()){var p=m(c);d.setAttribute(o,"data-bind","template: { name: '"+p+"' }"),d.setContent(o,"")}else d.removeElements(i(o))}),c(e,a,S,v);for(var C=["data-ko-display","data-ko-editable","data-ko-wrap","href"],$=0;$<C.length;$++){var A=d.getAttribute(e,C[$]);if(A)throw"ERROR: Unsupported "+C[$]+" used together with data-ko-block"}return i("[data-ko-link]",e).each(function(e,t){var n=d.getAttribute(t,"data-ko-link"),o=d.getAttribute(t,"replacedstyle");"undefined"!=typeof o&&null!==o||(o=""),o=""!==o?"-ko-attr-href: @"+n+"; "+o:"-ko-attr-href: @"+n,d.setAttribute(t,"replacedstyle",o),d.setAttribute(t,"data-ko-wrap",n),d.removeAttribute(t,"data-ko-link")}),i("[replacedstyle]",e).each(function(e,t){c(t,a,S,!1)}),i("[replacedhttp-equiv]",e).each(function(e,t){f(t,"http-equiv")}),i("[data-ko-display]",e).each(function(e,t){u("data-ko-display",t,S)}),i("[data-ko-editable]",e).each(function(e,t){var n,o,r,a,l,s,u=d.getAttribute(t,"data-ko-editable");if(u.lastIndexOf(".")>0){var f=u.substr(0,u.lastIndexOf("."));l=S(f)}else l=S(u);if(s="wysiwygClick: function(obj, evt) { $root.selectItem("+l+", $data); return false }, clickBubble: false, wysiwygCss: { selecteditem: $root.isSelectedItem("+l+") }, scrollIntoView: $root.isSelectedItem("+l+")","img"!=d.getLowerTagName(t)){o=d.getInnerHtml(t);var c=S(u,o,!0,"wysiwyg");if(n="",d.getAttribute(t,"id")||(n+="wysiwygId: id()+'_"+u.replace(".","_")+"', "),"undefined"!=typeof s&&(n+=s+", "),n+="wysiwygOrHtml: "+c,"td"==d.getLowerTagName(t)){var p=i('<div data-ko-wrap="false" style="width: 100%; height: 100%"></div>')[0];d.setAttribute(p,"data-bind",n);var b=d.getInnerHtml(i("<div></div>").append(p));d.setContent(t,b)}else r=d.getAttribute(t,"data-bind"),a=(null!==r?r+", ":"")+n,d.setAttribute(t,"data-bind",a),d.setContent(t,"");d.removeAttribute(t,"data-ko-editable")}else{var h=d.getAttribute(t,"width");if(""===h&&(h=null),null===h)throw"ERROR: data-ko-editable images must declare a WIDTH attribute!";var g=d.getAttribute(t,"height");""===g&&(g=null);var y=d.getAttribute(t,"align");r=d.getAttribute(t,"data-bind");var v=r&&r.match(/virtualAttr: {[^}]* height: ([^,}]*)[,}]/);v&&(g=v[1]);var w=r&&r.match(/virtualAttr: {[^}]* width: ([^,}]*)[,}]/);w&&(h=w[1]);var k;o=d.getAttribute(t,"data-ko-placeholder-src");var x="";o?x=d.getAttribute(t,"src"):o=d.getAttribute(t,"src");var _;h&&g?_=h+"+'x'+"+g:g?h||(_="'h'+"+g+"+''"):_="'w'+"+h+"+''";var j,O=g||d.getAttribute(t,"data-ko-placeholder-height"),C=h||d.getAttribute(t,"data-ko-placeholder-width");if(d.removeAttribute(t,"src"),d.removeAttribute(t,"data-ko-editable"),d.removeAttribute(t,"data-ko-placeholder-height"),d.removeAttribute(t,"data-ko-placeholder-width"),d.removeAttribute(t,"data-ko-placeholder-src"),o&&(j="{ width: "+C+", height: "+O+", text: "+_+"}"),!C||!O)throw"ERROR: IMG data-ko-editable MUST declare width and height attributes, or their placeholder counterparts data-ko-placeholder-width/data-ko-placeholder-height";var $=S(u,x,!1,"wysiwyg");n="wysiwygSrc: { width: "+h+", height: "+g+", src: "+$+", placeholder: "+j+" }",a=(null!==r?r+", ":"")+n,d.setAttribute(t,"data-bind",a);var A=m(t),T="{ width: "+h;"left"==y?T+=", float: 'left'":"right"==y?T+=", float: 'right'":"center"==y||("top"==y?T+=", verticalAlign: 'top'":"middle"==y?T+=", verticalAlign: 'middle'":"bottom"==y&&(T+=", verticalAlign: 'bottom'")),T+="}",i(t).before("<!-- ko wysiwygImg: { _data: $data, _item: "+l+", _template: '"+A+"', _editTemplate: 'img-wysiwyg', _src: "+$+", _width: "+h+", _height: "+g+", _align: "+(null===y?void 0:"'"+y+"'")+", _size: "+_+", _method: "+k+", _placeholdersrc: "+j+", _stylebind: "+T+" } -->"),i(t).after("<!-- /ko -->")}}),i("[href]",e).each(function(e,t){var n=d.getAttribute(t,"href"),o="wysiwygHref: '"+r.addSlashes(n)+"'",i=d.getAttribute(t,"data-bind"),a=(null!==i?i+", ":"")+o;d.setAttribute(t,"data-bind",a)}),i("replacedblock",e).each(function(e,l){var d=k[e],u=b(d,t,n,o,a,"block",w,y,!0,m),f=s.ensurePathAndGetBindValue(t,n,g,w,"",u);i(l).before("<!-- ko block: { data: "+r.addSlashes(f)+", template: 'block' } -->"),i(l).after("<!-- /ko -->"),i(l).remove()}),i(i("[data-ko-wrap]",e).get().reverse(),e).each(function(e,t){var n=d.getAttribute(t,"data-ko-wrap");if("undefined"==typeof n||""===n||"true"===n)throw"Unsupported empty value for data-ko-wrap: use false value if you want to always remove the tag";var o,i,a=r.conditionBinding(n,S),l=d.getAttribute(t,"data-bind");if(""!==l&&null!==l&&l.match(/(block|wysiwygOrHtml):/)){var s="<!-- ko "+l+" -->"+d.getInnerHtml(t)+"<!-- /ko -->";o=m(s),d.removeAttribute(t,"data-ko-wrap"),i=m(t),d.replaceHtml(t,"<!-- ko template: /* special */ (typeof templateMode != 'undefined' && templateMode == 'wysiwyg') || "+a+" ? '"+i+"' : '"+o+"' --><!-- /ko -->")}else o=m(d.getInnerHtml(t)),d.removeAttribute(t,"data-ko-wrap"),d.setContent(t,"<!-- ko template: '"+o+"' --><!-- /ko -->"),i=m(t),d.replaceHtml(t,"<!-- ko template: (typeof templateMode != 'undefined' && templateMode == 'wysiwyg') || "+a+" ? '"+i+"' : '"+o+"' --><!-- /ko -->")}),m(e,w,"show"),o(g,w,h,y),w}catch(T){throw T}},h=function(e,t,n,r){var a={},l=o(t.replace(/(<[^>]+\s)(style|http-equiv)(="[^"]*"[^>]*>)/gi,function(e,t,n,o){return t+"replaced"+n+o})),u=i(l),f=u[0],c=[],p=function(e,t,n,o){c.push({root:e,block:t,context:n,container:o})},h=function(e,t,n){if("undefined"==typeof a.themes&&(a.themes={}),"undefined"==typeof a.themes[e]&&(a.themes[e]={}),"undefined"==typeof a.themes[e][t]||null===a.themes[e][t])a.themes[e][t]=n;else if("undefined"!=typeof n&&null!==n){a.themes[e][t]}},g=i("[data-ko-container]",u),y={};g.each(function(e,t){var n=d.getAttribute(t,"data-ko-container")+"Blocks";d.removeAttribute(t,"data-ko-container"),d.setAttribute(t,"data-bind","block: "+n);var o=i("> [data-ko-block]",t);d.removeElements(o,!0),y[n]=o}),s.createOrUpdateBlockDef(a,"id"),s.createOrUpdateBlockDef(a,"bodyTheme"),s.createOrUpdateBlockDef(a,"blocks","blocks[]"),s.createOrUpdateBlockDef(a,"text"),b(f,a,h,p,n,"template",e,void 0,!1,r);var v=function(t,o,i){b(i,a,h,p,n,"block",e,t,!0,r)};for(var m in y)if(y.hasOwnProperty(m)){var w=y[m],k=m;s.ensurePathAndGetBindValue(a,h,e,e,"",k+".blocks","[]"),w.each(v.bind(void 0,k))}var x={_defs:a,templateName:e,_blocks:c};return"undefined"!=typeof a[e]._version&&(x.version=a[e]._version),x};t.exports=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../../bower_components/console-browserify/index.js":1,"./declarations.js":59,"./domutils.js":60,"./model.js":63,"./stylesheet.js":65,"./utils.js":66}],65:[function(e,t,n){"use strict";var o=e("./../../../bower_components/mensch/lib/parser.js"),i=(e("./../../../bower_components/console-browserify/index.js"),e("./utils.js")),r=e("./declarations.js"),a=function(e,t){for(var n,o,i,r=0;r<t.length;r++)if("rule"==t[r].type){for(var a=t[r].selectors,l=!1,s=!1,d=0;d<a.length;d++)a[d].match(/:preview$/)?s=!0:l=!0;if(s&&l)throw"Cannot mix selectors type (:preview and declarations) in @supports -ko-blockdefs";if(!s&&!l)throw"Cannot find known selectors in @supports -ko-blockdefs";if(l){
n="",o={},i=t[r].declarations;for(var u=0;u<i.length;u++)"property"==i[u].type&&("label"==i[u].name?o.name=i[u].value:"context"==i[u].name?o.contextName=i[u].value:"properties"==i[u].name?n=i[u].value:"theme"==i[u].name?o.globalStyle="_theme_."+i[u].value:"themeOverride"==i[u].name?o.themeOverride="true"==String(i[u].value).toLowerCase():o[i[u].name]=i[u].value);for(var f=0;f<a.length;f++)e(a[f],n,o)}if(s)for(var c=0;c<a.length;c++){var p=a[c].substr(0,a[c].indexOf(":")),b=t[r].declarations;e(p,void 0,{previewBindings:b})}}},l=function(e,t,n,s,d,u,f,c){var p=e,b=null;if("undefined"==typeof t){var h=o(e,{comments:!0,position:!0});if("stylesheet"!=h.type||"undefined"==typeof h.stylesheet)throw"Unable to parse stylesheet";t=h.stylesheet.rules}for(var g,y=t.length-1;y>=0;y--){if("supports"==t[y].type&&"-ko-blockdefs"==t[y].name)a(s,t[y].rules),p=i.removeStyle(p,t[y].position.start,b,0,0,0,"");else if("media"==t[y].type||"supports"==t[y].type)p=l(p,t[y].rules,n,s,d,u,f,c);else if("comment"==t[y].type);else if("rule"==t[y].type){for(var v=t[y].selectors,m="",w=null,k=0;k<v.length;k++){m.length>0&&(m+=", ");var x=v[k].match(/\[data-ko-block=([^ ]*)\]/);if(null!==x){if(null!==w&&w!=x[1])throw"Found multiple block-match attribute selectors: cannot translate it ("+w+" vs "+x[1]+")";w=x[1]}m+="<!-- ko text: templateMode =='wysiwyg' ? '#main-wysiwyg-area ' : '' --><!-- /ko -->"+v[k]}if(w){var _="<!-- ko foreach: $root.findObjectsOfType($data, '"+w+"') -->",j="<!-- /ko -->",O=b,S=" ";t[y].declarations.length>0&&(t[y].declarations[0].position.start.line!=t[y].position.end.line&&(S="\n"+new Array(t[y].position.start.col).join(" ")),O=t[y].declarations[t[y].declarations.length-1].position.end),null===O?p+=S+j:p=O==b?i.removeStyle(p,O,b,0,0,0,S+j):i.removeStyle(p,O,b,0,0,0,S+"}"+S+j),m=_+S+m.replace(new RegExp("\\[data-ko-block="+w+"\\]","g"),"<!-- ko text: '#'+id() -->"+w+"<!-- /ko -->"),s(w,"",{contextName:"block"})}var C=w?w:c;g=n.bind(this,C,"");var $=r(p,t[y].declarations,u,g);null!==$&&(p=$),p=i.removeStyle(p,t[y].position.start,t[y].position.end,0,0,0,m)}b=t[y].position.start}return p};t.exports=l},{"./../../../bower_components/console-browserify/index.js":1,"./../../../bower_components/mensch/lib/parser.js":10,"./declarations.js":59,"./utils.js":66}],66:[function(e,t,n){"use strict";var o=(e("./../../../bower_components/console-browserify/index.js"),e("./../../../bower_components/jsep/src/jsep.js"));o.addBinaryOp("or",1),o.addBinaryOp("and",2),o.addBinaryOp("eq",6),o.addBinaryOp("neq",6),o.addBinaryOp("lt",7),o.addBinaryOp("lte",7),o.addBinaryOp("gt",7),o.addBinaryOp("gte",7);var i=function(e){return e.replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")},r=function(e,t,n,o,i,r,a){for(var l=e.split("\n"),s=i,d=r,u=1+o;u<t.line;u++)s+=l[u-1-o].length+1;if(s+=t.col,null!==n){for(var f=1+o;f<n.line;f++)d+=l[f-1-o].length+1;d+=n.col}else d+=e.length+1;var c=e.substr(0,s-1)+a+e.substr(d-1);return c},a=function(e,t,n){function o(e){switch(e){case"or":return"||";case"and":return"&&";case"lt":return"<";case"lte":return"<=";case"gt":return">";case"gte":return">=";case"eq":return"==";case"neq":return"!=";default:return e}}function i(e,t,n,r){if("undefined"==typeof n&&(n=!0),"undefined"!=typeof r&&"Identifier"!==e.type&&"MemberExpression"!==e.type,"BinaryExpression"===e.type||"LogicalExpression"===e.type)return"("+i(e.left,t,n)+" "+o(e.operator)+" "+i(e.right,t,n)+")";if("CallExpression"===e.type){var a=e.arguments.map(function(e){return i(e,t,n)});return i(e.callee,t,n)+"("+a.join(", ")+")"}if("UnaryExpression"===e.type)return e.operator+i(e.argument,t,n);if("MemberExpression"==e.type&&e.computed)throw"Unexpected computed member expression";if("MemberExpression"!=e.type||e.computed){if("Literal"===e.type)return e.raw;if("Identifier"===e.type){var l=e.name;return n?t(l,r)+"()":l}if("ConditionalExpression"===e.type)return"("+i(e.test,t,n)+" ? "+i(e.consequent,t,n)+" : "+i(e.alternate,t,n)+")";throw"Compound"===e.type?"Syntax error in expression: operator expected after "+i(e.body[0],t,!1):"Found an unsupported expression type: "+e.type}var s=i(e.object,t,!1)+"."+i(e.property,t,!1);return n&&"Math"!==e.object.name&&"Color"!==e.object.name?t(s,r)+"()":s}return i(e,t,void 0,n)},l=function(e,t,n){var i;if("undefined"!=typeof n&&null!==n){var r=e.trim().replace(/@\[([^\]]+)\]|@([a-zA-Z0-9\._]+)\b/g,"###var###");if(r=r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"###var###"==r)i=[null,n];else if(r="^"+r.replace(/###var###/g,"(.+)")+"$",i=n.trim().match(new RegExp(r)),!i)throw"Cannot find default value for "+e+" in "+n}try{var l=0,s="'"+e.replace(/@\[([^\]]+)\]|@([a-zA-Z0-9\._]+)\b|(')/g,function(e,n,r,s){if(s)return"\\"+s;l++;var d,u=n||r;if(i&&"undefined"!=typeof i[l]&&(d=i[l].trim()),n){var f=o(n),c=a(f,t,d);return"'+"+c+"+'"}return"'+"+t(u,d)+"()+'"})+"'";return s=s.replace(/(^|[^\\])''\+/g,"$1").replace(/\+''/g,"")}catch(d){throw"Exception parsing expression "+e+" "+d}},s=function(e,t){var n=o(e),i=a(n,t);return i};t.exports={addSlashes:i,removeStyle:r,conditionBinding:s,expressionBinding:l}},{"./../../../bower_components/console-browserify/index.js":1,"./../../../bower_components/jsep/src/jsep.js":3}],67:[function(e,t,n){(function(n){"use strict";var o="undefined"!=typeof window?window.ko:"undefined"!=typeof n?n.ko:null,i=e("./../../../bower_components/knockout.wrap/knockout.wrap.js"),r=(e("./../../../bower_components/console-browserify/index.js"),function(e){for(var t=e.split("|"),n={},o=0;o<t.length;o++){var i=t[o].split("=");n[i[0]]=i.length>1?i[1]:i[0]}return n}),a=function(e,t,n,i,r,a){var l=o.computed({read:function(){var n=e();if(null===n){var l=o.utils.unwrapObservable(i);return"undefined"==typeof l||"custom"==l?o.utils.unwrapObservable(t):a[l][r]}return n},write:function(l){var s,d=o.utils.unwrapObservable(i);if(s="undefined"==typeof d||"custom"==d?o.utils.peekObservable(t):a[d][r],n)e(l==s?null:l);else{var u=o.utils.peekObservable(e);l==s&&null===u||e(l)}}});return l},l=function(e,t,n){for(var o,i=e.utils.unwrapObservable(t),r=0;r<n.length&&(o=e.utils.peekObservable(n[r]),o!=i);r++);r==n.length&&(r=n.length-1);var a=r+1;a==n.length&&(a=0);var l=e.utils.peekObservable(n[a]);t(l)},s=function(e){var t,n=e._variant;if("object"!=typeof e[n]||"undefined"==typeof e[n]._widget||"string"!=typeof e[n]._options&&"boolean"!==e[n]._widget)throw"Unexpected variant declaration: cannot find property "+n+" or its _options string and it is not a boolean";return t="string"==typeof e[n]._options?Object.keys(r(e[n]._options)):[!0,!1]},d=function(e,t,n,o,i,r,c){if("undefined"==typeof e){if("undefined"==typeof o.utils.unwrapObservable(c).type)throw"Found a non-typed def "+e;var p=o.utils.unwrapObservable(o.utils.unwrapObservable(c).type);e=t[p]}"undefined"==typeof i&&"undefined"!=typeof r&&r&&(i=c);var h="$root.content().",y=e._globalStyles;if("undefined"!=typeof y)for(var v in y)if(y.hasOwnProperty(v)){var m,w,k,x="$root.content().theme().scheme";if(y[v].substr(0,h.length)!=h)throw"UNEXPECTED globalStyle path ("+y[v]+") outside selfPath ("+h+")";k=y[v].substr(h.length),w=i,m=x.substr(0,h.length)==h?x.substr(h.length):x;for(var _=w,j=k.split("()."),O="",S=!0,C=0;C<j.length;C++)w=o.utils.unwrapObservable(w)[j[C]],S?"theme"==j[C]&&(S=!1):(O.length>0&&(O+="."),O+=j[C]);for(var $=m.split("()."),A=0;A<$.length;A++)_=o.utils.unwrapObservable(_)[$[A]];for(var T=!0,E=v.split("."),H=c,M=0;M<E.length;M++)H=o.utils.unwrapObservable(H)[E[M]];if(!o.isObservable(H))throw"Unexpected non observable target "+v+"/"+O;H._defaultComputed=a(H,w,T,_,O,n)}if("undefined"!=typeof e._variant){for(var I=e._variant.split("."),B=c,D=o.utils.unwrapObservable(c),P=0;P<I.length;P++)B=o.utils.unwrapObservable(B)[I[P]];if("undefined"!=typeof B._defaultComputed&&(B=B._defaultComputed),"undefined"==typeof B)throw"ERROR looking for variant target "+e._variant;D._nextVariant=l.bind(B,o,B,s(e))}for(var F in e)if(e.hasOwnProperty(F)){var N=e[F];if("object"==typeof N&&null!==N&&"undefined"!=typeof N._context&&"block"==N._context){var R=i[F](),U=d(t[F],t,n,o,i,r,R);c[F](U)}else if("object"==typeof N&&null!==N&&"blocks"==N.type){for(var L,z,q,V=i[F](),Q=V.blocks(),J=0;J<Q.length;J++)L=o.utils.unwrapObservable(Q[J]),z=o.utils.unwrapObservable(L.type),q=d(t[z],t,n,o,i,r,L),Q[J](q);var G=V.blocks;u(G,b.bind(V,void 0,t,n,o,void 0,i,r)),i[F]._wrap=f.bind(i[F],G._instrumentBlock),i[F]._unwrap=g.bind(i[F])}}return c},u=function(e,t){e._instrumentBlock=t,"undefined"==typeof e.origPush&&(e.origPush=e.push,e.push=c.bind(e),e.origSplice=e.splice,e.splice=p.bind(e))},f=function(e,t){var n=o.toJS(t),r=n.blocks;n.blocks=[];var a=i.fromJS(n,void 0,!0)();u(a.blocks,e);for(var l=0;l<r.length;l++){var s=o.toJS(r[l]);s.id="block_"+l,a.blocks.push(s)}this(a)},c=function(){if(arguments.length>1)throw"Array push with multiple arguments not implemented";if(arguments.length>0&&o.isObservable(arguments[0])&&"function"==typeof arguments[0]._unwrap&&(arguments[0]=arguments[0]._unwrap()),o.isObservable(arguments[0]))return this.origPush.apply(this,arguments);var e=this._instrumentBlock(arguments[0]);return this.origPush.apply(this,[e])},p=function(){if(arguments.length>3)throw"Array splice with multiple objects not implemented";if(arguments.length>2&&o.isObservable(arguments[2])&&"function"==typeof arguments[2]._unwrap&&(arguments[2]=arguments[2]._unwrap()),arguments.length>2&&!o.isObservable(arguments[2])){var e=this._instrumentBlock(arguments[2]);return this.origSplice.apply(this,[arguments[0],arguments[1],e])}return this.origSplice.apply(this,arguments)},b=function(e,t,n,o,r,a,l,s){"undefined"==typeof r&&(r=s);var u;u={"":d.bind(r,e,t,n,o,a,l)};var f=i.fromJS(r,u,!0);return f._unwrap=g.bind(f),f},h=function(e,t){var n=o.utils.unwrapObservable(e(o,t,void 0,!0));this(n)},g=function(){return o.toJS(this)},y=function(e,t,n){var i=b.bind(void 0,t,n,n.themes),r=i(o,e,void 0,!0);return r._wrap=h.bind(r,i),r._unwrap=g.bind(r),r};t.exports=y}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../../bower_components/console-browserify/index.js":1,"./../../../bower_components/knockout.wrap/knockout.wrap.js":6}],68:[function(e,t,n){(function(n){function o(e){this.getBrightness=function(t){return e(t).getBrightness()},this.isLight=function(t){return e(t).isLight()},this.isDark=function(t){return e(t).isDark()},this.getLuminance=function(t){return e(t).getLuminance()},this.lighten=function(t,n){return e(t).lighten(n).toHexString()},this.brighten=function(t,n){return e(t).brighten(n).toHexString()},this.darken=function(t,n){return e(t).darken(n).toHexString()},this.desaturate=function(t,n){return e(t).desaturate(n).toHexString()},this.saturate=function(t,n){return e(t).saturate(n).toHexString()},this.greyscale=function(t){return e(t).greyscale().toHexString()},this.spin=function(t,n){return e(t).spin(n).toHexString()},this.complement=function(t){return e(t).complement().toHexString()},this.mix=e.mix,this.readability=e.readability,this.isReadable=e.isReadable,this.mostReadable=e.mostReadable}var i=e("./../../../bower_components/tinycolor/tinycolor.js"),r=function(e){n.Color=new o(i)};t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../../bower_components/tinycolor/tinycolor.js":11}],69:[function(e,t,n){(function(n){"use strict";e("./../../../bower_components/console-browserify/index.js"),"undefined"!=typeof window?window.ko:"undefined"!=typeof n?n.ko:null,"undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null;t.exports=function(){}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../../bower_components/console-browserify/index.js":1}],70:[function(e,t,n){(function(n){"use strict";function o(e){var t=a(r.toJS(e.metadata),["urlConverter","template"]);return t.data=e.exportJS(),t}var i=(e("./../../../bower_components/console-browserify/index.js"),"undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null),r="undefined"!=typeof window?window.ko:"undefined"!=typeof n?n.ko:null,a=e("lodash.omit"),l=e("validator/lib/isEmail"),s=function(e){var t={name:"Save",enabled:r.observable(!0)};t.execute=function(){function n(t,n,o){t.meta.redirect&&history.replaceState({},"editor",t.meta.redirect),e.notifier.success(e.t("Creation has been saved"))}function r(t,n,o){e.notifier.error(e.t("Save errir"))}function a(){t.enabled(!0)}t.enabled(!1);var l=o(e);i.ajax({url:window.location.href,method:"POST",contentType:"application/json",data:JSON.stringify(l),success:n,error:r,complete:a})};var a={name:"Test",enabled:r.observable(!0)};a.execute=function(){function t(t,n,o){e.notifier.success(e.t("Test email sent..."))}function o(t,n,o){e.notifier.error(e.t("Unexpected error talking to server: contact us!"))}function s(){a.enabled(!0)}a.enabled(!1);var d=e.t("Insert here the recipient email address");if(d=n.prompt(e.t("Test email address"),d),!l(d))return n.alert(e.t("Invalid email address")),a.enabled(!0);var u=r.toJS(e.metadata),f={action:"email",rcpt:d,subject:"[test] "+u.id,html:e.exportHTML()};i.ajax({url:/dl/,method:"POST",data:f,success:t,error:o,complete:s})};var s={name:"Download",enabled:r.observable(!0)};s.execute=function(){s.enabled(!1),e.notifier.info(e.t("Downloading...")),e.exportHTMLtoTextarea("#downloadHtmlTextarea"),i("#downloadForm").attr("action","/dl/").submit(),s.enabled(!0)},e.save=t,e.test=a,e.download=s};t.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../../bower_components/console-browserify/index.js":1,"lodash.omit":20,"validator/lib/isEmail":32}],71:[function(e,t,n){"use strict";e("./../../bower_components/knockout-sortable/build/knockout-sortable.min.js"),e("./bindings/jqueryui-spinner.js"),e("./bindings/jqueryui-tabs.js"),e("./bindings/colorpicker.js"),e("./bindings/blocks.js"),e("./bindings/csstext.js"),e("./bindings/bind-iframe.js"),e("./bindings/droppable.js"),e("./bindings/fileupload.js"),e("./bindings/virtuals.js"),e("./bindings/wysiwygs.js"),e("./bindings/scrollfix.js"),e("./bindings/if-subs.js"),e("./bindings/extsortables.js"),e("./bindings/eventable.js"),e("./bindings/tooltips.js"),e("./bindings/extender-pagination.js"),e("./bindings/validated-value.js"),e("./bindings/scrollintoview.js")},{"./../../bower_components/knockout-sortable/build/knockout-sortable.min.js":4,"./bindings/bind-iframe.js":37,"./bindings/blocks.js":38,"./bindings/colorpicker.js":40,"./bindings/csstext.js":41,"./bindings/droppable.js":42,"./bindings/eventable.js":43,"./bindings/extender-pagination.js":44,"./bindings/extsortables.js":45,"./bindings/fileupload.js":46,"./bindings/if-subs.js":47,"./bindings/jqueryui-spinner.js":48,"./bindings/jqueryui-tabs.js":49,"./bindings/scrollfix.js":51,"./bindings/scrollintoview.js":52,"./bindings/tooltips.js":54,"./bindings/validated-value.js":55,"./bindings/virtuals.js":56,"./bindings/wysiwygs.js":57}],72:[function(e,t,n){(function(n){"use strict";function o(e){var t;return{viewModel:function(n){t=e(n)},init:function(){"undefined"!=typeof t&&"undefined"!=typeof t.init&&t.init()},dispose:function(){"undefined"!=typeof t&&"undefined"!=typeof t.dispose&&t.dispose()}}}var i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,r="undefined"!=typeof window?window.ko:"undefined"!=typeof n?n.ko:null,a="undefined"!=typeof window?window.kojqui:"undefined"!=typeof n?n.kojqui:null,l=e("./converter/main.js"),s=(e("./../../bower_components/console-browserify/index.js"),e("./viewmodel.js")),d=e("./bindings/choose-template.js"),u=function(e,t,n,o){var i,r,a,l,s;s=[],"undefined"!=typeof o&&o?(i=e.length-1,r=0,a=-1):(i=0,r=e.length-1,a=1);for(var d=i;d!=r+a;d+=a)"undefined"!=typeof e[d][t]&&(l=e[d][t].apply(e[d],n),"undefined"!=typeof l&&s.push(l));return s},f=r.utils.domNodeDisposal.addDisposeCallback;r.utils.domNodeDisposal.addDisposeCallback=function(e,t){var n=function(e){try{t(e)}catch(n){}};f(e,n)};var c,p=function(e){return{viewModel:function(t){try{e("applyBindings",r.applyBindings.bind(void 0,t))}catch(n){throw n}},dispose:function(){try{e("unapplyBindings",r.cleanNode.bind(this,n.document.body))}catch(t){throw t}}}},b=function(e,t,n,o){var r=n;for("undefined"!=typeof n&&"undefined"!=typeof o&&("object"==typeof t&&"replacedhtml"==t.tagName.toLowerCase()||(r+="-"+o));"undefined"==typeof r||null===r||e.exists(r);)r="anonymous-"+Math.floor(1e5*Math.random()+1);if("object"==typeof t&&"replacedhtml"==t.tagName.toLowerCase()){var a=i(t),l=i("replacedhead",a),s=i("replacedbody",a);e.adder(r+"-head",l.html()||""),e.adder(r+"-show",s.html()||""),e.adder(r+"-preview",a.html()),e.adder(r+"-wysiwyg",a.html()),l.children().detach(),l.html("<!-- ko block: content --><!-- /ko -->"),l.before("<!-- ko withProperties: { templateMode: 'head' } -->"),l.after("<!-- /ko -->"),s.html("<!-- ko block: content --><!-- /ko -->"),e.adder(r+"-iframe",a[0].outerHTML)}else"object"==typeof t?e.adder(r,t.outerHTML):e.adder(r,t);return r},c=function(e,t,n,o,r,a){var l=n.urlConverter,s=n;i.get(t,function(t){var n=h(e,l,"template",t,o,s,r,a);n.init()})},h=function(e,t,n,f,c,h,g,y){var v=f.match(/^([\S\s]*)([<]html[^>]*>[\S\s]*<\/html>)([\S\s]*)$/i);if(null===v)throw"Unable to find <html> opening and closing tags in the template";var m=v[1],w={"<html":0,"<head":0,"<body":0,"</html":0,"</body":0,"</head":0},k=v[2].replace(/(<\/?)(html|head|body)([^>]*>)/gi,function(e,t,n,o){return w[(t+n).toLowerCase()]+=1,t+"replaced"+n+o});for(var x in w)if(w.hasOwnProperty(x)&&1!=w[x]){if(0===w[x])throw"ERROR: missing mandatory element "+x+">";if(w[x]>1)throw"ERROR: multiple element "+x+"> occourences are not supported (found "+w[x]+" occourences)"}var _=v[3],j=[],O="+$root.contentListeners()",S=[];if("undefined"!=typeof g)for(var C=0;C<g.length;C++)"function"==typeof g[C]?S.push(o(g[C])):S.push(g[C]);var $=[],A={adder:function(e,t){if("string"!=typeof t)throw"Template system: cannot create new template "+e;t.match(/(data)?-ko-[^ =:]*/g);d.addTemplate(e,t),$.push(e)},exists:function(e){var t=d.getTemplateContent(e);return"undefined"!=typeof t},dispose:function(){for(var e=$.length-1;e>=0;e--)d.removeTemplate($[e])}};r.bindingHandlers.block.templateExists=A.exists;for(var T=b.bind(void 0,A),E=e("translateTemplate",l.translateTemplate.bind(void 0,n,k,t,T)),H=e("generateModel",l.wrappedResultModel.bind(void 0,E)),M={},I=u(S,"widget",[i,r,a]),B=0;B<I.length;B++)M[I[B].widget]=I[B];j.push.apply(j,e("generateEditors",l.generateEditors.bind(void 0,E,M,t,T,O)));var D=!1;if("undefined"!=typeof c&&null!==c){var P;P="string"==typeof c?r.utils.parseJson(c):c;var F=e("checkModel",l.checkModel.bind(void 0,H._unwrap(),j,P));2==F&&(D=!0);try{H._wrap(P)}catch(N){D=!0}}var R=m+d.getTemplateContent(n+"-iframe").replace(/(<\/?)replaced(html|head|body)([^>]*>)/gi,function(e,t,n,o){return t+n+o})+_,U=r.bindingHandlers.bindIframe.tpl;r.bindingHandlers.bindIframe.tpl=R;var L={dispose:function(){r.bindingHandlers.bindIframe.tpl=U}};S.push(L),S.push(A);var z=e("initializeViewmodel",s.bind(this,H,j,t,y));z.metadata=h;var q="0.14.0";return"undefined"!=typeof z.metadata.editorversion&&z.metadata.editorversion!==q,z.metadata.editorversion=q,"undefined"!=typeof E.version&&("undefined"!=typeof z.metadata.templateversion&&z.metadata.templateversion!==E.version,z.metadata.templateversion=E.version),d.init(),S.push(p(e)),u(S,"viewModel",[z]),D&&i("#incompatible-template").dialog({modal:!0,appendTo:"#mo-body",buttons:{Ok:function(){i(this).dialog("close")}}}),{model:z,init:function(){u(S,"init",void 0,!0)},dispose:function(){u(S,"dispose",void 0,!0)}}},g=function(e,t){if(!t())throw"Missing feature "+e},y=function(){try{return g("matchMedia",function(){return"undefined"!=typeof n.matchMedia}),g("XMLHttpRequest 2",function(){return"XMLHttpRequest"in n&&"withCredentials"in new n.XMLHttpRequest}),g("ES5 strict",function(){return function(){return"undefined"==typeof this}()}),g("CSS borderRadius",function(){return"undefined"!=typeof n.document.body.style.borderRadius}),g("CSS boxShadow",function(){return"undefined"!=typeof n.document.body.style.boxShadow}),g("CSS boxSizing",function(){return"undefined"!=typeof n.document.body.style.boxSizing}),g("CSS backgroundSize",function(){return"undefined"!=typeof n.document.body.style.backgroundSize}),g("CSS backgroundOrigin",function(){return"undefined"!=typeof n.document.body.style.backgroundOrigin}),v(),!0}catch(e){return!1}},v=function(){var e="checkbadbrowsersframe",t=r.bindingHandlers.bindIframe.tpl;r.bindingHandlers.bindIframe.tpl='<!DOCTYPE html>\r\n<html>\r\n<head><title>A</title>\r\n</head>\r\n<body><p style="color: blue" align="right" data-bind="style: { color: \'red\' }">B</p><div data-bind="text: content"></div></body>\r\n</html>\r\n',i("body").append('<iframe id="'+e+'" data-bind="bindIframe: $data"></iframe>');var o=n.document.getElementById(e);r.applyBindings({content:"dummy content"},o);var a=o.contentWindow.document.doctype,l="<!DOCTYPE "+a.name+(a.publicId?' PUBLIC "'+a.publicId+'"':"")+(!a.publicId&&a.systemId?" SYSTEM":"")+(a.systemId?' "'+a.systemId+'"':"")+">",s=l+"\n"+o.contentWindow.document.documentElement.outerHTML;r.cleanNode(o),r.removeNode(o),r.bindingHandlers.bindIframe.tpl=t;var d='<!DOCTYPE html>\n<html><head><title>A</title>\n</head>\n<body><p align="right" style="color: red;" data-bind="style: { color: \'red\' }">B</p><div data-bind="text: content">dummy content</div>\n\n</body></html>',u='<!DOCTYPE html>\n<html><head><title>A</title>\n</head>\n<body><p style="color: red;" data-bind="style: { color: \'red\' }" align="right">B</p><div data-bind="text: content">dummy content</div>\n\n</body></html>',f='<!DOCTYPE html>\n<html><head><title>A</title>\n</head>\n<body><p style="color: red;" align="right" data-bind="style: { color: \'red\' }">B</p><div data-bind="text: content">dummy content</div>\n\n</body></html>';if(d!==s&&u!==s&&f!==s)throw"Unexpected frame content. Misbehaving browser: "+s.length+"/"+d.length+"/"+u.length+"/"+f.length},m=function(){n.addEventListener&&(n.addEventListener("drag",function(e){e=e||n.event,e.preventDefault()},!1),n.addEventListener("dragstart",function(e){e=e||n.event,e.preventDefault()},!1),n.addEventListener("dragover",function(e){e=e||n.event,e.preventDefault()},!1),n.addEventListener("drop",function(e){e=e||n.event,e.preventDefault()},!1),n.document.body.addEventListener("drop",function(e){e.preventDefault()},!1)),n.document.ondragstart&&(n.document.ondragstart=function(){return!1})};t.exports={compile:h,load:c,isCompatible:y,fixPageEvents:m}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../bower_components/console-browserify/index.js":1,"./bindings/choose-template.js":39,"./converter/main.js":62,"./viewmodel.js":76}],73:[function(e,t,n){"use strict";var o=e("./../../bower_components/console-browserify/index.js"),i=function(e){return e()},r=[],a=function(e,t){var n,a=(new Date).getTime();"object"==typeof o&&o.time,n=i(t),"object"==typeof o&&o.time;var l=(new Date).getTime()-a;return"object"==typeof o&&!o.time,r.push({name:e,time:l}),r.length>100&&r.unshift(),n};t.exports={timedCall:a,logs:r}},{"./../../bower_components/console-browserify/index.js":1}],74:[function(e,t,n){(function(n){"use strict";var o="undefined"!=typeof window?window.ko:"undefined"!=typeof n?n.ko:null,i=e("./../../../bower_components/knockout-undomanager/knockout-undomanager.js"),r=e("./undoserializer.js"),a=function(e){return function(t){t.contentListeners(t.contentListeners()+2);var n=i(t.content,{levels:100,undoLabel:o.computed(function(){return t.t("Undo (#COUNT#)")}),redoLabel:o.computed(function(){return t.t("Redo")})});return t.undo=n.undoCommand,t.undo.execute=e.bind(t,"undo",t.undo.execute),t.redo=n.redoCommand,t.redo.execute=e.bind(t,"redo",t.redo.execute),t.undoReset=e.bind(t,"undoReset",n.reset),t.setUndoModeMerge=n.setModeMerge,t.setUndoModeOnce=n.setModeOnce,n.setModeIgnore(),n.setUndoActionMaker(r.makeUndoAction.bind(void 0,t.content)),r.watchEnabled(!0),{pause:function(){n.setModeIgnore()},run:function(){n.setModeOnce()},init:function(){n.setModeOnce()},dispose:function(){t.contentListeners(t.contentListeners()-2),r.watchEnabled(!1),n.dispose()}}}};t.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../../bower_components/knockout-undomanager/knockout-undomanager.js":5,"./undoserializer.js":75}],75:[function(e,t,n){(function(n){"use strict";var o,i,r="undefined"!=typeof window?window.ko:"undefined"!=typeof n?n.ko:null,a=(e("./../../../bower_components/console-browserify/index.js"),function(e,t){for(var n,o,i=0,r=e;i<t.length;)switch(t.charAt(i)){case"(":")"==t.charAt(i+1)&&(r=r()),i+=2;break;case"[":o=t.indexOf("]",i),r=r[t.substring(i+1,o)],i=o+1;break;case".":n=t.indexOf("(",i),-1==n&&(n=t.length),o=t.indexOf("[",i),-1==o&&(o=t.length),o=Math.min(n,o),r=r[t.substring(i+1,o)],i=o}return r}),l=function(e,t){for(var n,o="",i=0;i<=e.length;i++)if(n=i<e.length?e[i]:t,r.isObservable(n)&&(o+="()"),"undefined"!=typeof n._fieldName)o+="."+n._fieldName;else{if(!(i>0&&"function"==typeof e[i-1].pop))throw"Unexpected parent with no _fieldName and no parent array";var a=r.isObservable(e[i-1])?r.utils.peekObservable(e[i-1]):e[i-1],l=r.utils.arrayIndexOf(a,n);if(-1==l)throw"Unexpected object not found in parent array";o+="["+l+"]"}return o},s=function(e,t,n,o,i){var r=a(t,n);e(r,o,i)},d=function(e){o=e},u=function(e,t,n,i,a,d){try{var u=l(n,i);if("object"!=typeof a&&"function"!=typeof a||(a=r.toJS(a)),"undefined"!=typeof d&&("object"==typeof d.value||"function"==typeof d.value)){var f=r.toJS(d);d=f}if("undefined"!=typeof o)try{o(u,i,a,d)}catch(c){}return s.bind(void 0,t,e,u,a,d)}catch(c){}},f=function(e){return"undefined"==typeof e?i:void(i=e)};t.exports={dereference:l,reference:a,makeUndoAction:u,setListener:d,watchEnabled:f}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../../bower_components/console-browserify/index.js":1}],76:[function(e,t,n){(function(n){"use strict";function o(e,t,o,s){function d(e){return e.replace(/<replacedcc[^>]* condition="([^"]*)"[^>]*>([\s\S]*?)<\/replacedcc>/g,function(e,t,n){var o="<!--[if "+t.replace(/&amp;/,"&")+"]>";return o+=n.replace(/<!-- cc:before:([^ ]*) --><!-- cc:after:\1 -->/g,"</$1>").replace(/^.*<!-- cc:start -->/,"").replace(/<!-- cc:end -->.*$/,"").replace(/<(\/?)cc([A-Za-z]*)/g,"<$1$2"),o+="<![endif]-->"})}var u={galleryRecent:r.observableArray([]).extend({paging:16}),galleryRemote:r.observableArray([]).extend({paging:16}),selectedBlock:r.observable(null),selectedItem:r.observable(null),selectedTool:r.observable(0),selectedImageTab:r.observable(0),dragging:r.observable(!1),draggingImage:r.observable(!1),galleryLoaded:r.observable(!1),showPreviewFrame:r.observable(!1),previewMode:r.observable("mobile"),showToolbox:r.observable(!0),showTheme:r.observable(!1),showGallery:r.observable(!1),debug:r.observable(!1),contentListeners:r.observable(0),logoPath:"dist/img/mosaico32.png",logoUrl:".",logoAlt:"mosaico"};return u.content=e,u.blockDefs=t,u.notifier=l,u.tt=function(e,t){if("undefined"!=typeof t)for(var n in t)t.hasOwnProperty(n)&&(e=e.replace(new RegExp("__"+n+"__","g"),t[n]));return e},u.t=u.tt,u.ut=function(e,t){return t},u.templatePath=o,u.remoteUrlProcessor=function(e){return e},u.remoteFileProcessor=function(e){return"undefined"!=typeof e.url&&(e.url=u.remoteUrlProcessor(e.url)),"undefined"!=typeof e.thumbnailUrl&&(e.thumbnailUrl=u.remoteUrlProcessor(e.thumbnailUrl)),e},u.loadGallery=function(){u.galleryLoaded("loading");var e=s?s:"/upload/";i.getJSON(e,function(e){for(var t=0;t<e.files.length;t++)e.files[t]=u.remoteFileProcessor(e.files[t]);u.galleryLoaded(e.files.length),u.galleryRemote(e.files.reverse())}).fail(function(){u.galleryLoaded(!1),u.notifier.error(u.t("Unexpected error listing files"))})},u.fileToImage=function(e,t,n){return e.url},u.removeBlock=function(e,t){r.utils.unwrapObservable(u.selectedBlock)==r.utils.unwrapObservable(e)&&u.selectBlock(null,!0);var n=t.blocks.remove(e);return u.notifier.info(u.t("Block removed: use undo button to restore it...")),n},u.duplicateBlock=function(e,t){var n=r.utils.unwrapObservable(e),o=r.toJS(r.utils.unwrapObservable(t.blocks)[n]);"undefined"!=typeof o.id&&(o.id=""),t.blocks.splice(n+1,0,o)},u.moveBlock=function(e,t,n){var o=r.utils.unwrapObservable(e),i=r.utils.unwrapObservable(t.blocks);if(n&&o>0||!n&&o<i.length-1){var a=o+(n?-1:1),l=i[a];u.startMultiple(),t.blocks.splice(a,1),t.blocks.splice(o,0,l),u.stopMultiple()}},u.loadDefaultBlocks=function(){var e=r.toJS(u.content().mainBlocks);e.blocks=[];for(var t=r.utils.unwrapObservable(u.blockDefs),n=0;n<t.length;n++){var o=r.toJS(t[n]);o.id="block_"+n,e.blocks.push(o)}a("setMainBlocks",u.content().mainBlocks._wrap.bind(u.content().mainBlocks,e))},u.addImage=function(e){var t=i("#main-wysiwyg-area .selectable-img.selecteditem");return 1==t.length&&"object"==typeof e&&"undefined"!=typeof e.url?(r.contextFor(t[0])._src(e.url),!0):!1},u.addBlock=function(e,t){var n,o=u.selectedBlock();if(null!==o)for(var i=u.content().mainBlocks().blocks().length-1;i>=0;i--)if(u.content().mainBlocks().blocks()[i]()==o){n=i;break}var r;"undefined"!=typeof n?(r=n+1,u.content().mainBlocks().blocks.splice(r,0,e),u.notifier.info(u.t("New block added after the selected one (__pos__)",{pos:r}))):(u.content().mainBlocks().blocks.push(e),r=u.content().mainBlocks().blocks().length-1,u.notifier.info(u.t("New block added at the model bottom (__pos__)",{pos:r})));var a=u.content().mainBlocks().blocks()[r]();return u.selectBlock(a,!0),!1},u.findObjectsOfType=function(e,t){var n=[],o=r.utils.unwrapObservable(e);for(var i in o)if(o.hasOwnProperty(i)){var a=r.utils.unwrapObservable(o[i]);if(i.match(/Blocks$/))for(var l=r.utils.unwrapObservable(a.blocks),s=0;s<l.length;s++){var d=r.utils.unwrapObservable(l[s]);null!==t&&r.utils.unwrapObservable(d.type)!=t||n.push(d)}else"object"==typeof a&&null!==a&&(null!==t&&r.utils.unwrapObservable(a.type)!=t||n.push(a))}return n},u.placeholderHelper={element:function(e){return i(e[0].outerHTML).removeClass("ui-draggable").addClass("sortable-placeholder").css("display","block").css("position","relative").css("width","100%").css("height","auto").css("opacity",".8")[0]},update:function(e,t){}},u.startMultiple=function(){"undefined"!=typeof u.setUndoModeMerge&&u.setUndoModeMerge()},u.stopMultiple=function(){"undefined"!=typeof u.setUndoModeOnce&&u.setUndoModeOnce()},u.localGlobalSwitch=function(e,t){var n=e();return e(null===n?t():null),!1},u.selectItem=function(e,t,n){var o=r.utils.peekObservable(e);return"undefined"!=typeof n&&u.selectBlock(n,!1,!0),o!=t&&(e(t),null!==t&&0===u.selectedTool()&&u.selectedTool(1)),!1}.bind(u,u.selectedItem),u.isSelectedItem=function(e){return u.selectedItem()==e},u.selectBlock=function(e,t,n,o){var i=r.utils.peekObservable(e);o||u.selectItem(null),i!=t&&(e(t),u.showGallery(!1),null===t||n||0!==u.selectedTool()||u.selectedTool(1))}.bind(u,u.selectedBlock),u.countSubscriptions=function(e,t){var n=0;for(var o in e)if(e.hasOwnProperty(o)){var i=e[o];if(r.isObservable(i)&&("undefined"!=typeof i._defaultComputed&&(n+=i._defaultComputed.getSubscriptionsCount()),n+=i.getSubscriptionsCount(),i=r.utils.unwrapObservable(i)),"object"==typeof i&&null!==i){var a=u.countSubscriptions(i,"undefined"!=typeof t?t+"/"+o+"@":void 0);n+=a}}return n},u.loopSubscriptionsCount=function(){var e=u.countSubscriptions(u.content());n.document.getElementById("subscriptionsCount").innerHTML=e,n.setTimeout(u.loopSubscriptionsCount,1e3)},u["export"]=function(){var e=a("exportHTML",u.exportHTML);return e},u.exportHTML=function(){var e="exportframe";i("body").append('<iframe id="'+e+'" data-bind="bindIframe: $data"></iframe>');var t=n.document.getElementById(e);
r.applyBindings(u,t);var o=t.contentWindow.document.doctype,a="<!DOCTYPE "+o.name+(o.publicId?' PUBLIC "'+o.publicId+'"':"")+(!o.publicId&&o.systemId?" SYSTEM":"")+(o.systemId?' "'+o.systemId+'"':"")+">",l=a+"\n"+t.contentWindow.document.documentElement.outerHTML;r.cleanNode(t),r.removeNode(t),l=l.replace(/<script ([^>]* )?type="text\/html"[^>]*>[\s\S]*?<\/script>/gm,""),l=l.replace(/<!-- ko ((?!--).)*? -->/g,""),l=l.replace(/<!-- \/ko -->/g,""),l=l.replace(/ data-bind="[^"]*"/gm,""),l=l.replace(/ data-mce-(href|src)="[^"]*"/gm,""),l=l.replace(/ style="[^"]*"([^>]*) replaced(style="[^"]*")/gm,"$1 $2"),l=l.replace(/ replaced(style="[^"]*")([^>]*) style="[^"]*"/gm," $1$2"),l=l.replace(/ replaced(style="[^"]*")/gm," $1"),l=l.replace(/ http-equiv="[^"]*"([^>]*) replaced(http-equiv="[^"]*")/gm,"$1 $2"),l=l.replace(/ replaced(http-equiv="[^"]*")([^>]*) http-equiv="[^"]*"/gm," $1$2"),l=l.replace(/ replaced(http-equiv="[^"]*")/gm," $1"),l=d(l);l.match(/ data-[^ =]+(="[^"]+")? /)||l.match(/ replaced([^= ]*=)/);return l},u.exportHTMLtoTextarea=function(e){i(e).val(u.exportHTML())},u.exportJSONtoTextarea=function(e){i(e).val(u.exportJSON())},u.importJSONfromTextarea=function(e){u.importJSON(i(e).val())},u.exportMetadata=function(){var e=r.toJSON(u.metadata);return e},u.exportJSON=function(){var e=r.toJSON(u.content);return e},u.exportJS=function(){return r.toJS(u.content)},u.importJSON=function(e){var t=r.utils.parseJson(e);u.content._wrap(t)},u.exportTheme=function(){var e={},t=u.content().theme(),n=function(e,t,o){for(var i in o)if(o.hasOwnProperty(i)){var a=r.utils.unwrapObservable(o[i]);null!==a&&"object"==typeof a?n(i+".",t,a):t[e+i]=a}};n("",e,t);var o="";for(var i in e)e.hasOwnProperty(i)&&"type"!=i&&(o+=i+": "+e[i]+";\n");return o},u.loadImage=function(e){u.galleryRecent.unshift(e),u.selectedImageTab(0)},u.dialog=function(e,t){i(e).dialog(t)},u.log=function(e,t){},u.selectedImageTab.subscribe(function(e){1==e&&u.galleryLoaded()===!1&&u.loadGallery()},u,"change"),u}var i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,r="undefined"!=typeof window?window.ko:"undefined"!=typeof n?n.ko:null,a=(e("./../../bower_components/console-browserify/index.js"),e("./timed-call.js").timedCall),l=e("./../../bower_components/toastr/toastr.js");l.options={closeButton:!1,debug:!1,positionClass:"toast-bottom-full-width",target:"#mo-body",onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../bower_components/console-browserify/index.js":1,"./../../bower_components/toastr/toastr.js":12,"./timed-call.js":73}]},{},[36,13])(36)});